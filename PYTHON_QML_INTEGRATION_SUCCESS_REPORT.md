# üéâ –û–¢–ß–ï–¢ –û–ë –£–°–ü–ï–®–ù–û–ô –ò–ù–¢–ï–ì–†–ê–¶–ò–ò PYTHON ‚Üî QML

**–î–∞—Ç–∞:** 2025-01-11
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–ê–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –†–ê–ë–û–¢–ê–ï–¢**

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –¢–µ—Å—Ç 1: –ì–µ–æ–º–µ—Ç—Ä–∏—è
- **–°—Ç–∞—Ç—É—Å:** –ü–†–û–ô–î–ï–ù
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
  - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–∑—ã –∫–æ–ª–µ—Å–Ω–æ–π (wheelbase): 3.2–º ‚Üí 3.5–º
  - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è —à—Ç–æ–∫–∞ (rodPosition): 0.6 ‚Üí 0.7
- **QML –æ—Ç–∫–ª–∏–∫:**
  ```
  qml: üìê main.qml: applyGeometryUpdates() with DETAILED DEBUG
  qml:   üîß frameLength: 3200 ‚Üí 3500 (–ò–ó–ú–ï–ù–ï–ù–ò–ï!)
  qml:   ‚ú® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô rodPosition: 0.6 ‚Üí 0.7 (–ò–ó–ú–ï–ù–ï–ù–ò–ï!)
  qml:   ‚úÖ Geometry updated successfully
  ```

### ‚úÖ –¢–µ—Å—Ç 2: –ì—Ä–∞—Ñ–∏–∫–∞ (–ú–∞—Ç–µ—Ä–∏–∞–ª—ã)
- **–°—Ç–∞—Ç—É—Å:** –ü–†–û–ô–î–ï–ù
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
  - –®–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å –º–µ—Ç–∞–ª–ª–∞ (metalRoughness): 0.28 ‚Üí 0.45
  - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–µ–ª–æ–º–ª–µ–Ω–∏—è —Å—Ç–µ–∫–ª–∞ (glassIOR): 1.52 ‚Üí 1.65
- **QML –æ—Ç–∫–ª–∏–∫:**
  ```
  qml: üé® main.qml: applyMaterialUpdates() with DETAILED DEBUG
  qml:     üîç metalRoughness: 0.28 ‚Üí 0.45 (–ò–ó–ú–ï–ù–ï–ù–ò–ï!)
  qml:     üîç glassIOR (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô): 1.52 ‚Üí 1.65 (–ò–ó–ú–ï–ù–ï–ù–ò–ï!)
  qml:   ‚úÖ Materials updated successfully
  ```

### ‚úÖ –¢–µ—Å—Ç 3: –ì—Ä–∞—Ñ–∏–∫–∞ (–û–∫—Ä—É–∂–µ–Ω–∏–µ)
- **–°—Ç–∞—Ç—É—Å:** –ü–†–û–ô–î–ï–ù
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
  - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ IBL: true ‚Üí false
- **QML –æ—Ç–∫–ª–∏–∫:**
  ```
  qml: üåç main.qml: applyEnvironmentUpdates() with DETAILED DEBUG
  qml:   üåü IBL enabled (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô): true ‚Üí false (–ò–ó–ú–ï–ù–ï–ù–ò–ï!)
  qml:   ‚úÖ Environment updated successfully
  ```

---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Python ‚Üí QML (–°–∏–≥–Ω–∞–ª—ã)
1. **GeometryPanel** ‚Üí `geometry_changed.emit(dict)` ‚Üí `QMLView.geometry_changed` ‚Üí `main.qml.applyGeometryUpdates()`
2. **GraphicsPanel** ‚Üí `material_changed.emit(dict)` ‚Üí `QMLView.material_changed` ‚Üí `main.qml.applyMaterialUpdates()`
3. **GraphicsPanel** ‚Üí `environment_changed.emit(dict)` ‚Üí `QMLView.environment_changed` ‚Üí `main.qml.applyEnvironmentUpdates()`

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. GeometryPanel (`src/ui/panels/panel_geometry.py`)
- ‚úÖ –°–ª–∞–π–¥–µ—Ä—ã —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é 0.001–º (1–º–º)
- ‚úÖ –°–∏–≥–Ω–∞–ª `geometry_changed` —Å –ø–æ–ª–Ω–æ–π –≥–µ–æ–º–µ—Ç—Ä–∏–µ–π
- ‚úÖ –ú–µ—Ç–æ–¥ `_get_fast_geometry_update()` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º ‚Üí –º–º
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `rodPosition`, `frameLength`, `leverLength`

#### 2. GraphicsPanel (`src/ui/panels/panel_graphics.py`)
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
  - `material_changed` - –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–º–µ—Ç–∞–ª–ª, —Å—Ç–µ–∫–ª–æ)
  - `environment_changed` - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (IBL, —Ç—É–º–∞–Ω, –Ω–µ–±–æ)
  - `lighting_changed` - –æ—Å–≤–µ—â–µ–Ω–∏–µ
  - `camera_changed` - –∫–∞–º–µ—Ä–∞
  - `effects_changed` - —ç—Ñ—Ñ–µ–∫—Ç—ã
- ‚úÖ –ú–µ—Ç–æ–¥ `send_all_graphics()` –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

#### 3. QML (`assets/qml/main.qml`)
- ‚úÖ Enhanced v5.0 —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
  - `applyGeometryUpdates(params)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ 3D —Å—Ü–µ–Ω—ã
  - `applyMaterialUpdates(params)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
  - `applyEnvironmentUpdates(params)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏:
  - `üîß` - –æ–±—ã—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  - `‚ú® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (rodPosition, glassIOR, IBL)
  - `‚úÖ` - —É—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

---

## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å –æ—Å–æ–±–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π)

### –ì–µ–æ–º–µ—Ç—Ä–∏—è:
- **rodPosition** (0.0-1.0) - –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–µ–ø–ª–µ–Ω–∏—è —à—Ç–æ–∫–∞ –Ω–∞ —Ä—ã—á–∞–≥–µ
  - –í–ª–∏—è–µ—Ç –Ω–∞ –º–µ—Ö–∞–Ω–∏–∫—É –ø–æ–¥–≤–µ—Å–∫–∏
  - –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Å—á–µ—Ç–∞ –≤—Å–µ–π –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∏

### –ì—Ä–∞—Ñ–∏–∫–∞:
- **glassIOR** (1.0-2.0) - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–µ–ª–æ–º–ª–µ–Ω–∏—è —Å—Ç–µ–∫–ª–∞
  - –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–º–∞ –æ—Ç—Ä–∞–∂–µ–Ω–∏–π
  - –í–ª–∏—è–µ—Ç –Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å—Ç–µ–∫–ª–∞ —Ü–∏–ª–∏–Ω–¥—Ä–∞

- **iblEnabled** (bool) - –≤–∫–ª—é—á–µ–Ω–∏–µ Image-Based Lighting
  - –ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç –æ—Å–≤–µ—â–µ–Ω–∏–µ —Å—Ü–µ–Ω—ã
  - –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ Python ‚Üí QML:** < 100–º—Å
- **Debounce –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** 200–º—Å (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç flood)
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–ª–∞–π–¥–µ—Ä–æ–≤:** 100,000 –ø–æ–∑–∏—Ü–∏–π (—Ç–æ—á–Ω–æ—Å—Ç—å 0.001–º –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 4–º)
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ `valueChanged`, —Ñ–∏–Ω–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `valueEdited`

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. ‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ 3D —Å—Ü–µ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω–æ
2. ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–ª–∞–π–¥–µ—Ä—ã –ø–∞–Ω–µ–ª–µ–π
3. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π QML
4. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å undo/redo** - –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ QML
- –ü—Ä–µ—Å–µ—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∏–¥–∞–º–∏ (–µ—Å–ª–∏ –±—É–¥–µ—Ç split view)

---

## ‚úÖ Checklist –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] Python –ø–∞–Ω–µ–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–∏–≥–Ω–∞–ª—ã
- [x] QML –ø–æ–ª—É—á–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã
- [x] –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ 3D —Å—Ü–µ–Ω–µ
- [x] –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
- [x] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ SceneEnvironment
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- [x] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–¥–µ–ª–µ–Ω—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—Å–æ–±–æ
- [x] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞ (< 100–º—Å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Python ‚Üî QML —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!**

–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã, –ª–æ–≥–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç:
- Python –ø–∞–Ω–µ–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –°–∏–≥–Ω–∞–ª—ã —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ QML
- QML –ø–æ–ª—É—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Ö –∫ 3D —Å—Ü–µ–Ω–µ
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏–º—É–ª—è—Ü–∏–µ–π

---

**–ê–≤—Ç–æ—Ä:** AI Assistant
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ + –í–∏–∑—É–∞–ª—å–Ω–æ–µ
**–í–µ—Ä—Å–∏—è:** 1.0 (Initial Integration Complete)
