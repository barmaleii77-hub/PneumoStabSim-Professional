# Служебные скрипты PneumoStabSim Professional

В каталоге `scripts/` собраны утилиты для настройки окружения, диагностики и
вспомогательных задач разработки. Скрипты рассчитаны на запуск из корня
репозитория. Для PowerShell сценариев используйте `pwsh`/PowerShell 7+, для
Python — активированное `uv`-окружение (`make uv-run CMD="python <скрипт>"`).

## Окружение и bootstrap

| Скрипт | Назначение | Типичный вызов |
| ------ | ---------- | -------------- |
| `activate.ps1` | Минимальная настройка переменных среды для сессии PowerShell (PYTHONPATH, Qt backend). Полезно для быстрого ручного запуска. | `pwsh ./scripts/activate.ps1` |
| `activate_environment.ps1` | Обёртка, переадресующая вызовы на корневой `activate_environment.ps1` (поддержка старых путей в CI и документации). | `pwsh ./scripts/activate_environment.ps1` |
| `bootstrap_uv.py` | Проверяет наличие [`uv`](https://github.com/astral-sh/uv), при необходимости устанавливает и запускает `uv sync`. | `python scripts/bootstrap_uv.py --sync` |
| `setup_dev.py` | Дополнительные шаги подготовки dev-окружения (генерация `.env`, проверка путей, вспомогательные утилиты). | `make uv-run CMD="python scripts/setup_dev.py"` |

> ℹ️  Для комплексной настройки окружения существуют и скрипты в корне
> репозитория: `activate_environment.ps1`, `setup_environment.ps1`,
> `setup_all_paths.ps1`, `setup_paths_quick.ps1`. См. раздел «PowerShell каталога»
> в [docs/ENVIRONMENT_SETUP.md](../docs/ENVIRONMENT_SETUP.md).

## Диагностика и отчёты

| Скрипт | Назначение |
| ------ | ---------- |
| `check_environment.py` | Проверяет версию Python, структуру репозитория и возможность импорта критичных пакетов. Выводит JSON, пригодный для CI. |
| `health_check.py` | Собирает сводную информацию об установленных зависимостях, Qt и конфигурации проекта для быстрой диагностики. |
| `terminal_diagnostic.py` | Диагностика графического стека и системных параметров терминала (рендерер, переменные Qt, поддержка UTF-8). |
| `comprehensive_test.py` | Расширенный тест-раннер: выполняет Python-проверки, анализ конфигурации и формирует лог в `logs/`. |

## Поддержка разработки

| Скрипт | Назначение |
| ------ | ---------- |
| `clean.py` | Удаляет временные каталоги, кеши `__pycache__`, артефакты `logs/` и служебные файлы сборки. |
| `export_copilot_chat.py` | Экспортирует историю чатов Copilot в структурированный JSON для анализа. |
| `optimize_effects.py` | Вспомогательные оптимизации параметров пост-эффектов и профилей рендеринга. |

Каждый скрипт содержит встроенную справку или комментарии по использованию.
Рекомендуем запускать `make uv-run` для Python-утилит и хранить вывод в
`reports/`, если результаты понадобятся повторно.
