✅ Windows UTF-8 encoding configured
Python version: 3.13.7
⚠️ WARNING: Python 3.12+ detected. Some packages may have compatibility issues.
   Recommended: Python 3.8 - 3.11 for optimal stability
✅ PySide6 imported successfully
✅ Project modules imported successfully
✅ Custom 3D geometry types imported
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | ======================================================================
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | === START RUN: PneumoStabSim ===
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | ======================================================================
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | Python version: 3.13.7 (tags/v3.13.7:bcee1c3, Aug 14 2025, 14:15:11) [MSC v.1944 64 bit (AMD64)]
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | Platform: Windows-11-10.0.26200-SP0
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | Process ID: 33588
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | Log file: C:\Users\Алексей\source\repos\barmaleii77-hub\PneumoStabSim-Professional\logs\run.log
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | Timestamp: 2025-10-08T15:10:27.142790Z
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | PySide6 version: 6.9.3
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | NumPy version: 2.3.3
setHighDpiScaleFactorRoundingPolicy must be called before creating the QGuiApplication instance
============================================================
PNEUMOSTABSIM STARTING (Enhanced Terminal Support)
============================================================
Visualization backend: Qt Quick 3D (U-Frame PBR)
Qt RHI Backend: d3d11
Python encoding: utf-8
Terminal encoding: cp1251
🧪 TEST MODE: Auto-close after 5 seconds

Step 1: Creating QApplication...
Step 2: Installing Qt message handler...
Step 3: Setting application properties...
Step 4: Creating MainWindow (backend: Qt Quick 3D (U-Frame PBR))...
MainWindow: Создание SimulationManager...
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | SciPy version: 1.16.2
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | ======================================================================
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim | Application starting with enhanced encoding support...
2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim.UI | event=APP_CREATED | Qt application initialized with enhanced encoding
✅ SimulationManager создан (не запущен)
    GeometryBridge initialized:
      Frame: 2000x650x120mm
      Lever: 315mm
      Cylinder: 250mm + 100mm tail
✅ GeometryBridge создан для интеграции Python↔QML
MainWindow: Построение UI...
    _setup_central: Создание системы сплиттеров...
    [QML] Загрузка main.qml...
    Загрузка main.qml: file:///C:/Users/Алексей/source/repos/barmaleii77-hub/PneumoStabSim-Professional/assets/qml/main.qml
🔍 QML DEBUG: 🎯 main.qml: enableEffectsPreset() called with: clean
    [OK] main.qml загружен успешно
    ✅ Система сплиттеров создана (горизонтальный + вертикальный)
  ✅ Центральный вид Qt Quick 3D настроен
    _setup_tabs: Создание вкладок с ресайзбаром...
🔧 GeometryPanel: Сигналы подключены для МГНОВЕННОГО обновления (valueChanged)
🔧 GeometryPanel: Отправка начальных параметров геометрии...
🔄 GeometryPanel: Отправка ПОЛНОЙ геометрии в QML (изменён параметр: init = 0.0)
   📐 Основные: frameLength=3200.0мм, leverLength=800.0мм
   📐 Цилиндр: cylDiam=80.0мм, stroke=300.0мм
   📐 Шток: diameter=35.0мм, length=200.0мм
   🎯 rodPosition = 0.6 (КРИТИЧЕСКИЙ параметр)
      ✅ Вкладка 'Геометрия' создана
      ✅ Вкладка 'Пневмосистема' создана
      ✅ Вкладка 'Режимы стабилизатора' создана
🎨 GraphicsPanel: Отправка начальных настроек графики...
      ✅ Вкладка 'Графика и визуализация' создана
      ✅ Вкладка 'Динамика движения' создана (заглушка)
✅ Сигналы GeometryPanel подключены (geometry_changed → QML)
✅ Сигналы PneumoPanel подключены (ЗАГЛУШКА)
✅ Сигнал simulation_control подключен
✅ Сигнал animation_changed подключен к _on_animation_changed
✅ Сигналы ModesPanel подключены
✅ Сигнал lighting_changed подключен
✅ Сигнал material_changed подключен
✅ Сигнал environment_changed подключен
✅ Сигнал quality_changed подключен
✅ Сигнал camera_changed подключен
✅ Сигнал effects_changed подключен
✅ Сигнал preset_applied подключен
✅ Все сигналы GraphicsPanel подключены
    ✅ Вкладки созданы и подключены к горизональному сплиттеру
  ✅ Вкладки настроены
  ✅ Меню настроено (заглушка)
  ✅ Меню настроено
  ✅ Панель инструментов настроена (заглушка)
  ✅ Панель инструментов настроена
  ✅ Строка состояния настроена
  ✅ Строка состояния настроена
  ✅ Сигналы подключены (заглушка)
  ✅ Сигналы подключены
  ✅ Таймер рендеринга запущен
  ⏸️  SimulationManager запустится после window.show()
  ✅ Настройки восстановлены (заглушка)
  ✅ Настройки восстановлены
✅ MainWindow.__init__() завершён
Step 5: MainWindow created - Size: 1400x900

============================================================
APPLICATION READY - Qt Quick 3D (U-Frame PBR) (Enhanced)
🎮 Features: 3D visualization, physics simulation, real-time controls
🔧 Enhanced: Better encoding, terminal, and compatibility support
============================================================

2025-10-08T20:10:27 | PID:33588 TID:27704 | INFO     | PneumoStabSim.UI | event=WINDOW_SHOWN | Main window displayed (Qt Quick 3D (U-Frame PBR))
🔒 Starting application event loop...
⏰ QTimer: Отправка начальной геометрии...
═══════════════════════════════════════════════
🔺 MainWindow: Получен сигнал geometry_changed от панели
   Параметры: ['boreHead', 'boreRod', 'cylDiamM', 'cylinderBodyLength', 'deadGapM', 'frameBeamSize', 'frameHeight', 'frameLength', 'frameToPivot', 'leverLength', 'pistonRodLength', 'pistonRodLengthM', 'pistonThickness', 'pistonThicknessM', 'rodDiameter', 'rodDiameterM', 'rodPosition', 'strokeM', 'tailRodLength', 'trackWidth']
═══════════════════════════════════════════════
🔍 QML DEBUG: 🔧 main.qml: updateGeometry() called - ALL PARAMETERS SUPPORT
   ✅ Геометрия передана в QML через updateGeometry()
   📐 rodPosition = 0.6
═══════════════════════════════════════════════
  ✅ Начальная геометрия отправлена: rodPosition = 0.6
⏰ QTimer: Отправка начальных настроек графики...
═══════════════════════════════════════════════
💡 MainWindow: Параметры освещения изменены!
   Получено параметров: {'fill_light': {'brightness': 1.2, 'color': '#f0f0ff'}, 'key_light': {'angle_x': -30, 'angle_y': -45, 'brightness': 2.8, 'color': '#ffffff'}, 'point_light': {'brightness': 20000, 'color': '#ffffff', 'position_y': 1800}}
═══════════════════════════════════════════════
🔍 QML DEBUG: 💡 main.qml: updateLighting() called
   ✅ Освещение передано в QML через updateLighting()
📊 Статус: Освещение успешно обновлено в QML
═══════════════════════════════════════════════
═══════════════════════════════════════════════
🏗️ MainWindow: Параметры материалов изменены!
   Получено параметров: {'frame': {'metalness': 0.8, 'roughness': 0.4}, 'glass': {'opacity': 0.35, 'roughness': 0.05}, 'metal': {'clearcoat': 0.25, 'metalness': 1.0, 'roughness': 0.28}}
═══════════════════════════════════════════════
🔍 QML DEBUG: 🎨 main.qml: updateMaterials() called
   ✅ Материалы переданы в QML через updateMaterials()
📊 Статус: Материалы успешно обновлены в QML
═══════════════════════════════════════════════
🌍 MainWindow: Параметры окружения изменены: {'background_color': '#2a2a2a', 'fog_color': '#808080', 'fog_density': 0.1, 'fog_enabled': False, 'skybox_enabled': False}
🔍 QML DEBUG: 🌍 main.qml: updateEnvironment() called
   ✅ Окружение передано в QML через updateEnvironment()
⚙️ MainWindow: Параметры качества изменены: {'aa_quality': 2, 'antialiasing': 2, 'shadow_quality': 1, 'shadows_enabled': True}
🔍 QML DEBUG: ⚙️ main.qml: updateQuality() called
   ✅ Качество передано в QML через updateQuality()
📷 MainWindow: Параметры камеры изменены: {'auto_rotate': False, 'auto_rotate_speed': 0.5, 'far': 50000.0, 'fov': 45.0, 'near': 10.0, 'speed': 1.0}
🔍 QML DEBUG: 📷 main.qml: updateCamera() called
   ✅ Настройки камеры переданы в QML через updateCamera()
✨ MainWindow: Параметры эффектов изменены: {'bloom_enabled': False, 'bloom_intensity': 0.3, 'depth_of_field': False, 'motion_blur': False, 'ssao_enabled': False, 'ssao_intensity': 0.5}
🔍 QML DEBUG: ✨ main.qml: updateEffects() called
   ✅ Эффекты переданы в QML через updateEffects()
  ✅ Все начальные настройки графики отправлены!
🧪 Test mode: Auto-closing...

=== APPLICATION CLOSED (code: 0) ===
🧹 Cleanup completed
2025-10-08T20:10:32 | PID:33588 TID:27704 | INFO     | PneumoStabSim | Application event loop finished with code: 0
2025-10-08T20:10:32 | PID:33588 TID:27704 | INFO     | PneumoStabSim | ======================================================================
2025-10-08T20:10:32 | PID:33588 TID:27704 | INFO     | PneumoStabSim | === END RUN ===
2025-10-08T20:10:32 | PID:33588 TID:27704 | INFO     | PneumoStabSim | ======================================================================
