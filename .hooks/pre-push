#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(git rev-parse --show-toplevel)"
cd "$ROOT_DIR"

if command -v make >/dev/null 2>&1; then
  echo "[pre-push] Running make check to enforce quality gate..."
  make check
else
  echo "[pre-push] 'make' not found, falling back to python -m tools.ci_tasks verify"
  python -m tools.ci_tasks verify
fi
