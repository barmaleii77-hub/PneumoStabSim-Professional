# ?? ROADMAP: ДОРАБОТКА ДО ТРЕБОВАНИЙ

**Текущая готовность:** 45% (было 25%)
**Цель:** 95%+
**Оценка времени:** 6-8 недель

---

## ?? ФАЗЫ РАЗРАБОТКИ

### ? PHASE 0: Базовая функциональность (ЗАВЕРШЕНО)
**Время:** 2 недели
**Статус:** ? ГОТОВО

- ? Window layout
- ? Dock panels (табы)
- ? Charts (базовые)
- ? Simulation manager
- ? Physics (базовая)

---

### ? PHASE 0.5: Новые UI компоненты (ЗАВЕРШЕНО)
**Время:** 1 день
**Статус:** ? ГОТОВО

- ? AccordionWidget
- ? ParameterSlider
- ? Test application

---

### ? PHASE 1: Интеграция UI компонентов (ТЕКУЩАЯ)
**Время:** 2-3 дня
**Статус:** ? В РАБОТЕ

#### Задачи:
1. [ ] Создать GeometryPanelAccordion
   - Wheelbase (L)
   - Track width (B)
   - Lever arm (r)
   - Cylinder stroke (s_max)
   - Piston diameter (D_p)
   - Rod diameter (D_r)
   - Все с регулировкой диапазонов

2. [ ] Создать PneumoPanelAccordion
   - Head volume (V_h)
   - Rod volume (V_r)
   - Line pressures (A1, B1, A2, B2)
   - Tank pressure
   - Relief valve pressure
   - Все с регулировкой диапазонов

3. [ ] Создать SimulationPanelAccordion
   - Режим: Kinematics/Dynamics
   - Термо-режим: Isothermal/Adiabatic
   - Учет пружин (checkbox, только для кинематики)
   - Учет демпферов (checkbox, только для кинематики)
   - Проверка интерференции (checkbox)
   - Time step
   - Simulation speed

4. [ ] Создать RoadPanelAccordion
   - Режим: Manual / Road Profile
   - Для Manual:
     - Амплитуда (для каждого колеса)
     - Частота (для каждого колеса)
     - Фаза (для каждого колеса)
   - Для Road Profile:
     - Тип дороги (ComboBox)
     - Средняя скорость
     - Параметры типа дороги

5. [ ] Создать AdvancedPanelAccordion
   - Spring stiffness (k)
   - Damper coefficient (c)
   - Atmospheric temperature
   - Graphics settings (FPS, quality, etc.)

6. [ ] Заменить в MainWindow
   - Удалить dock widgets
   - Добавить left_accordion
   - Подключить сигналы

**Ожидаемый результат:** Левая панель полностью соответствует требованиям

---

### ? PHASE 2: ParameterManager (3-5 дней)
**Статус:** ? НЕ НАЧАТО

#### Задачи:
1. [ ] Создать ParameterManager class
2. [ ] Реализовать граф зависимостей
3. [ ] Автопересчет зависимых параметров:
   - Cylinder volumes от геометрии
   - Диагональ от wheelbase/track
   - Max stroke от lever geometry
   - И т.д.
4. [ ] Валидация взаимосвязей:
   - V_r < V_h
   - Relief pressure * 1.2 < max_pressure
   - Min < Current < Max
   - И т.д.
5. [ ] Интеграция в панели
6. [ ] Тестирование

**Ожидаемый результат:** Автоматический пересчет и валидация всех параметров

---

### ? PHASE 3: 3D Анимация - базовая (5-7 дней)
**Статус:** ? НЕ НАЧАТО

#### Задачи:
1. [ ] Исправить черную канву QML
   - Диагностика RHI/D3D11
   - Проверка освещения
   - Проверка камеры

2. [ ] Создать базовые 3D модели (QML):
   - Рама (Box)
   - Колеса (Sphere)
   - Рычаги (Cylinder)
   - Пневмоцилиндры (Cylinder)

3. [ ] Добавить материалы:
   - Металл (для рамы/рычагов)
   - Резина (для колес)
   - Прозрачное стекло (для цилиндров)

4. [ ] Настроить освещение:
   - DirectionalLight (солнце)
   - AmbientLight (заполняющий)

5. [ ] Добавить управление камерой:
   - Rotate (мышь)
   - Pan (Shift+мышь)
   - Zoom (колесико)

6. [ ] Масштабирование:
   - Все элементы в масштабе
   - Учет реальных размеров

**Ожидаемый результат:** Работающая 3D сцена с базовыми моделями

---

### ? PHASE 4: Визуализация давлений (5-7 дней)
**Статус:** ? НЕ НАЧАТО

#### Задачи:
1. [ ] Интегрировать PressureScaleWidget справа
   - Градиентная шкала
   - Элементы ввода min/max
   - Отметка атмосферного давления
   - Отметки давлений срабатывания клапанов
   - Валидация диапазонов

2. [ ] Создать 3D ресивер (QML):
   - Прозрачный цилиндр (изометрия)
   - Градиентная заливка по давлению
   - Клапаны по высоте
   - Минибары передавливания
   - 4 сферы внутри (давления линий)

3. [ ] Интеграция TankOverlayHUD

4. [ ] Подключить к реальным данным симуляции

**Ожидаемый результат:** Полная визуализация давлений

---

### ? PHASE 5: Трубопроводы и анимация потока (7-10 дней)
**Статус:** ? НЕ НАЧАТО

#### Задачи:
1. [ ] Трассировка трубопроводов:
   - Bezier curves для гладких путей
   - Алгоритм обхода препятствий
   - Минимизация пересечений

2. [ ] Анимированные стрелки потока:
   - Particle system
   - Скорость стрелок ~ скорость потока
   - Плотность стрелок ~ расход
   - Цвет стрелок ~ давление

3. [ ] Значки клапанов на трубопроводах:
   - Индикация срабатывания (цвет)
   - Расположение на трубопроводах

4. [ ] Кран отключения:
   - Значок с индикацией (цвет)

**Ожидаемый результат:** Полная анимация пневмосистемы

---

### ? PHASE 6: Продвинутая 3D анимация (7-10 дней)
**Статус:** ? НЕ НАЧАТО

#### Задачи:
1. [ ] Реалистичные модели:
   - Детализированные meshes
   - Текстуры
   - Normal maps

2. [ ] Продвинутые материалы:
   - PBR materials
   - Reflections
   - Roughness maps

3. [ ] Освещение:
   - Shadows
   - SSAO (Screen Space Ambient Occlusion)
   - Bloom

4. [ ] Постобработка:
   - Anti-aliasing
   - Tone mapping
   - Color grading

5. [ ] Анимация:
   - Smooth interpolation
   - Physics-based movement
   - Camera tracking

**Ожидаемый результат:** Фотореалистичная анимация

---

### ? PHASE 7: Профили дороги (3-5 дней)
**Статус:** ? НЕ НАЧАТО

#### Задачи:
1. [ ] Типы дороги:
   - Пересеченная местность
   - Трасса
   - Горный серпантин
   - Город

2. [ ] Параметры для каждого типа:
   - Рельеф
   - Повороты
   - Остановки/старты

3. [ ] Генератор профилей:
   - Алгоритмы для каждого типа
   - Учет средней скорости
   - Случайные вариации

4. [ ] Интеграция в RoadEngine

**Ожидаемый результат:** Реалистичные профили дороги

---

### ? PHASE 8: Настройки графики (2-3 дня)
**Статус:** ? НЕ НАЧАТО

#### Задачи:
1. [ ] Панель настроек графики/анимации:
   - FPS target
   - Anti-aliasing quality
   - Shadow quality
   - Particle count
   - Model detail level

2. [ ] Панель настроек графиков:
   - Выбор отображаемых параметров (checkboxes)
   - Цвета линий
   - Толщина линий
   - Автомасштабирование

3. [ ] Сохранение/загрузка настроек

**Ожидаемый результат:** Полная настраиваемость UI

---

### ? PHASE 9: Полировка и оптимизация (5-7 дней)
**Статус:** ? НЕ НАЧАТО

#### Задачи:
1. [ ] Производительность:
   - Profiling 3D rendering
   - Оптимизация particle systems
   - Culling невидимых объектов

2. [ ] UX улучшения:
   - Tooltips для всех параметров
   - Help panel
   - Keyboard shortcuts

3. [ ] Bug fixing:
   - Тестирование всех комбинаций режимов
   - Граничные случаи
   - Edge cases валидации

4. [ ] Документация:
   - User manual
   - Developer docs
   - API reference

**Ожидаемый результат:** Production-ready приложение

---

## ?? СВОДНАЯ ТАБЛИЦА ФАЗ

| Фаза | Время | Зависимости | Приоритет | Статус |
|------|-------|-------------|-----------|--------|
| **0. Базовая функциональность** | 2 недели | - | ? CRITICAL | ? ГОТОВО |
| **0.5. Новые UI компоненты** | 1 день | Phase 0 | ? CRITICAL | ? ГОТОВО |
| **1. Интеграция UI** | 2-3 дня | Phase 0.5 | ?? CRITICAL | ? ТЕКУЩАЯ |
| **2. ParameterManager** | 3-5 дней | Phase 1 | ?? CRITICAL | ? В ОЖИДАНИИ |
| **3. 3D Анимация базовая** | 5-7 дней | Phase 0 | ?? CRITICAL | ? В ОЖИДАНИИ |
| **4. Визуализация давлений** | 5-7 дней | Phase 3 | ?? HIGH | ? В ОЖИДАНИИ |
| **5. Трубопроводы/анимация** | 7-10 дней | Phase 3,4 | ?? HIGH | ? В ОЖИДАНИИ |
| **6. Продвинутая 3D** | 7-10 дней | Phase 3,5 | ?? MEDIUM | ? В ОЖИДАНИИ |
| **7. Профили дороги** | 3-5 дней | Phase 0 | ?? MEDIUM | ? В ОЖИДАНИИ |
| **8. Настройки графики** | 2-3 дня | Phase 3,6 | ?? LOW | ? В ОЖИДАНИИ |
| **9. Полировка** | 5-7 дней | All | ?? LOW | ? В ОЖИДАНИИ |

---

## ?? КРИТИЧЕСКИЙ ПУТЬ

```
Phase 1 (2-3d) ? Phase 2 (3-5d) ? Phase 3 (5-7d) ? Phase 4 (5-7d) ? Phase 5 (7-10d)
   ?                                    ?              ?               ?
45%                                   55%            65%             80%            95%

Параллельно:
  Phase 7 (3-5d) - можно делать параллельно с Phase 3-4
  Phase 6 (7-10d) - после Phase 3
  Phase 8 (2-3d) - после Phase 6
  Phase 9 (5-7d) - в конце
```

---

## ?? КАЛЕНДАРНЫЙ ПЛАН

### Неделя 1 (3-9 января)
- ? Phase 0.5: Новые UI компоненты ? **ГОТОВО**
- ? Phase 1: Интеграция UI (начало)

### Неделя 2 (10-16 января)
- ? Phase 1: Интеграция UI (завершение)
- ? Phase 2: ParameterManager (начало)

### Неделя 3 (17-23 января)
- ? Phase 2: ParameterManager (завершение)
- ? Phase 3: 3D Анимация базовая (начало)

### Неделя 4 (24-30 января)
- ? Phase 3: 3D Анимация базовая (завершение)
- ? Phase 7: Профили дороги (параллельно)

### Неделя 5 (31 янв - 6 фев)
- ? Phase 4: Визуализация давлений
- ? Phase 7: Профили дороги (завершение)

### Неделя 6 (7-13 февраля)
- ? Phase 5: Трубопроводы/анимация (начало)

### Неделя 7 (14-20 февраля)
- ? Phase 5: Трубопроводы/анимация (завершение)
- ? Phase 6: Продвинутая 3D (начало)

### Неделя 8 (21-27 февраля)
- ? Phase 6: Продвинутая 3D (завершение)
- ? Phase 8: Настройки графики

### Неделя 9 (28 фев - 6 марта)
- ? Phase 9: Полировка

**Ожидаемое завершение:** ~6 марта 2025

---

## ?? ПРОГРЕСС ПО ТРЕБОВАНИЯМ

### Текущее состояние (45%):
- ? Базовая архитектура: 100%
- ? Новые UI компоненты: 100%
- ? Левая панель (аккордеон): 0% ? **будет 100%**
- ? Регуляторы параметров: 0% ? **будет 100%**
- ? Автопересчет: 0% ? **будет 100%**
- ? 3D Анимация: 0% ? **будет 90%+**
- ? Визуализация давлений: 20% ? **будет 95%+**
- ? Трубопроводы/анимация: 0% ? **будет 90%+**
- ? Профили дороги: 10% ? **будет 90%+**
- ? Настройки графики: 30% ? **будет 95%+**

### После завершения (~95%):
- ? Все критические требования
- ? Большинство продвинутых требований
- ?? Некоторые "nice-to-have" могут быть упрощены

---

## ? НЕМЕДЛЕННЫЕ ДЕЙСТВИЯ (СЕГОДНЯ)

1. **Создать GeometryPanelAccordion** (1-2 часа)
2. **Создать PneumoPanelAccordion** (1-2 часа)
3. **Начать интеграцию в MainWindow** (1 час)

**Цель на сегодня:** Первая рабочая версия с accordion

---

**Дата:** 3 января 2025, 13:15 UTC
**Текущая готовность:** **45%**
**Цель:** **95%+**
**ETA:** **~6 марта 2025** (9 недель)

?? **ROADMAP ГОТОВ - НАЧИНАЕМ PHASE 1!** ??
