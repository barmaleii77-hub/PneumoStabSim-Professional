# Трассировка исполнения и тестирование (2025-10-21)

## Подготовка окружения
- Установлены системные зависимости `libgl1`, `libegl1` и дополнительные библиотеки XCB для запуска PySide6.
- Выполнена установка Python-зависимостей из `requirements.txt` и `requirements-dev.txt`.

## Реализованные обновления
1. **Схема окружения QML**
 - Добавлена строгая схема `src/ui/environment_schema.py` для всех параметров окружения Qt6.10.
 - Реализована валидация, приведение типов и проверка взаимных ограничений (`fog_near` < `fog_far`).
2. **Термодинамика пневмосистемы**
 - Переписан модуль `src/pneumo/gas_state.py`: добавлены классы `LineGasState`, `TankGasState`, функции `iso_update`, `adiabatic_update`, `create_*` и `apply_instant_volume_change`.
 - Обеспечена совместимость с тестами на идеальный газ и режимы ресивера.
3. **Конфигурация по умолчанию**
 - Создан `src/app/config_defaults.py` с фабриками для системной конфигурации, газовой сети и параметров симуляции.

## Тестирование
- `QT_QPA_PLATFORM=offscreen pytest -q` *(фейл: отсутствует метод `RangeSlider.step`, не реализованы `GeometryPanel.get_parameters`, отсутствует `QSignalSpy` в PySide6)*.
- `ruff check src` *(фейл:441 существующих стилевых/импортных проблем в UI-панелях и виджетах).*
