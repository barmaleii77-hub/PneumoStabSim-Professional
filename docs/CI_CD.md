# –°—Ç—Ä–∞—Ç–µ–≥–∏—è CI/CD PneumoStabSim Professional

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª–∏–Ω—Ç–µ—Ä—ã, —Ç–∏–ø–∏–∑–∞—Ü–∏—é, —Ç–µ—Å—Ç—ã Python/QML –∏ —Å–±–æ—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –µ–¥–∏–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä GitHub Actions. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É (Windows, macOS, Linux) –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ (`pre-commit`, –∑–∞–¥–∞—á–∏ VS/VS Code).

## –û–±–∑–æ—Ä workflow `ci.yml`

| –î–∂–æ–± | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
| --- | --- | --- |
| `lint` | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –≤—ã–ø–æ–ª–Ω—è–µ—Ç `ruff check`, `ruff format --check`, `mypy` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–æ–≥–∏. | Python3.13, Ruff, mypy |
| `tests` | –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –º–∞—Ç—Ä–∏—Ü–µ –û–° (Ubuntu, Windows, macOS). –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Qt6.6, –ø—Ä–æ–≥–æ–Ω—è–µ—Ç `pytest -m "not gui"`, QML/GUI —Ç–µ—Å—Ç—ã, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ –∏ –≤—ã–≥—Ä—É–∂–∞–µ—Ç –æ—Ç—á—ë—Ç—ã. | pytest, pytest-qt, PySide6, coverage |
| `summarize` | –°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –µ–¥–∏–Ω—ã–π –∞—Ä—Ö–∏–≤ `ci-bundle`. | actions/download-artifact |

### –ë–ª–æ–∫-—Å—Ö–µ–º–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞

```mermaid
flowchart TD
 A[Push / Pull Request / Dispatch] --> B[Lint job\nRuff + mypy]
 B --> C{–ú–∞—Ç—Ä–∏—Ü–∞ –û–°}
 C -->|Ubuntu| D1[Tests job\npytest non-GUI + GUI]
 C -->|Windows| D2[Tests job\npytest non-GUI + GUI]
 C -->|macOS| D3[Tests job\npytest non-GUI + GUI]
 D1 --> E[Coverage combine]
 D2 --> E
 D3 --> E
 E --> F[–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ç–µ—Å—Ç–æ–≤]
 B --> G[–õ–æ–≥–∏ –ª–∏–Ω—Ç–µ—Ä–æ–≤]
 F --> H[Summarize job]
 G --> H
 H --> I[–ê—Ä—Ö–∏–≤ ci-bundle]
```

### –¢—Ä–∏–≥–≥–µ—Ä—ã
- `push` –∏ `pull_request` –¥–ª—è –≤–µ—Ç–æ–∫ `master`, `develop`.
- `workflow_dispatch` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.

## –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- **Pip**: `actions/setup-python@v5` —Å `cache: 'pip'` + fallback-–∫–µ—à –¥–ª—è `~/.cache/pip` –Ω–∞ Linux.
- **Qt**: `jurplel/install-qt-action@v4` —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –∫–µ—à–µ–º –º–æ–¥—É–ª–µ–π (`qtbase`, `qtdeclarative`, `qtquick3d`).
- **–¢–µ—Å—Ç–æ–≤—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: –ª–æ–≥ pytest, JUnit XML, coverage XML/HTML —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `artifacts/test` –∏ –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–∞–∫ `test-results-${{ matrix.os }}`.
- **–õ–æ–≥–∏ –ª–∏–Ω—Ç–µ—Ä–æ–≤**: —à–∞–≥ `lint` —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ—Ç—á—ë—Ç—ã –≤ `artifacts/lint` –∏ –≤—Å–µ–≥–¥–∞ –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö.
- **–§–∏–Ω–∞–ª—å–Ω—ã–π –∞—Ä—Ö–∏–≤**: job `summarize` –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–≤–æ–¥–Ω—ã–π `ci-bundle`.

## –ü–∞—Ä–∏—Ç–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `pre-commit` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Ruff (lint + —Ñ–æ—Ä–º–∞—Ç), mypy –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä—É—á–Ω—ã–µ —Ö—É–∫–∏ `pytest-core` –∏ `pytest-gui`, –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã CI.
- `.vscode/tasks.json` –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á–∏ `üõ†Ô∏è CI: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è`, `üîç Ruff lint (CI)`, `üé® Ruff format --check`, `üìä Pytest (core, coverage)`, `üß≠ Pytest (QML/GUI)`.
- `.vs/launch.vs.json` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞ –¥–ª—è Ruff, mypy –∏ –æ–±–æ–∏—Ö pytest-–ø—Ä–æ–≥–æ–Ω–æ–≤.
- `PneumoStabSim.code-workspace` –≤–∫–ª—é—á–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pytest (`-m "not gui"`) –∏ –∞–≤—Ç–æ-–∑–∞–ø—É—Å–∫ Ruff –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏.

## SLA –ø–æ –∫—Ä–∞—Å–Ω—ã–º —Å–±–æ—Ä–∫–∞–º
| –°—Ü–µ–Ω–∞—Ä–∏–π | –î–µ–π—Å—Ç–≤–∏–µ | –í–ª–∞–¥–µ–ª–µ—Ü | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è |
| --- | --- | --- | --- |
| –õ—é–±–∞—è —Å–±–æ—Ä–∫–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ `failure` | –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ | –ê–≤—Ç–æ—Ä –∫–æ–º–º–∏—Ç–∞ / –¥–µ–∂—É—Ä–Ω—ã–π | ‚â§2 —á–∞—Å–∞ —Å –º–æ–º–µ–Ω—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–π –¥–µ—Ñ–µ–∫—Ç CI (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞) | –ì–æ—Ä—è—á–∏–π —Ñ–∏–∫—Å –∏–ª–∏ –æ—Ç–∫–∞—Ç | –î–µ–∂—É—Ä–Ω—ã–π –ø–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ | ‚â§4 —á–∞—Å–∞ |
| –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–µ—Ñ–µ–∫—Ç –≤ –∫–æ–¥–µ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –ø—É—à –≤ –≤–µ—Ç–∫—É, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ–≥–æ–Ω CI | –ê–≤—Ç–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏—è | ‚â§24 —á–∞—Å–∞ |

–ï—Å–ª–∏ SLA –Ω–∞—Ä—É—à–∞–µ—Ç—Å—è, —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç –≤ —Ç—Ä–µ–∫–µ—Ä–µ –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞ –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–π —Å–∏–Ω–∫.

## –ó–∞—â–∏—Ç–∞ –≤–µ—Ç–æ–∫
–ß—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏, –≤ GitHub –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –≤–µ—Ç–∫–∏ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å-—á–µ–∫–∞–º–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- –í–∫–ª—é—á–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –≤–µ—Ç–æ–∫ `master` –∏ `develop`.
- –ú–∏–Ω–∏–º—É–º –æ–¥–∏–Ω –æ–¥–æ–±—Ä—è—é—â–∏–π —Ä–µ–≤—å—é –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø–µ—Ä–µ–¥ —Å–ª–∏—è–Ω–∏–µ–º.
- –í–µ—Ç–∫—É –Ω–µ–ª—å–∑—è —Å–º–µ—Ä–∂–∏—Ç—å, –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–π–¥—É—Ç –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å-—á–µ–∫–∏ (`make verify` –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ GitHub Actions).
- –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ç–∫–∏ –ø–µ—Ä–µ–¥ —Å–ª–∏—è–Ω–∏–µ–º, –µ—Å–ª–∏ –≤ —Ü–µ–ª–µ–≤—É—é –≤–µ—Ç–∫—É –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∫–æ–º–º–∏—Ç—ã.
- –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å-—á–µ–∫–∏
- **CI: make verify** ‚Äî –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –ª–∏–Ω—Ç–µ—Ä—ã –∏ —Ç–µ—Å—Ç—ã (flake8, black, mypy, pytest).
- **Codecov** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏).
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã, –Ω–æ –∏—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Å–ª–∏—è–Ω–∏—è.

### –†–∞–±–æ—Ç–∞ —Å –∑–∞—â–∏—â—ë–Ω–Ω—ã–º–∏ –≤–µ—Ç–∫–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pull request'—ã –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `master` –∏ `develop`.
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –≤–µ—Ç–∫—É —Ñ–∏—á–∞-branch —Å —Ü–µ–ª–µ–≤–æ–π –≤–µ—Ç–∫–æ–π –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º —Ä–µ–≤—å—é, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏–∑-–∑–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∫–æ–º–º–∏—Ç–æ–≤.
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ GitHub –∏ –¥—É–±–ª–∏—Ä—É–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ PR.

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
- –ü–µ—Ä–µ–¥ –ø—É—à–µ–º –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `pre-commit run --all-files` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ `pre-commit run pytest-core --hook-stage manual`.
- –î–ª—è QML —Ç–µ—Å—Ç–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `QT_QPA_PLATFORM=offscreen`, `QT_QUICK_BACKEND=software` (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º CI).
- –ü–æ–∫—Ä—ã—Ç–∏–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `python -m coverage combine && python -m coverage html` (—Å–º. –∑–∞–¥–∞—á–∏ VS/VS Code).

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **2025-10-22** ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `ci.yml`, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≤–≤–µ–¥–µ–Ω–∏–µ SLA –¥–ª—è –∫—Ä–∞—Å–Ω—ã—Ö —Å–±–æ—Ä–æ–∫.
