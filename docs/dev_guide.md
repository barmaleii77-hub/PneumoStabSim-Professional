# Руководство разработчика

Стандарты
- Python: PEP8, type hints везде
- QML: camelCase свойства, комментарии на русском
- Коммиты: заголовок на английском, описание на русском

Паттерны
- Не нормализуйте углы вручную (SLERP)
- Прямые вызовы QML для критичных категорий
- Батч-обновления — для производительности

## Логирование

- Используйте `structlog` конфигурацию из `src/diagnostics/logging.py`.
- `event` — читаемый текст; доп. данные передавайте именованными параметрами,
  не сериализуйте словари в JSON вручную.
- Для расширенного контекста применяйте `logger.bind(...)` или
  `contextvars`; не добавляйте произвольные `**kwargs` в вызовы Qt-слотов
  (`set_receiver_volume(volume=...)`), чтобы избежать `TypeError`.
- Все новые события должны содержать `module`, `correlation_id` (при наличии) и
  быть описаны в `docs/TRACING_EXECUTION_LOG.md`.

Тестирование
- Unit-тесты для Python логики
- Интеграционные тесты для Python↔QML вызовов
- Визуальные проверки материала и освещения

## Кинематика

- Класс `LeverGeom` обязан предоставлять методы:
  - `angle_to_displacement(angle_deg: float) -> float`
  - `displacement_to_angle(linear_mm: float) -> float`
- Оба метода должны быть взаимно обратимыми в рабочем диапазоне и использовать
  параметры из `config/app_settings.json`.
- Добавляйте unit-тесты в `tests/unit/kinematics/test_lever_geom.py`, покрывающие
  прямой и обратный расчёт, а также пограничные случаи (0°, maxAngle).
