# Обязательные инструкции по тестированию

Этот документ фиксирует обязательные шаги для всех агентов, работающих над проектом.
Следуйте им перед каждым коммитом и перед запуском CI.

## Единая точка входа

- Используйте `python scripts/testing_entrypoint.py` как основной способ подготовки
  окружения и запуска тестов.
- Скрипт автоматически:
  - определяет операционную систему и выводит её в лог;
  - синхронизирует зависимости через `uv sync --frozen --extra dev`;
  - запускает `make check` (или `uv run --locked -- python -m tools.ci_tasks verify`,
    если `make` недоступен), чтобы выполнить линтеры, mypy, pytest и QML проверки.
- Логи сохраняются в `reports/tests/test_entrypoint.log`. Приложите их к отчётам,
  если требуется подтверждение прохождения пайплайна.

### Кроссплатформенные команды

- **Linux/macOS**: `python scripts/testing_entrypoint.py` или напрямую `make check`.
- **Windows**: `py -3 scripts/testing_entrypoint.py` или `./make.bat check`, когда GNU Make недоступен.
- Свежие логи доступны в `reports/tests/test_entrypoint.log`, а автоисправление окружения
  записывается в `logs/env_check.json`.

## Порядок действий для агентов

1. Убедитесь, что `uv` установлен. При отсутствии установите его командой
   `python scripts/bootstrap_uv.py`.
2. Запустите `python scripts/testing_entrypoint.py` из корня репозитория. Он сам
   настроит среду и выполнит полный набор проверок.
3. Исправьте любые ошибки, пока пайплайн не завершится успешно.
4. Только после «зелёного» статуса тестов переходите к коммиту и генерации PR.

## Примечания

- Не пропускайте тесты и не отключайте проверки качества без явного разрешения
  руководителя проекта.
- При изменении зависимостей обязательно фиксируйте результат в логах
  `reports/tests/test_entrypoint.log` и сохраняйте их вместе с артефактами CI.
