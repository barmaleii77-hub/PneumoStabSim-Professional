# Вертикальный ресайзбар (сплиттер) - Реализация

## 📋 Описание изменений

Добавлена система сплиттеров для гибкого изменения размеров компонентов интерфейса.

### 🔧 Новая структура layout

```
┌─────────────────────────────────────────────────┐
│ MainWindow                                      │
├─────────────────────────────────┬───────────────┤
│ Главный горизонтальный сплиттер │               │
│ (main_horizontal_splitter)      │   Панели      │
│                                 │  управления   │
│ ┌─────────────────────────────┐ │               │
│ │ Вертикальный сплиттер       │ │ ┌───────────┐ │
│ │ (main_splitter)             │ │ │Геометрия  │ │
│ │                             │ │ ├───────────┤ │
│ │ ┌─────────────────────────┐ │ │ │Пневматика │ │
│ │ │     3D Сцена            │ │ │ ├───────────┤ │
│ │ │   (QQuickWidget)        │ │ │ │ Режимы    │ │
│ │ │                         │ │ │ ├───────────┤ │
│ │ └─────────────────────────┘ │ │ │Визуализ.  │ │
│ │ ──────── ресайзбар ──────── │ │ ├───────────┤ │
│ │ ┌─────────────────────────┐ │ │ │ Динамика  │ │
│ │ │      Графики            │ │ │ └───────────┘ │
│ │ │   (ChartWidget)         │ │ │               │
│ │ └─────────────────────────┘ │ │               │
│ └─────────────────────────────┘ │               │
└─────────────────────────────────┴───────────────┘
```

## ✨ Ключевые возможности

### 1. **Двойная система сплиттеров**
- **Горизонтальный сплиттер**: разделяет сцену+графики (75%) и панели (25%)
- **Вертикальный сплиттер**: разделяет 3D сцену (60%) и графики (40%)

### 2. **Интерактивное изменение размеров**
- Пользователь может перетаскивать разделители мышью
- Пропорции автоматически сохраняются в настройках
- Восстанавливаются при следующем запуске

### 3. **Адаптивные ограничения**
- Панели управления: минимум 300px, максимум 600px
- Графики: минимум 200px высоты
- 3D сцена: получает оставшееся место

## 🔧 Технические детали

### Новые компоненты в MainWindow:

```python
# Горизонтальный сплиттер (основной)
self.main_horizontal_splitter: QSplitter = None

# Вертикальный сплиттер (сцена + графики)
self.main_splitter: QSplitter = None

# Настройки для сохранения позиций
SETTINGS_HORIZONTAL_SPLITTER = "MainWindow/HorizontalSplitter"
SETTINGS_SPLITTER = "MainWindow/Splitter"
```

### Методы управления:

1. **`_setup_central()`** - создание системы сплиттеров
2. **`_restore_settings()`** - восстановление позиций при запуске
3. **`_save_settings()`** - сохранение позиций при закрытии
4. **`_reset_ui_layout()`** - сброс к значениям по умолчанию
5. **`closeEvent()`** - автоматическое сохранение при выходе

## 🎯 Пользовательский опыт

### Что может пользователь:

1. **Регулировка ширины панелей**
   - Перетаскивание вертикальной линии между сценой и панелями
   - Панели можно сжать до 300px или растянуть до 600px

2. **Регулировка высоты графиков**
   - Перетаскивание горизонтальной линии между сценой и графиками
   - Графики можно сжать до 200px или увеличить за счет 3D сцены

3. **Сохранение предпочтений**
   - Позиции автоматически сохраняются при закрытии
   - Восстанавливаются при следующем запуске

4. **Сброс к умолчаниям**
   - Меню "Параметры" → "Сбросить раскладку UI"
   - Возвращает пропорции 75/25 и 60/40

## 📊 Преимущества

### Для пользователя:
- ✅ Гибкая настройка рабочего пространства
- ✅ Адаптация под размер экрана
- ✅ Сохранение персональных предпочтений
- ✅ Простое управление мышью

### Для разработчика:
- ✅ Qt QSplitter обеспечивает стандартное поведение
- ✅ Автоматическое управление layout
- ✅ Интеграция с QSettings
- ✅ Обратная совместимость

## 🚀 Статус реализации

- ✅ Горизонтальный сплиттер добавлен
- ✅ Вертикальный сплиттер обновлен
- ✅ Сохранение/восстановление настроек
- ✅ Сброс к значениям по умолчанию
- ✅ Обработка закрытия приложения
- ✅ Управление симуляцией из toolbar

## 🔄 Следующие шаги

1. Тестирование в различных разрешениях экрана
2. Добавление горячих клавиш для сброса layout
3. Возможность скрытия/показа отдельных панелей
4. Минимизация панелей в боковую панель

---

**Реализовано:** 2025-01-06
**Статус:** ✅ Готово к тестированию
