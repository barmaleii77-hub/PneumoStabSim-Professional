# Decisions Log

Keep this log current for all architectural, infrastructure, and delivery process decisions. Each entry should be appended chronologically with the newest items at the top.

| Date (YYYY-MM-DD) | Stakeholders | Context / Problem | Decision | Alternatives Considered | Follow-up Actions |
|-------------------|--------------|-------------------|----------|-------------------------|-------------------|
| 2026-06-08 | Architecture WG, Documentation Guild | Ссылки в DI-контейнере, QML bridge и QML host указывали на устаревшие номера разделов мастер-плана, из-за чего трассировка чеклистов Phase 2/3 становилась неочевидной. | Обновлены комментарии в `src/infrastructure/container.py`, `src/ui/qml_bridge.py` и `src/ui/qml_host.py`, ссылающиеся на актуальные разделы мастер-плана (Section 5, items 2–3) и Phase 2/3 milestones. | Оставить существующие ссылки и полагаться на внешние обзоры документации. | При изменении структуры планов проверять совпадение разделов и обновлять комментарии в архитектурных модулях. |
| 2026-06-07 | Architecture WG, Documentation Guild | Локальные архитектурные модули (DI-контейнер, SettingsService, QML host/bridge) не ссылались на актуальные разделы мастер-плана и phase playbooks, из-за чего терялась трассировка чеклистов при ревью. | Добавлены прямые комментарии-ссылки на разделы "Service Composition" и "Signal/Slot Registry" в `docs/RENOVATION_MASTER_PLAN.md`, а также на фазы 2 и 3 для схемной валидации и QML bridge payloads. | Оставить ссылки только в внешней документации; полагаться на устные напоминания в ревью. | При обновлении планов сверять секции и, при необходимости, корректировать комментарии в модулях `src/infrastructure/container.py`, `src/core/settings_service.py`, `src/ui/qml_host.py`. |
| 2025-11-09 | Graphics WG, QA Chapter, Documentation Guild | Итоговые визуальные правки панели графики были отражены только в разрозненных отчётах, из-за чего QA не связывал параметры `GraphicsPanel` с актуальными тестами и диагностикой. | Синхронизированы `docs/graphics.md` с `GRAPHICSPANEL_VISUAL_REPORT.txt` и тестовым пакетом: описаны новые контролы (рендер-скейл, TAA/TAA Motion Adaptive, очереди bridge), добавлены ссылки на визуальные отчёты и pytest-покрытие. | Ограничиться ссылкой на отчёт `GRAPHICSPANEL_VISUAL_REPORT.txt`; перенести обновление после стабилизации release-ветки. | Обновить `docs/RENOVATION_PHASE_3_UI_AND_GRAPHICS_PLAN.md` с отметкой о завершённой синхронизации; на следующей сессии Graphics WG проверить, что новые параметры попали в чек-лист ручного тестирования. |
| 2025-11-08 | Simulation WG, Documentation Guild | После рефакторинга пневмоконтуров README и руководства не фиксировали гарантий обновлений и headless-рецептов, что вызывало вопросы у команд Metal/D3D11. | Обновлены `README.md`, `docs/CI.md`, `docs/TROUBLESHOOTING.md` с секциями про `--legacy`, `--safe`, `QT_QPA_PLATFORM=offscreen` и описанием атомарного обновления пневмосистемы. | Оставить устные инструкции в Confluence; перенести описание только в release notes. | Мониторить тикеты о headless-сбоях; при необходимости расширить документацию примерами логов `GasNetwork`. |
| 2025-11-07 | Simulation WG, Platform DevOps | Пневмоконтур обновлялся с неполной проверкой инвариантов, что приводило к расхождениям между UI и интегратором на headless-прогонах. | Завершён рефакторинг пневмосистемы: `PneumaticSystem` валидирует диагональные связи, `_update_pneumatics_from_state` применяет атомарные обновления газовой сети, smoke-тесты выполняются через `--safe` + `QT_QPA_PLATFORM=offscreen`. | Сохранить прежний пайплайн с ленивыми проверками; отложить headless-обновления до следующей релизной ветки. | Протянуть проверку логов `GasNetwork` в `make check`; синхронизировать документацию (`README.md`, `docs/CI.md`, `docs/TROUBLESHOOTING.md`). |
| 2025-07-15 | Engineering manager, architecture lead, product manager | Governance cadence lacked a canonical reference, leading to inconsistent attendance and missing notes. | Published `docs/operations/governance.md` defining meeting schedule, roles, agendas, and escalation paths; seeded `docs/operations/risk_register.md` with high-priority risks. | Maintain ad-hoc calendar invites per team; rely on verbal updates without written artefacts. | Review adoption during the next sprint readiness check; ensure facilitators attach notes to `reports/governance/`. |
| 2025-07-02 | Architecture WG, Core Platform | Module-level singletons (`get_settings_service`) complicated testing and prevented deterministic wiring between CLI tools and the Qt bootstrap. | Adopted a process-wide `ServiceContainer` (`src/infrastructure/container.py`) with typed tokens and override support; registered the default `SettingsService` factory during import. | Continue using module-level globals with monkeypatching in tests; adopt a third-party DI framework with heavier runtime requirements. | Wire logging, event bus, and simulation services into the container; update architecture diagrams to include token ownership. |
| 2025-02-15        | Tech Leads, DevOps, QA | Align coordination cadence with readiness tracking for cross-team blocks. | Introduced weekly readiness syncs with block scoring, GitHub Projects board with epics per readiness stream, and mandated decision log upkeep. | Maintain ad-hoc updates without structured sync; monthly steering only. | Pilot the new sync starting Sprint 18, audit board usage after two iterations. |

> **How to update:** copy the template row, adjust the fields, and ensure follow-ups are reflected in upcoming sync agendas.
