# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ IBL —Ñ–ª–∞–≥–æ–≤ (v4.9.5)

**–î–∞—Ç–∞:** 2025
**–í–µ—Ä—Å–∏—è:** main.qml v4.9.5
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

### –°–∏–º–ø—Ç–æ–º—ã:
- ‚ùå –ß–µ–∫–±–æ–∫—Å "Skybox / HDR" –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ "–í–∫–ª—é—á–∏—Ç—å HDR IBL"
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å IBL –¥–ª—è –æ—Å–≤–µ—â–µ–Ω–∏—è –∏ —Ñ–æ–Ω–∞
- ‚ùå –§–ª–∞–≥–∏ `iblLightingEnabled` –∏ `iblBackgroundEnabled` **–Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ**

### –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ:
1. –û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å Graphics Settings ‚Üí Environment
2. –í–∫–ª—é—á–∏—Ç—å "–í–∫–ª—é—á–∏—Ç—å HDR IBL" ‚úÖ
3. –í—ã–∫–ª—é—á–∏—Ç—å "Skybox / HDR" ‚ùå
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Skybox –æ—Å—Ç–∞—ë—Ç—Å—è –≤–∫–ª—é—á—ë–Ω–Ω—ã–º (—Ñ–ª–∞–≥ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã

### –ù–∞–π–¥–µ–Ω–æ **–î–í–ê –º–µ—Å—Ç–∞** —Å –±–∞–≥–æ–º:

#### –ú–µ—Å—Ç–æ #1: –ù–∞—á–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å—Ç—Ä–æ–∫–∞ ~248)

**–ö–æ–¥ –î–û:**
```qml
property bool iblLightingEnabled: startIblEnabled  // ‚ùå –ö–û–ü–ò–†–£–ï–¢ MASTER!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ **–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** QML –∫–æ–ø–∏—Ä—É–µ—Ç `startIblEnabled` –≤ `iblLightingEnabled`
- –î–∞–∂–µ –µ—Å–ª–∏ Python –ø–æ—Å—ã–ª–∞–µ—Ç **—Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ** —Ñ–ª–∞–≥–∏, –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É–∂–µ **—Å–≤—è–∑–∞–Ω–æ**!

#### –ú–µ—Å—Ç–æ #2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (—Å—Ç—Ä–æ–∫–∞ ~920-950)

**–ö–æ–¥ –î–û:**
```qml
if (params.ibl_enabled !== undefined) {
    iblEnabled = !!params.ibl_enabled
    iblLightingEnabled = iblEnabled  // ‚ùå –ü–ï–†–ï–ü–†–ò–°–í–ê–ò–í–ê–ù–ò–ï!
}

if (params.ibl) {
    if (ibl.enabled !== undefined) {
        iblEnabled = !!ibl.enabled
        iblLightingEnabled = iblEnabled  // ‚ùå –ò –ï–©–Å –†–ê–ó!
    }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ **master-—Ñ–ª–∞–≥–∞** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–ª—Å—è `iblLightingEnabled`
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ **–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å**

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ú–µ—Å—Ç–æ #1: –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

**–ö–æ–¥ –ü–û–°–õ–ï:**
```qml
// ‚úÖ CRITICAL FIX v4.9.5: –ù–ï–ó–ê–í–ò–°–ò–ú–û–ï –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!
property bool iblLightingEnabled: true   // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –í–ö–õ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç master)
property bool iblBackgroundEnabled: startSkyboxEnabled
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
1. ‚úÖ `iblLightingEnabled` **–ù–ï –∫–æ–ø–∏—Ä—É–µ—Ç** `startIblEnabled`
2. ‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ** –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `true`
3. ‚úÖ `iblBackgroundEnabled` –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –±–µ—Ä—ë—Ç—Å—è –∏–∑ `startSkyboxEnabled` (—ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

### –ú–µ—Å—Ç–æ #2: –£–¥–∞–ª–µ–Ω–æ –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ

**–ö–æ–¥ –ü–û–°–õ–ï:**
```qml
if (params.ibl_enabled !== undefined) {
    iblEnabled = !!params.ibl_enabled
    // ‚ùå –£–î–ê–õ–ï–ù–û: iblLightingEnabled = iblEnabled
}

if (params.ibl) {
    if (ibl.enabled !== undefined) {
        iblEnabled = !!ibl.enabled
        // ‚ùå –£–î–ê–õ–ï–ù–û: iblLightingEnabled = iblEnabled
    }

    // ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ù–ï–ó–ê–í–ò–°–ò–ú–û
    if (ibl.lighting_enabled !== undefined) iblLightingEnabled = !!ibl.lighting_enabled
    if (ibl.background_enabled !== undefined) iblBackgroundEnabled = !!ibl.background_enabled
}
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
‚Üí iblLightingEnabled = startIblEnabled  (–°–í–Ø–ó–ê–ù–´!)

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
‚Üí ibl_enabled = true
‚Üí iblLightingEnabled = true  (–ü–ï–†–ï–ü–†–ò–°–í–û–ï–ù–û –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
‚Üí ibl_background_enabled = false
‚Üí –ù–û lighting –æ—Å—Ç–∞—ë—Ç—Å—è true!
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–ª–∞–≥–∏ –≤—Å–µ–≥–¥–∞ **—Å–≤—è–∑–∞–Ω—ã**, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å.

---

### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
‚Üí iblLightingEnabled = true  (–ù–ï–ó–ê–í–ò–°–ò–ú–û!)
‚Üí iblBackgroundEnabled = startSkyboxEnabled  (–ù–ï–ó–ê–í–ò–°–ò–ú–û!)

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
‚Üí ibl_enabled = true  (master toggle)
‚Üí ibl_lighting_enabled = true ‚Üí iblLightingEnabled = true
‚Üí ibl_background_enabled = false ‚Üí iblBackgroundEnabled = false
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–ö–∞–∂–¥—ã–π —Ñ–ª–∞–≥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º!**

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –¢–µ—Å—Ç 1: –û—Å–≤–µ—â–µ–Ω–∏–µ –ë–ï–ó —Ñ–æ–Ω–∞

**–®–∞–≥–∏:**
1. –í–∫–ª—é—á–∏—Ç—å "–í–∫–ª—é—á–∏—Ç—å HDR IBL" ‚úÖ
2. –í–∫–ª—é—á–∏—Ç—å "IBL –¥–ª—è –æ—Å–≤–µ—â–µ–Ω–∏—è" ‚úÖ
3. –í—ã–∫–ª—é—á–∏—Ç—å "Skybox / HDR" ‚ùå

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ü–µ–Ω–∞ –æ—Å–≤–µ—â–µ–Ω–∞ IBL (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è)
- ‚úÖ –§–æ–Ω = –ø—Ä–æ—Å—Ç–æ–π —Ü–≤–µ—Ç (–ù–ï skybox)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ QML:**
```qml
iblEnabled: true
iblLightingEnabled: true   // ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º
iblBackgroundEnabled: false // ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º
```

---

### –¢–µ—Å—Ç 2: –§–æ–Ω –ë–ï–ó –æ—Å–≤–µ—â–µ–Ω–∏—è

**–®–∞–≥–∏:**
1. –í–∫–ª—é—á–∏—Ç—å "–í–∫–ª—é—á–∏—Ç—å HDR IBL" ‚úÖ
2. –í—ã–∫–ª—é—á–∏—Ç—å "IBL –¥–ª—è –æ—Å–≤–µ—â–µ–Ω–∏—è" ‚ùå
3. –í–∫–ª—é—á–∏—Ç—å "Skybox / HDR" ‚úÖ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –§–æ–Ω = HDR skybox
- ‚úÖ –û—Å–≤–µ—â–µ–Ω–∏–µ = –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ QML:**
```qml
iblEnabled: true
iblLightingEnabled: false  // ‚úÖ –í—ã–∫–ª—é—á–µ–Ω–æ
iblBackgroundEnabled: true  // ‚úÖ –í–∫–ª—é—á–µ–Ω–æ
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–û | –ü–û–°–õ–ï |
|----------|-----|-------|
| **–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** | –°–≤—è–∑–∞–Ω–æ | ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ |
| **Master IBL** | –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –í–°–Å | –¢–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å |
| **Lighting Enabled** | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç Master | ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º |
| **Background Enabled** | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç Master | ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º |
| **–†–∞–∑–¥–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** | ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

---

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –°—Ç—Ä–æ–∫–∏ |
|------|-----------|--------|
| `assets/qml/main.qml` | –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è | ~248 |
| `assets/qml/main.qml` | –£–¥–∞–ª–µ–Ω–æ –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ | ~920-950 |
| `docs/IBL_SEPARATION_FIX_v4.9.5.md` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | - |

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### –ü—Ä–æ–±–ª–µ–º–∞:
- ‚ùå IBL —Ñ–ª–∞–≥–∏ –±—ã–ª–∏ —Å–≤—è–∑–∞–Ω—ã **—Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞**
- ‚ùå **–î–≤–∞ –º–µ—Å—Ç–∞** —Å –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ–º

### –†–µ—à–µ–Ω–∏–µ:
- ‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
- ‚úÖ **–£–¥–∞–ª–µ–Ω–æ –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ**
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–≤–æ–±–æ–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ –ü–û–õ–ù–û–°–¢–¨–Æ —Ä–µ—à–µ–Ω–∞**
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞**
- ‚úÖ **–ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Qt Quick 3D**

---

**–í–µ—Ä—Å–∏—è:** v4.9.5
**–î–∞—Ç–∞:** 2025
**–ê–≤—Ç–æ—Ä:** GitHub Copilot
**–°—Ç–∞—Ç—É—Å:** üü¢ PRODUCTION READY
