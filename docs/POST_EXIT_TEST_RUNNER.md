# Post-Exit Test Runner

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ **–ü–û–°–õ–ï** –∑–∞–∫—Ä—ã—Ç–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è PneumoStabSim.

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

1. **–ß–∏—Å—Ç—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª** - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–º—É—Å–æ—Ä–∏–≤–∞–µ—Ç –≤—ã–≤–æ–¥ –ª–æ–≥–∞–º–∏
2. **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –≤—Å–µ —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞
4. **–û—Ç—á–µ—Ç—ã** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –≤ `test_report.md`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞
py app.py --run-tests
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã (–±–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
py run_tests_after_exit.py
```

### –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã

1. **–ê–≤—Ç–æ–ø–æ–∏—Å–∫ —Ç–µ—Å—Ç–æ–≤** - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã:
   - `test_*.py`
   - `*_test.py`
   - `analyze_*.py`
   - `diagnose_*.py`

2. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**:
   - `venv/`, `.venv/`
   - `__pycache__/`
   - `.git/`, `build/`, `dist/`
   - `.pytest_cache/`, `logs/`

3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**:
   - –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
   - –¢–∞–π–º–∞—É—Ç: 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ç–µ—Å—Ç
   - –ü–µ—Ä–µ—Ö–≤–∞—Ç stdout/stderr

4. **–û—Ç—á–µ—Ç**:
   - –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ —Å —ç–º–æ–¥–∑–∏
   - Markdown —Ñ–∞–π–ª `test_report.md`

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
============================================================
üß™ POST-EXIT TEST RUNNER
============================================================
üìä –ù–∞–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤: 5

============================================================
üß™ –ó–ê–ü–£–°–ö: test_graphics_sync
============================================================
‚úÖ –£–°–ü–ï–•: test_graphics_sync (2.34s)

============================================================
üß™ –ó–ê–ü–£–°–ö: analyze_logs
============================================================
‚úÖ –£–°–ü–ï–•: analyze_logs (1.12s)

...

============================================================
üìä –°–í–û–î–ö–ê –¢–ï–°–¢–û–í
============================================================
üìà –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 5
‚úÖ –£—Å–ø–µ—à–Ω–æ: 4
‚ùå –û—à–∏–±–æ–∫: 1

‚ùå –¢–ï–°–¢–´ –° –û–®–ò–ë–ö–ê–ú–ò:
  ‚Ä¢ diagnose_graphics_panel (–∫–æ–¥: 1)
    ‚îî‚îÄ ImportError: No module named 'some_module'

============================================================

üíæ –û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω: test_report.md
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á–µ—Ç–∞

`test_report.md` —Å–æ–¥–µ—Ä–∂–∏—Ç:

- –î–∞—Ç–∞/–≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –°–≤–æ–¥–∫–∞ (–≤—Å–µ–≥–æ/—É—Å–ø–µ—à–Ω–æ/–æ—à–∏–±–æ–∫)
- –î–µ—Ç–∞–ª–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–µ—Å—Ç—É:
  - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
  - –ö–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞
  - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - STDERR (–µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏)

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ workflow

### 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ —Ç–µ—Å—Ç–æ–≤)
py app.py

# –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Ctrl+C –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ X)
# –¢–µ—Å—Ç—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Å —Ç–µ—Å—Ç–∞–º–∏
py app.py --run-tests

# –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ —Ç–µ—Å—Ç—ã
```

### 3. CI/CD

```yaml
# GitHub Actions example
- name: Run app and tests
  run: |
    python app.py --test-mode --run-tests

- name: Upload test report
  uses: actions/upload-artifact@v3
  with:
    name: test-report
    path: test_report.md
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

–ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –Ω—É–∂–Ω—ã–º –∏–º–µ–Ω–µ–º:

```python
# test_my_feature.py
import sys

def main():
    print("üß™ Testing my feature...")
    # ... —Ç–µ—Å—Ç—ã ...
    return 0  # 0 = success, 1 = error

if __name__ == "__main__":
    sys.exit(main())
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–∞—É—Ç–∞

```python
runner = PostExitTestRunner()
result = runner.run_test_script(
    Path("long_test.py"),
    timeout=60  # 60 —Å–µ–∫—É–Ω–¥
)
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

```python
runner = PostExitTestRunner()
scripts = runner.discover_test_scripts()

# –¢–æ–ª—å–∫–æ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
graphics_tests = [s for s in scripts if 'graphics' in s.name]
runner.run_all_tests(graphics_tests)
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ß–∏—Å—Ç—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª** - –Ω–∏–∫–∞–∫–∏—Ö –ª–æ–≥–æ–≤ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è** - —Ç–µ—Å—Ç—ã –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
‚úÖ **–û—Ç—á–µ—Ç—ã** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (–¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `test_` –∏–ª–∏ `analyze_`)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –Ω–µ –≤ –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–∞–π–º–∞—É—Ç

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç –ª–∏ —Ç–µ—Å—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `PYTHONPATH` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`

## –°–º. —Ç–∞–∫–∂–µ

- `app.py` - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `test_graphics_sync.py` - –ø—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞
- `analyze_logs.py` - –ø—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤
- `.github/copilot-instructions.md` - —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ –∫–æ–¥–µ
