# UI Documentation

Этот раздел фиксирует ключевые панели пользовательского интерфейса, связанные с визуализацией,
и указывает исходные QML-компоненты, которые необходимо учитывать при обновлении UI.

## Шкала камеры и HUD состояния

- **Компонент**: `assets/qml/camera/CameraStateHud.qml`
- **Назначение**: отображает состояние камеры, шкалу сцены и ключевые метрики (расстояние, углы, панорамирование).
- **Особенности**:
  - Функции `metricsModel()` и `telemetryToMillimetres()` пересчитывают данные в единицы сцены и показывают шкалу (`sceneScaleFactor`).
  - Панель поддерживает переключаемые блоки (углы, панорамирование, авто-поворот) и выводит значения в моноширинном формате для диагностики.

## Индикаторы SceneBridge

- **Компонент**: `assets/qml/components/BridgeIndicatorsPanel.qml`
- **Назначение**: сводка состояния мостов `geometry` и `simulation`, используемая для контроля синхронизации Python↔QML.
- **Особенности**:
  - Экспортирует `geometryIndicatorItem`/`simulationIndicatorItem` с готовыми подсказками для тестов.
  - Выводит количество ключей, шаг симуляции и подсвечивает задержки (`Bridge недоступен`, `Ожидание шага`).

## Панель телеметрии

- **Компонент**: `assets/qml/components/TelemetryChartPanel.qml`
- **Назначение**: интерактивные графики QtCharts для мониторинга сигналов (временное окно, автопрокрутка, автомасштабирование).
- **Особенности**:
  - Управляет стримом через `telemetryBridge.setPaused()` и настраиваемый интервал обновлений.
  - Позволяет фиксировать диапазон оси Y вручную и включает скользящее окно времени.

## Трассировка сигналов и события SceneBridge

- **Компонент**: `assets/qml/components/SignalTracePanel.qml`
- **Назначение**: журнал сигналов (timestamp, отправитель, аргументы), используемый при отладке мостов и UI.
- **Особенности**:
  - Метод `appendTrace()` преобразует payload в ListModel, поддерживая автоочистку по лимиту записей.
  - Кнопка «Clear» очищает список и эмитит `clearRequested()` для синхронизации с Python.

## Визуализация клапанов пневмосистемы

- **Компоненты**: `assets/qml/PneumoStabSim/scene/FlowNetwork.qml`, `assets/qml/PneumoStabSim/scene/ValveIndicator.qml`
- **Назначение**: отображение состояний клапанов и направления потоков для учебных сценариев.
- **Особенности**:
  - Вспомогательные функции `_lineValveOpen`, `_reliefIntensity`, `_orientationForLine` подсвечивают активные линии и поток.
  - `ValveIndicator` масштабируется под сцену (`sceneScale`) и визуализирует интенсивность с помощью анимированных колонн.

## Как использовать документы в каталоге

- При изменении панели обновляйте соответствующий раздел и добавляйте ссылки на QML-файлы.
- Сводные отчёты и детальные гайды размещайте в поддиректории `docs/ui/` (например, `panel_modernization_report.md`).
