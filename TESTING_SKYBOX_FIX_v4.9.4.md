# Инструкция по тестированию Skybox Fix v4.9.4

## 🚀 Запуск

```bash
python app.py
```

## ✅ Проверка исправления

### Тест 1: Skybox не вращается с камерой

**Шаги:**
1. Запустить приложение
2. Зажать ЛКМ и вращать камеру вокруг сцены
3. Сделать полный оборот (0° → 360°)

**Ожидаемый результат:**
- ✅ Skybox (фон) остается НЕПОДВИЖНЫМ
- ✅ Модель вращается относительно фона
- ❌ НЕТ flip'ов или скачков на 180°
- ❌ Фон НЕ вращается вместе с камерой

### Тест 2: Skybox вращается только от IBL Rotation

**Шаги:**
1. Открыть панель "Graphics Settings" (справа)
2. Найти секцию "Environment"
3. Изменить слайдер "IBL Rotation" (0-360°)

**Ожидаемый результат:**
- ✅ Skybox плавно вращается на указанный угол
- ✅ Вращение независимо от положения камеры
- ✅ Никаких скачков или flip'ов

### Тест 3: Проверка критических углов

**Шаги:**
1. Повернуть камеру на 0°
2. Проверить skybox
3. Повернуть камеру на 90°
4. Проверить skybox
5. Повернуть камеру на 180°
6. Проверить skybox
7. Повернуть камеру на 270°
8. Проверить skybox
9. Повернуть камеру обратно на 360° (0°)

**Ожидаемый результат:**
- ✅ Skybox остается НЕПОДВИЖНЫМ на всех углах
- ❌ НЕТ flip'а на 180°
- ❌ НЕТ скачков при переходе через 0°/360°

## 📊 Ожидаемое поведение

### ДО v4.9.4:
```
Camera: 0°   → Skybox: 0°   ✅
Camera: 90°  → Skybox: 90°  ❌ (вращается с камерой)
Camera: 180° → Skybox: 180° → FLIP → -180° ❌❌ (FLIP!)
Camera: 270° → Skybox: 270° ❌
Camera: 360° → Skybox: 360° → FLIP → 0° ❌❌ (FLIP!)
```

### ПОСЛЕ v4.9.4:
```
Camera: 0°   → Skybox: fixed (iblRotationDeg) ✅
Camera: 90°  → Skybox: fixed (iblRotationDeg) ✅
Camera: 180° → Skybox: fixed (iblRotationDeg) ✅ (NO FLIP!)
Camera: 270° → Skybox: fixed (iblRotationDeg) ✅
Camera: 360° → Skybox: fixed (iblRotationDeg) ✅ (NO FLIP!)
```

## 🐛 Признаки проблемы

Если проблема НЕ исправлена, вы увидите:
- ❌ Skybox вращается вместе с камерой
- ❌ Резкий разворот на 180° при достижении определенных углов
- ❌ "Прыжки" фона при вращении камеры

## ✅ Признаки успеха

Если исправление работает:
- ✅ Skybox полностью неподвижен при вращении камеры
- ✅ Skybox вращается ТОЛЬКО при изменении "IBL Rotation"
- ✅ Никаких flip'ов, скачков или артефактов

## 📝 Логи в консоли

При запуске приложения вы должны увидеть:

```
═══════════════════════════════════════════
🚀 PneumoStabSim ENHANCED VERSION v4.9.4 LOADED
═══════════════════════════════════════════
✅ CRITICAL FIX v4.9.4:
   🔧 Skybox rotation: INDEPENDENT from camera
   🔧 probeOrientation uses ONLY iblRotationDeg
   🔧 Camera yaw does NOT affect skybox orientation
   🔧 Skybox and camera are COMPLETELY DECOUPLED
```

## 🎯 Итоговая проверка

**Вопрос:** Skybox вращается при вращении камеры?
- ❌ ДА → Проблема НЕ исправлена
- ✅ НЕТ → Проблема ИСПРАВЛЕНА

**Вопрос:** Есть ли flip на 180° при вращении камеры?
- ❌ ДА → Проблема НЕ исправлена
- ✅ НЕТ → Проблема ИСПРАВЛЕНА

---

**Версия тестирования:** v4.9.4  
**Дата:** 2024  
**Статус:** ✅ ГОТОВО К ТЕСТИРОВАНИЮ
