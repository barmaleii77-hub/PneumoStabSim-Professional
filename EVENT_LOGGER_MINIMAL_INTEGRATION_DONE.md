# ‚úÖ EventLogger –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - –ü–†–ò–ú–ï–ù–ï–ù–û

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ `panel_graphics.py`
```python
from src.common.event_logger import get_event_logger
```

### 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ `__init__`
```python
self.event_logger = get_event_logger()
self.logger.info("üîó Event logger initialized")
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —á–µ–∫–±–æ–∫—Å–æ–≤

#### ‚úÖ –ê–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç (–ö–∞–º–µ—Ä–∞)
```python
def on_auto_rotate_clicked(checked: bool):
    self.event_logger.log_user_click(
        widget_name="auto_rotate",
        widget_type="QCheckBox",
        value=checked
    )
    self._update_camera("auto_rotate", checked)

auto_rotate.clicked.connect(on_auto_rotate_clicked)
```

#### ‚úÖ –í–∫–ª—é—á–∏—Ç—å —Ç—É–º–∞–Ω (–û–∫—Ä—É–∂–µ–Ω–∏–µ)
```python
def on_fog_enabled_clicked(checked: bool):
    self.event_logger.log_user_click(
        widget_name="fog_enabled",
        widget_type="QCheckBox",
        value=checked
    )
    self._update_environment("fog_enabled", checked)

enabled.clicked.connect(on_fog_enabled_clicked)
```

#### ‚úÖ –í–∫–ª—é—á–∏—Ç—å Bloom (–≠—Ñ—Ñ–µ–∫—Ç—ã)
```python
def on_bloom_enabled_clicked(checked: bool):
    self.event_logger.log_user_click(
        widget_name="bloom_enabled",
        widget_type="QCheckBox",
        value=checked
    )
    self._update_effects("bloom_enabled", checked)

enabled.clicked.connect(on_bloom_enabled_clicked)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 –º–∏–Ω—É—Ç—ã)

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
python app.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥**:
```
============================================================
üöÄ PNEUMOSTABSIM v4.9.5
============================================================
üìä Python 3.13 | Qt 6.10.x
üé® Graphics: Qt Quick 3D | Backend: d3d11
‚è≥ Initializing...
‚úÖ Ready!
============================================================
```

---

### –®–∞–≥ 2: –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"üé® –ì—Ä–∞—Ñ–∏–∫–∞"** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

1. **–í–∫–ª–∞–¥–∫–∞ "–ö–∞–º–µ—Ä–∞"**:
   - ‚úÖ –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **"–ê–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç"** (2-3 —Ä–∞–∑–∞)

2. **–í–∫–ª–∞–¥–∫–∞ "–û–∫—Ä—É–∂–µ–Ω–∏–µ"**:
   - ‚úÖ –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **"–í–∫–ª—é—á–∏—Ç—å —Ç—É–º–∞–Ω"** (2-3 —Ä–∞–∑–∞)

3. **–í–∫–ª–∞–¥–∫–∞ "–≠—Ñ—Ñ–µ–∫—Ç—ã"**:
   - ‚úÖ –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **"–í–∫–ª—é—á–∏—Ç—å Bloom"** (2-3 —Ä–∞–∑–∞)

**–í—Å–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–π**: ~9 –∫–ª–∏–∫–æ–≤

---

### –®–∞–≥ 3: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∫–Ω–æ–ø–∫–∞ ‚ùå)

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥**:

```
‚úÖ Application closed (code: 0)

============================================================
üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –õ–û–ì–û–í –ò –°–û–ë–´–¢–ò–ô
============================================================

üîó –ê–Ω–∞–ª–∏–∑ —Å–æ–±—ã—Ç–∏–π Python‚ÜîQML...
   üìÅ –°–æ–±—ã—Ç–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã: logs\events_20241215_HHMMSS.json
   –í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤: 9                           ‚Üê ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >0
   –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: 9                         ‚Üê ‚úÖ –î–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å
   –ü—Ä–æ–ø—É—â–µ–Ω–æ QML: 0                             ‚Üê ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 0
   –ü—Ä–æ—Ü–µ–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: 100.0%                ‚Üê ‚úÖ 100%
   
   ‚úÖ –í—Å–µ —Å–æ–±—ã—Ç–∏—è —É—Å–ø–µ—à–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

   üìà –°–æ–±—ã—Ç–∏—è –ø–æ —Ç–∏–ø–∞–º:
      USER_CLICK: 9                             ‚Üê ‚úÖ 9 –∫–ª–∏–∫–æ–≤ –Ω–∞ —á–µ–∫–±–æ–∫—Å—ã
      STATE_CHANGE: 9                           ‚Üê ‚úÖ 9 –∏–∑–º–µ–Ω–µ–Ω–∏–π state
      SIGNAL_EMIT: 9                            ‚Üê ‚úÖ 9 –≤—ã–∑–æ–≤–æ–≤ .emit()

============================================================
‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ
============================================================
```

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û–∂–∏–¥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-------------------|-----------|
| **–í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤** | ‚â•9 (3 —á–µ–∫–±–æ–∫—Å–∞ √ó 3 –∫–ª–∏–∫–∞) | ‚úÖ |
| **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ** | = –í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤ | ‚úÖ |
| **–ü—Ä–æ–ø—É—â–µ–Ω–æ QML** | 0 | ‚úÖ |
| **–ü—Ä–æ—Ü–µ–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** | 100.0% | ‚úÖ |
| **USER_CLICK** | ‚â•9 | ‚úÖ |
| **STATE_CHANGE** | ‚â•9 | ‚úÖ |
| **SIGNAL_EMIT** | ‚â•9 | ‚úÖ |

---

## ‚ö†Ô∏è –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "–°–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ –∫–ª–∏–∫–∞–ª–∏ –Ω–∞ —á–µ–∫–±–æ–∫—Å—ã

**–†–µ—à–µ–Ω–∏–µ**: –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –®–∞–≥ 2 - –ø–æ–∫–ª–∏–∫–∞–π—Ç–µ –Ω–∞ 3 —á–µ–∫–±–æ–∫—Å–∞

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ú–µ–Ω—å—à–µ 9 —Å–æ–±—ã—Ç–∏–π

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:
1. –ö–ª–∏–∫–Ω—É–ª–∏ –º–µ–Ω—å—à–µ 3 —Ä–∞–∑ –Ω–∞ —á–µ–∫–±–æ–∫—Å
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–ª–æ—Å—å —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ

**–†–µ—à–µ–Ω–∏–µ**: –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ—Å—Ç, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª–∏–∫–∞–µ—Ç–µ **–º–∏–Ω–∏–º—É–º 3 —Ä–∞–∑–∞** –Ω–∞ –∫–∞–∂–¥—ã–π —á–µ–∫–±–æ–∫—Å

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

**–ü—Ä–∏—á–∏–Ω–∞**: –ö—ç—à Python

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –£–¥–∞–ª–∏—Ç–µ –∫—ç—à
python -c "import sys; import os; os.system('rmdir /s /q src\\__pycache__')"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
python app.py
```

---

## üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –≤ JSON

–§–∞–π–ª —Å–æ–±—ã—Ç–∏–π: `logs/events_<timestamp>.json`

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–∞–π–ª —Å–æ–±—ã—Ç–∏–π
notepad (Get-ChildItem logs\events_*.json | Sort-Object LastWriteTime -Descending | Select-Object -First 1).FullName
```

**–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ**:
```json
[
  {
    "timestamp": "2024-12-15T14:30:22.123456",
    "session_id": "20241215_143022",
    "event_type": "USER_CLICK",
    "source": "python",
    "component": "panel_graphics",
    "action": "click_auto_rotate",
    "old_value": null,
    "new_value": true,
    "metadata": {
      "widget_type": "QCheckBox"
    }
  },
  ...
]
```

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –í–∞—Ä–∏–∞–Ω—Ç –ê (—Ç–µ–∫—É—â–∏–π) ‚úÖ –ì–û–¢–û–í
- ‚úÖ –ò–º–ø–æ—Ä—Ç EventLogger
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ __init__
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —á–µ–∫–±–æ–∫—Å–æ–≤
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç –ë (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ) - 30 –º–∏–Ω—É—Ç
–ï—Å–ª–∏ –í–∞—Ä–∏–∞–Ω—Ç –ê —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö 13 —á–µ–∫–±–æ–∫—Å–æ–≤
2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ LabeledSlider (—Å–º. `EVENT_LOGGER_INTEGRATION_MISSING.md`)
3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ColorButton
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ `_emit_*`

–°–º. –ø–æ–ª–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é: `docs/EVENT_LOGGING_INTEGRATION_GUIDE.md`

---

## üìÅ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `src/ui/panels/panel_graphics.py` | +3 —Å—Ç—Ä–æ–∫–∏ –∏–º–ø–æ—Ä—Ç, +2 —Å—Ç—Ä–æ–∫–∏ __init__, +39 —Å—Ç—Ä–æ–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ |
| **–ò–¢–û–ì–û** | +44 —Å—Ç—Ä–æ–∫–∏ |

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∞**:
```bash
python app.py
```

**–í—Ä–µ–º—è —Ç–µ—Å—Ç–∞**: ~2 –º–∏–Ω—É—Ç—ã  
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∏–Ω–∏–º—É–º 9 —Å–æ–±—ã—Ç–∏–π USER_CLICK –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ

---

**–î–∞—Ç–∞**: 2024-12-15  
**–í–µ—Ä—Å–∏—è**: v4.9.5  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è EventLogger –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ (–í–∞—Ä–∏–∞–Ω—Ç –ê)

