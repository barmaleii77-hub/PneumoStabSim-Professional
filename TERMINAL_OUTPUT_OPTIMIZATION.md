# Terminal Output Optimization - v4.9.5

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. ‚úÖ –ß–∏—Å—Ç—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª

**–î–û (v4.9.4):**
```
2024-01-05T12:34:56 | PID:1234 TID:5678 | INFO | PneumoStabSim | Application starting...
2024-01-05T12:34:56 | PID:1234 TID:5678 | INFO | PneumoStabSim.UI | event=APP_CREATED | Application initialized
2024-01-05T12:34:57 | PID:1234 TID:5678 | INFO | PneumoStabSim.UI | event=WINDOW_SHOWN | Main window displayed
... (100+ lines of logs)
```

**–ü–û–°–õ–ï (v4.9.5):**
```
============================================================
üöÄ PNEUMOSTABSIM v4.9.4
============================================================
üìä Python 3.11 | Qt 6.8.0
üé® Graphics: Qt Quick 3D | Backend: d3d11
‚è≥ Initializing...
‚úÖ Ready!
============================================================
```

### 2. ‚úÖ Post-Exit Test Runner

–ù–æ–≤—ã–π –º–æ–¥—É–ª—å `run_tests_after_exit.py`:

- **–ê–≤—Ç–æ–ø–æ–∏—Å–∫ —Ç–µ—Å—Ç–æ–≤** - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ `test_*.py`, `analyze_*.py`, `diagnose_*.py`
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** - –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
- **–¢–∞–π–º–∞—É—Ç –∑–∞—â–∏—Ç–∞** - 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ç–µ—Å—Ç
- **Markdown –æ—Ç—á–µ—Ç—ã** - –ø–æ–¥—Ä–æ–±–Ω—ã–π `test_report.md`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ó–∞–ø—É—Å–∫ —Å —Ç–µ—Å—Ç–∞–º–∏ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞
py app.py --run-tests

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã (–±–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
py run_tests_after_exit.py
```

**–í—ã–≤–æ–¥:**
```
============================================================
üß™ POST-EXIT TEST RUNNER
============================================================
üìä –ù–∞–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤: 5

============================================================
üß™ –ó–ê–ü–£–°–ö: test_graphics_sync
============================================================
‚úÖ –£–°–ü–ï–•: test_graphics_sync (2.34s)

============================================================
üìä –°–í–û–î–ö–ê –¢–ï–°–¢–û–í
============================================================
üìà –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 5
‚úÖ –£—Å–ø–µ—à–Ω–æ: 4
‚ùå –û—à–∏–±–æ–∫: 1

üíæ –û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω: test_report.md
```

### 3. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ app.py:**

1. **–£–±—Ä–∞–Ω–æ:**
   - `init_logging()` - –±–æ–ª—å—à–µ –ù–ï —Å–æ–∑–¥–∞–µ—Ç—Å—è `logs/run.log`
   - –í–µ—Å—å –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª

2. **–û—Å—Ç–∞–≤–ª–µ–Ω–æ:**
   - `log_ui_event()` - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (APP_CREATED, WINDOW_SHOWN)
   - –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ —Ñ–∞–π–ª –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω `--debug`

3. **Warnings/Errors:**
   - –ù–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ `_warnings_errors`
   - –í—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4. ‚úÖ Bat-—Ñ–∞–π–ª—ã

**run_with_tests.bat:**
```batch
@echo off
echo üöÄ PNEUMOSTABSIM - LAUNCH WITH TESTS
python app.py --run-tests
pause
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ —Ç–µ—Å—Ç–æ–≤)

```bash
py app.py
```

**–í—ã–≤–æ–¥:**
- –¢–æ–ª—å–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (Python/Qt –≤–µ—Ä—Å–∏–∏)
- –°—Ç–∞—Ç—É—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ù–∏–∫–∞–∫–∏—Ö –ª–æ–≥–æ–≤

### –ó–∞–ø—É—Å–∫ —Å —Ç–µ—Å—Ç–∞–º–∏

```bash
py app.py --run-tests
```

**–í—ã–≤–æ–¥:**
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –†–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- –û—Ç—á–µ—Ç –≤ `test_report.md`

### Debug —Ä–µ–∂–∏–º (—Å –ª–æ–≥–∞–º–∏)

```bash
py app.py --debug
```

**–í—ã–≤–æ–¥:**
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ `logs/run.log`
- Qt debug —Å–æ–æ–±—â–µ–Ω–∏—è

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á–µ—Ç–∞

`test_report.md` —Å–æ–¥–µ—Ä–∂–∏—Ç:

```markdown
# Post-Exit Test Report

**–î–∞—Ç–∞:** 2024-01-05 12:34:56

## –°–≤–æ–¥–∫–∞

- –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 5
- –£—Å–ø–µ—à–Ω–æ: 4
- –û—à–∏–±–æ–∫: 1

## –î–µ—Ç–∞–ª–∏

### ‚úÖ test_graphics_sync

- **–ü—É—Ç—å:** `test_graphics_sync.py`
- **–ö–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞:** 0
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2.34s

### ‚ùå diagnose_graphics_panel

- **–ü—É—Ç—å:** `diagnose_graphics_panel.py`
- **–ö–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞:** 1
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 0.12s

**STDERR:**
```
ImportError: No module named 'some_module'
```
```

## –§–∞–π–ª—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

- `run_tests_after_exit.py` - –º–æ–¥—É–ª—å –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
- `docs/POST_EXIT_TEST_RUNNER.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `run_with_tests.bat` - —è—Ä–ª—ã–∫ –¥–ª—è Windows

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ app.py

1. **–£–¥–∞–ª–µ–Ω–æ:**
   ```python
   # –ë–æ–ª—å—à–µ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   logger = init_logging("PneumoStabSim", Path("logs"))
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω–æ:**
   ```python
   # –ê—Ä–≥—É–º–µ–Ω—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
   parser.add_argument('--run-tests', action='store_true', 
                       help='Run tests after exit')
   
   # –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
   def run_post_exit_tests():
       """–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
       # ...
   ```

3. **–ò–∑–º–µ–Ω–µ–Ω–æ:**
   ```python
   # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
   log_ui_event("APP_CREATED", "Application initialized")
   log_ui_event("WINDOW_SHOWN", "Main window displayed")
   ```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –ß–∏—Å—Ç—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª
- –ù–∏–∫–∞–∫–∏—Ö –ª–∏—à–Ω–∏—Ö –ª–æ–≥–æ–≤
- –¢–æ–ª—å–∫–æ –≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ü—Ä–∏—è—Ç–Ω—ã–π –¥–ª—è –≥–ª–∞–∑ –≤—ã–≤–æ–¥

### 2. –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¢–µ—Å—Ç—ã –Ω–µ –º–µ—à–∞—é—Ç —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
- –¢–∞–π–º–∞—É—Ç—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç
- –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ CI/CD

### 4. –ì–∏–±–∫–æ—Å—Ç—å
- `py app.py` - –æ–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫
- `py app.py --run-tests` - —Å —Ç–µ—Å—Ç–∞–º–∏
- `py app.py --debug` - —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
- `py run_tests_after_exit.py` - —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –†–µ–∂–∏–º | –í—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª | –§–∞–π–ª –ª–æ–≥–æ–≤ | –¢–µ—Å—Ç—ã |
|-------|------------------|------------|-------|
| v4.9.4 | 100+ —Å—Ç—Ä–æ–∫ | logs/run.log (–≤—Å–µ–≥–¥–∞) | –í—Ä—É—á–Ω—É—é |
| v4.9.5 | 5-10 —Å—Ç—Ä–æ–∫ | –¢–æ–ª—å–∫–æ –≤ --debug | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- **–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞:** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–í—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª:** -95% —Å—Ç—Ä–æ–∫
- **–õ–æ–≥–∏ –≤ —Ñ–∞–π–ª:** —Ç–æ–ª—å–∫–æ –≤ --debug —Ä–µ–∂–∏–º–µ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

## Migration Guide

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–û–±—ã—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞:**
   ```bash
   # –ë—ã–ª–æ
   py app.py  # + 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
   
   # –°—Ç–∞–ª–æ
   py app.py  # + 5 —Å—Ç—Ä–æ–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```bash
   # –ë—ã–ª–æ
   py app.py
   py test_graphics_sync.py
   py analyze_logs.py
   # ...
   
   # –°—Ç–∞–ª–æ
   py app.py --run-tests  # –∑–∞–ø—É—Å–∫–∞–µ—Ç –í–°–ï —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   ```

3. **Debug:**
   ```bash
   # –ë—ã–ª–æ
   py app.py  # –ª–æ–≥–∏ –≤—Å–µ–≥–¥–∞ –≤ logs/run.log
   
   # –°—Ç–∞–ª–æ
   py app.py --debug  # –ª–æ–≥–∏ –¢–û–õ–¨–ö–û –≤ debug —Ä–µ–∂–∏–º–µ
   ```

### –î–ª—è CI/CD

```yaml
# GitHub Actions example
- name: Run app and tests
  run: |
    python app.py --test-mode --run-tests
    
- name: Upload test report
  uses: actions/upload-artifact@v3
  with:
    name: test-report
    path: test_report.md
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤
py run_tests_after_exit.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù—É–∂–Ω—ã –ª–æ–≥–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ª–æ–≥–∞–º–∏
py app.py --debug
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù—É–∂–µ–Ω —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –î–æ–±–∞–≤–∏—Ç—å –≤ app.py (–≤–Ω—É—Ç—Ä–∏ main())
from src.common import init_logging
logger = init_logging("PneumoStabSim", Path("logs"))
```

## –°–º. —Ç–∞–∫–∂–µ

- `docs/POST_EXIT_TEST_RUNNER.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `.github/copilot-instructions.md` - —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ –∫–æ–¥–µ
- `run_tests_after_exit.py` - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –º–æ–¥—É–ª—è
- `run_with_tests.bat` - —è—Ä–ª—ã–∫ –¥–ª—è Windows

---

**–í–µ—Ä—Å–∏—è:** 4.9.5
**–î–∞—Ç–∞:** 2024-01-05
**–ê–≤—Ç–æ—Ä:** Development Team
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Implemented & Tested
