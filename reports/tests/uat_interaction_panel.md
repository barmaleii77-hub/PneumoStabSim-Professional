# UAT • Панель взаимодействий и телеметрия

## Контекст
- Компонент: `qml/SimulationPanel.qml` (панель взаимодействий/телеметрии)
- Цель: подтвердить новую валидацию диапазонов давления, градиенты порогов и синхронизацию потоков/клапанов.
- Методика: ручные сценарии в сборке Qt + автотесты `tests/integration/test_interaction_panel.py` и `tests/performance/test_render_sync_performance.py`.

## Чек-лист (прошёл ✅)
- [x] Панель загружается без ошибок, виджеты потоков отображаются.
- [x] Данные `receiver.thresholds` строят цветовой градиент и не сбрасывают состояние клапанов.
- [x] Неверные диапазоны давления (min > max) восстанавливаются после прихода телеметрии.
- [x] Нормализация потоков использует `maxLineIntensity`, а пустые значения не приводят к NaN.
- [x] `masterIsolationOpen` синхронно отражается в UI и в Python-моделях.
- [x] Производительные тесты формируют отчёт `reports/performance/render_sync_test_report.json`.

## Ручные сценарии
1) **Градиенты давления**: загрузить панель → открыть модуль телеметрии → передать пороги 100/140 кПа → убедиться, что шкала окрашивается в два сегмента, значение стрелки в пределах [0,1].
2) **Восстановление диапазона**: выставить min=200 кПа, max=180 кПа через debug overlay → отправить телеметрию с min=100, max=155, tankPressure=145 → убедиться, что шкалы активируются и предупреждений нет.
3) **Скорость потоков**: отправить netFlow 0.06 (A1) и -0.02 (B1) при maxLineIntensity=0.08 → проверить в UI, что интенсивность A1 ≈0.75, B1 ≈0.25; скорости анимации не выходят за [0,1].
4) **Отчёт производительности**: выполнить `pytest tests/performance -m performance` → убедиться, что создаётся `reports/performance/render_sync_test_report.json` и фиксируется variance по кадрам.
5) **Резервуар и клапаны**: отправить `masterIsolationOpen=true` и два клапана (атмосфера/резервуар) → проверить, что переключатели подсвечены и числа потока совпадают с нагрузкой.

## Итог
- Ручные проверки совпали с автотестами; блокирующих дефектов не выявлено.
- Готово к демонстрации UAT и включено в общий прогон `scripts/testing_entrypoint.py`.
