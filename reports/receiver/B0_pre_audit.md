# B-0. ПРЕ-АУДИТ ПАНЕЛИ РЕСИВЕРА

## Цель: Реализация двух режимов изменения объёма

### ?? Анализ текущего состояния

#### ? Обнаружено: Архитектура уже подготовлена!

**В `src/pneumo/receiver.py`:**
- ? `ReceiverVolumeMode` enum с двумя режимами:
  - `NO_RECALC` - объём не влияет на p/T
  - `ADIABATIC_RECALC` - пересчёт по адиабатическим законам
- ? `ReceiverState.apply_instant_volume_change()` - логика переключения режимов
- ? Термодинамические расчёты реализованы

**В `src/ui/panels/panel_pneumo.py`:**
- ? **НЕТ контролов для объёма ресивера**
- ? НЕТ переключателя режимов объёма
- ? НЕТ геометрических параметров (длина, диаметр)

#### ?? План реализации

### B-1. Добавление контролов объёма ресивера в UI

**Режим 1: Manual Volume (ручной объём)**
```python
self.manual_volume_knob = Knob(
    minimum=0.001, maximum=0.100, value=0.020, step=0.001,
    decimals=3, units="м?", title="Объём ресивера"
)
```

**Режим 2: Geometric Calculation (геометрический расчёт)**
```python  
self.receiver_length_knob = Knob(
    minimum=0.100, maximum=2.000, value=0.500, step=0.001,
    decimals=3, units="м", title="Длина ресивера"
)
self.receiver_diameter_knob = Knob(
    minimum=0.050, maximum=0.500, value=0.200, step=0.001,
    decimals=3, units="м", title="Диаметр ресивера"
)
```

### B-2. Переключатель режимов
```python
self.volume_mode_combo = QComboBox()
self.volume_mode_combo.addItems([
    "Ручной объём",
    "Геометрический расчёт"
])
```

### B-3. Интеграция с термодинамикой
- Связать UI контролы с `ReceiverVolumeMode`
- Автоматический пересчёт объёма: `V = ? ? (D/2)? ? L`
- Эмиссия сигналов об изменении объёма

### ?? Текущие параметры пневмопанели

**Есть контролы для:**
- ? Обратные клапаны (перепады давления, диаметры)
- ? Предохранительные клапаны (давления, дроссели)
- ? Температура атмосферы
- ? Термодинамический режим (изотермический/адиабатический)
- ? Системные опции

**НЕТ контролов для:**
- ? **Объём ресивера** (главная цель)
- ? Геометрические размеры ресивера
- ? Режим пересчёта объёма

### ?? Приоритет задач

1. **B-1 (HIGH)**: Добавить группу "Ресивер" с контролами объёма
2. **B-2 (MEDIUM)**: Реализовать переключение режимов UI
3. **B-3 (LOW)**: Связать с термодинамической логикой
4. **B-4 (TEST)**: Создать тесты для новых контролов

---

**Статус**: ?? Архитектура готова, нужно добавить UI
**Следующий шаг**: B-1. Добавление группы ресивера в PneumoPanel