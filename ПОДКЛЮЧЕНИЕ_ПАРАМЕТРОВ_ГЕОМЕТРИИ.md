# üéØ –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –í–°–ï–• –ü–ê–†–ê–ú–ï–¢–†–û–í –ì–ï–û–ú–ï–¢–†–ò–ò –ö –ê–ù–ò–ú–ò–†–û–í–ê–ù–ù–û–ô –°–•–ï–ú–ï

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢ –í–´–ü–û–õ–ù–ï–ù–ò–Ø

**–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–Ω–µ–ª–∏ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π 3D —Å—Ö–µ–º–µ!**

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è updateGeometry –≤ QML

**–§–∞–π–ª:** `assets/qml/main.qml`

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –í–°–ï–• –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

```javascript
// ‚ú® –ù–û–í–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ - –ú–®-1: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ü–∏–ª–∏–Ω–¥—Ä–∞ –≤ –º–º (–∏–∑ –º)
if (params.cylDiamM !== undefined) {
    console.log("  ‚ú® Setting userCylDiamM (NEW):", params.cylDiamM, "–º–º")
    userBoreHead = params.cylDiamM  // –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
    userBoreRod = params.cylDiamM   // –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
}
if (params.strokeM !== undefined) {
    console.log("  ‚ú® Setting userStrokeM (NEW):", params.strokeM, "–º–º")
}
if (params.deadGapM !== undefined) {
    console.log("  ‚ú® Setting userDeadGapM (NEW):", params.deadGapM, "–º–º")
}

// ‚ú® –ù–û–í–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ - –ú–®-2: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —à—Ç–æ–∫–∞ –∏ –ø–æ—Ä—à–Ω—è –≤ –º–º (–∏–∑ –º)
if (params.rodDiameterM !== undefined) {
    console.log("  ‚ú® Setting userRodDiameterM (NEW):", params.rodDiameterM, "–º–º")
    userRodDiameter = params.rodDiameterM  // –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
}
// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ú–®-2
```

### 2. –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è _get_fast_geometry_update

**–§–∞–π–ª:** `src/ui/panels/panel_geometry.py`

**–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç –í–°–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ QML:**

```python
geometry_3d = {
    # –û–°–ù–û–í–ù–´–ï –†–ê–ó–ú–ï–†–´ –†–ê–ú–´ (–∏–∑ –º–µ—Ç—Ä–æ–≤ –≤ –º–º)
    'frameLength': self.parameters.get('wheelbase', 3.2) * 1000,
    'leverLength': self.parameters.get('lever_length', 0.8) * 1000,
    
    # ‚ú® –ù–û–í–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ (–ú–®-1 –∏ –ú–®-2): –í—Å–µ –≤ –º–º –¥–ª—è QML
    'cylDiamM': self.parameters.get('cyl_diam_m', 0.080) * 1000,
    'strokeM': self.parameters.get('stroke_m', 0.300) * 1000,
    'deadGapM': self.parameters.get('dead_gap_m', 0.005) * 1000,
    'rodDiameterM': self.parameters.get('rod_diameter_m', 0.035) * 1000,
    'pistonRodLengthM': self.parameters.get('piston_rod_length_m', 0.200) * 1000,
    'pistonThicknessM': self.parameters.get('piston_thickness_m', 0.025) * 1000,
    # ... –≤—Å–µ–≥–æ 20 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ MainWindow

**–§–∞–π–ª:** `src/ui/main_window.py`

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**

```python
# –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–æ–¥–∫–ª—é—á–∞–µ–º –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –º–µ—Ç–æ–¥—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–µ–æ–º–µ—Ç—Ä–∏–∏
self.geometry_panel.geometry_changed.connect(self._on_geometry_changed)
```

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –¢–µ—Å—Ç –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ:

```
üìä #1591 PARAM: piston_rod_length_m = 0.387
üîÑ #1592 UPDATE: 12 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ 
üîÑ GeometryPanel: –û—Ç–ø—Ä–∞–≤–∫–∞ –ü–û–õ–ù–û–ô –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –≤ QML (–∏–∑–º–µ–Ω—ë–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä: piston_rod_length_m = 0.387)
   üìê –û—Å–Ω–æ–≤–Ω—ã–µ: frameLength=2249.0–º–º, leverLength=1100.0–º–º
   üìê –¶–∏–ª–∏–Ω–¥—Ä: cylDiam=105.0–º–º, stroke=199.0–º–º
   üìê –®—Ç–æ–∫: diameter=46.0–º–º, length=387.0–º–º
üé¨ #1593 3D‚ÜíQML: –†–∞–º–∞=2249–º–º, –†—ã—á–∞–≥=1100–º–º, –¶–∏–ª=105.0–º–º, –®—Ç–æ–∫=46.0–º–º
   üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ QML: 20 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–∞
‚úÖ **–î–∏—Å–∫—Ä–µ—Ç–Ω–æ—Å—Ç—å 0.001–º**: –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é 1–º–º
‚úÖ **20 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã GeometryPanel –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ QML
‚úÖ **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º‚Üí–º–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–ª—è QML
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°—Ç–∞—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã QML –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
‚úÖ **–ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ú–®-1/–ú–®-2**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## üìã –°–ü–ò–°–û–ö –ü–û–î–ö–õ–Æ–ß–ï–ù–ù–´–• –ü–ê–†–ê–ú–ï–¢–†–û–í

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã (6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤):
1. `wheelbase` ‚Üí `frameLength` (–º‚Üí–º–º)
2. `track` ‚Üí `trackWidth` (–º‚Üí–º–º)
3. `lever_length` ‚Üí `leverLength` (–º‚Üí–º–º)
4. `cylinder_length` ‚Üí `cylinderBodyLength` (–º‚Üí–º–º)
5. `frame_to_pivot` ‚Üí `frameToPivot` (–º‚Üí–º–º)
6. `rod_position` ‚Üí `rodPosition` (–¥–æ–ª—è 0-1)

### –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ú–®-1 (3 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞):
7. `cyl_diam_m` ‚Üí `cylDiamM` (–º‚Üí–º–º)
8. `stroke_m` ‚Üí `strokeM` (–º‚Üí–º–º)
9. `dead_gap_m` ‚Üí `deadGapM` (–º‚Üí–º–º)

### –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ú–®-2 (3 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞):
10. `rod_diameter_m` ‚Üí `rodDiameterM` (–º‚Üí–º–º)
11. `piston_rod_length_m` ‚Üí `pistonRodLengthM` (–º‚Üí–º–º)
12. `piston_thickness_m` ‚Üí `pistonThicknessM` (–º‚Üí–º–º)

**–ò–¢–û–ì–û: 12 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ GeometryPanel ‚Üí 20 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ QML (—Å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é)**

## üé¨ –¶–ï–ü–û–ß–ö–ê –û–ë–ù–û–í–õ–ï–ù–ò–Ø 

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–≤–∏–≥–∞–µ—Ç —Å–ª–∞–π–¥–µ—Ä
    ‚Üì (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
RangeSlider.valueChanged
    ‚Üì
GeometryPanel._on_parameter_changed()
    ‚Üì
GeometryPanel.geometry_changed.emit(geometry_3d)
    ‚Üì
MainWindow._on_geometry_changed()
    ‚Üì
QML.updateGeometry(params) + setProperty()
    ‚Üì
3D —Å—Ü–µ–Ω–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

## üöÄ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:**

```bash
# –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–ª–Ω—ã–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
py app.py

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
py test_geometry_connection.py

# –¢–µ—Å—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–ª–∞–π–¥–µ—Ä–æ–≤
py test_slider_precision.py
```

## üéâ –ò–¢–û–ì

**–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ü–ê–ù–ï–õ–ò –ì–ï–û–ú–ï–¢–†–ò–ò –£–°–ü–ï–®–ù–û –ü–û–î–ö–õ–Æ–ß–ï–ù–´ –ö –ê–ù–ò–ú–ò–†–û–í–ê–ù–ù–û–ô 3D –°–•–ï–ú–ï!**

‚úÖ **12 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** —Å –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ—Å—Ç—å—é **0.001–º (1–º–º)**
‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –≤–æ –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è** –º–µ—Ç—Ä—ã ‚Üí –º–∏–ª–ª–∏–º–µ—Ç—Ä—ã –¥–ª—è QML
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ QML
‚úÖ **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ú–®-1 –∏ –ú–®-2

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –ª—é–±–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –∏ —Å—Ä–∞–∑—É –≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ 3D —Å—Ü–µ–Ω–µ!**
