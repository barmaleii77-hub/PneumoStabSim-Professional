# ‚úÖ IBL SKYBOX –§–û–ù –í–ö–õ–Æ–ß–ï–ù v4.8

**–î–∞—Ç–∞:** 2025-01-09  
**–í–µ—Ä—Å–∏—è:** 4.8  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

---

## üéØ –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π (v4.7):
```qml
// –§–æ–Ω –í–°–ï–ì–î–ê –ø—Ä–æ—Å—Ç–æ–π —Ü–≤–µ—Ç
backgroundMode: SceneEnvironment.Color
clearColor: backgroundColor

// IBL –¢–û–õ–¨–ö–û –¥–ª—è –æ—Å–≤–µ—â–µ–Ω–∏—è
lightProbe: iblEnabled && iblReady ? iblLoader.probe : null
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä—ã–π –∏–ª–∏ –æ–¥–Ω–æ—Ç–æ–Ω–Ω—ã–π —Ñ–æ–Ω, IBL —Ç–æ–ª—å–∫–æ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (v4.8):
```qml
// –§–æ–Ω SkyBox –∏–∑ HDR –∫–æ–≥–¥–∞ IBL –≥–æ—Ç–æ–≤!
backgroundMode: (iblEnabled && iblReady) ? SceneEnvironment.SkyBox : SceneEnvironment.Color
clearColor: backgroundColor  // Fallback –∫–æ–≥–¥–∞ IBL –Ω–µ –≥–æ—Ç–æ–≤

// IBL –¥–ª—è –æ—Å–≤–µ—â–µ–Ω–∏—è (–∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ)
lightProbe: iblEnabled && iblReady ? iblLoader.probe : null
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ HDR –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤–∏–¥–Ω–æ –∫–∞–∫ —Ñ–æ–Ω + –æ—Å–≤–µ—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã!

---

## üåü –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ù–û–í–û–ì–û –†–ï–ñ–ò–ú–ê

### ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ:
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** –∏–∑ HDR —Ñ–∞–π–ª–∞
- **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ** (—Ñ–æ–Ω –∏ —Å–≤–µ—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞)
- **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥** —Å—Ü–µ–Ω—ã
- **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç** (–≤–∏–¥–Ω–æ –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –æ–±—ä–µ–∫—Ç—ã)

### ‚úÖ Fallback —Å–∏—Å—Ç–µ–º–∞:
- –ï—Å–ª–∏ IBL –Ω–µ –≥–æ—Ç–æ–≤ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π —Ü–≤–µ—Ç `backgroundColor`
- –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫–æ–≥–¥–∞ HDR –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ù–µ—Ç –º–µ—Ä—Ü–∞–Ω–∏–π –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GraphicsPanel:
```python
# –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å IBL (–≤–ª–∏—è–µ—Ç –∏ –Ω–∞ —Ñ–æ–Ω –∏ –Ω–∞ –æ—Å–≤–µ—â–µ–Ω–∏–µ)
ibl_enabled: True/False

# –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å IBL
ibl_intensity: 0.0 - 3.0

# –¶–≤–µ—Ç —Ñ–æ–Ω–∞ fallback
background_color: "#2a2a2a"
```

---

## üìÇ –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

### 1. `assets/qml/main.qml`

**–°—Ç—Ä–æ–∫–∞ ~349** - ExtendedSceneEnvironment:
```qml
// ‚úÖ –ò–ó–ú–ï–ù–ï–ù–û: –ò–°–ü–û–õ–¨–ó–£–ï–ú SKYBOX –ò–ó IBL –ö–û–ì–î–ê –û–ù –ì–û–¢–û–í!
backgroundMode: (iblEnabled && iblReady) ? SceneEnvironment.SkyBox : SceneEnvironment.Color
```

**–°—Ç—Ä–æ–∫–∞ ~644** - applyEnvironmentUpdates():
```qml
console.log("   Background: " + (iblEnabled && iblReady ? "SkyBox HDR" : backgroundColor + " (color)"))
console.log("  ‚úÖ Environment updated (SkyBox –∏–∑ IBL –∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤)")
```

**–°—Ç—Ä–æ–∫–∞ ~1098** - Component.onCompleted:
```qml
console.log("üöÄ PneumoStabSim v4.8 IBL SKYBOX LOADED")
console.log("   üîß SkyBox —Ñ–æ–Ω –∏–∑ HDR —Ñ–∞–π–ª–∞")
```

**–°—Ç—Ä–æ–∫–∞ ~1175** - –ò–Ω—Ñ–æ –ø–∞–Ω–µ–ª—å:
```qml
text: "üåü IBL —Å—Ç–∞—Ç—É—Å: " + (iblEnabled ? (iblLoader.ready ? "–ó–ê–ì–†–£–ñ–ï–ù (–æ—Å–≤–µ—â–µ–Ω–∏–µ + SkyBox —Ñ–æ–Ω)" : "–ó–ê–ì–†–£–ñ–ê–ï–¢–°–Ø...") : "–í–´–ö–õ–Æ–ß–ï–ù")
text: "üé® –§–æ–Ω: " + (iblEnabled && iblLoader.ready ? "SkyBox HDR (–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å –∫–∞–º–µ—Ä–æ–π)" : backgroundColor + " (–ø—Ä–æ—Å—Ç–æ–π —Ü–≤–µ—Ç)")
```

### 2. `app.py`

**–°—Ç—Ä–æ–∫–∞ ~246** - –°–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–ø—É—Å–∫–µ:
```python
print("PNEUMOSTABSIM STARTING (IBL SkyBox Background v4.8)")
print("üé® IBL –û–ö–†–£–ñ–ï–ù–ò–ï:")
print("   ‚úÖ SkyBox —Ñ–æ–Ω –∏–∑ HDR —Ñ–∞–π–ª–∞")
print("   ‚úÖ IBL –æ—Å–≤–µ—â–µ–Ω–∏–µ –æ—Ç HDR")
print("   ‚úÖ –§–æ–Ω –≤—Ä–∞—â–∞–µ—Ç—Å—è —Å –∫–∞–º–µ—Ä–æ–π (SkyBox)")
```

---

## üéÆ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –¢–ï–ü–ï–†–¨

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: IBL –≤–∫–ª—é—á–µ–Ω, HDR —Ñ–∞–π–ª –≥–æ—Ç–æ–≤
1. **–§–æ–Ω:** SkyBox –∏–∑ HDR —Ñ–∞–π–ª–∞ (–≤–∏–¥–Ω–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
2. **–û—Å–≤–µ—â–µ–Ω–∏–µ:** IBL –æ—Ç —Ç–æ–≥–æ –∂–µ HDR (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è)
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ HDR —Å—Ü–µ–Ω—É

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: IBL –≤–∫–ª—é—á–µ–Ω, HDR –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
1. **–§–æ–Ω:** –ü—Ä–æ—Å—Ç–æ–π —Ü–≤–µ—Ç `backgroundColor`
2. **–û—Å–≤–µ—â–µ–Ω–∏–µ:** –ë–∞–∑–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–≤–µ—Ç–∞
3. **–ü–µ—Ä–µ—Ö–æ–¥:** –ü–ª–∞–≤–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ SkyBox –∫–æ–≥–¥–∞ HDR –≥–æ—Ç–æ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: IBL –≤—ã–∫–ª—é—á–µ–Ω
1. **–§–æ–Ω:** –ü—Ä–æ—Å—Ç–æ–π —Ü–≤–µ—Ç `backgroundColor`
2. **–û—Å–≤–µ—â–µ–Ω–∏–µ:** –¢–æ–ª—å–∫–æ DirectionalLight –∏—Å—Ç–æ—á–Ω–∏–∫–∏
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –±–µ–∑ IBL

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```bash
py app.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–∏–¥–Ω–æ HDR –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∫–∞–∫ —Ñ–æ–Ω
- ‚úÖ –û–±—ä–µ–∫—Ç—ã –æ—Å–≤–µ—â–µ–Ω—ã –æ—Ç —Ç–æ–≥–æ –∂–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ú–æ–∂–Ω–æ –∫—Ä—É—Ç–∏—Ç—å –∫–∞–º–µ—Ä—É –∏ SkyBox –≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ
- ‚úÖ –í GraphicsPanel –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å IBL

### –ü—Ä–æ–≤–µ—Ä–∫–∞ fallback:
```bash
# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å HDR —Ñ–∞–π–ª
mv assets/hdr/studio.hdr assets/hdr/studio.hdr.backup

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
py app.py

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
# - –°–µ—Ä—ã–π —Ñ–æ–Ω (backgroundColor)
# - –ö–æ–Ω—Å–æ–ª—å: "‚ùå Both HDR probes failed to load"
# - –°—Ü–µ–Ω–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–±–µ–∑ IBL)

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å HDR
mv assets/hdr/studio.hdr.backup assets/hdr/studio.hdr
```

---

## üìä –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨

### ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –ï—Å–ª–∏ `iblEnabled = false` ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ (–ø—Ä–æ—Å—Ç–æ–π —Ñ–æ–Ω)
- –ï—Å–ª–∏ HDR —Ñ–∞–π–ª—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback
- –í—Å–µ —Å—Ç–∞—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### ‚úÖ GraphicsPanel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- –ß–µ–∫–±–æ–∫—Å "–í–∫–ª—é—á–∏—Ç—å IBL" —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º (—Ñ–æ–Ω + –æ—Å–≤–µ—â–µ–Ω–∏–µ)
- –°–ª–∞–π–¥–µ—Ä "–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å IBL" –≤–ª–∏—è–µ—Ç –Ω–∞ —è—Ä–∫–æ—Å—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ —Ñ–æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ fallback

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **–î–æ–±–∞–≤–∏—Ç—å skyboxBlurAmount** –≤ GraphicsPanel
2. **Preset HDR –æ–∫—Ä—É–∂–µ–Ω–∏–π** (—Å—Ç—É–¥–∏—è, —É–ª–∏—Ü–∞, –Ω–æ—á—å)
3. **–ü–æ–≤–æ—Ä–æ—Ç SkyBox** –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–∞–º–µ—Ä—ã
4. **–≠–∫—Å–ø–æ–∑–∏—Ü–∏—è SkyBox** –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ—Å–≤–µ—â–µ–Ω–∏—è

### –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –µ—Å—Ç—å ‚úÖ

---

## üí° –í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´

### ‚ö†Ô∏è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- SkyBox —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
- –î–ª—è —Å–ª–∞–±—ã—Ö GPU –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `iblEnabled = false`

### ‚ö†Ô∏è HDR —Ñ–∞–π–ª—ã:
- `assets/hdr/studio.hdr` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (~4MB)
- Fallback –∫ `assets/studio_small_09_2k.hdr` –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–µ –Ω–∞–π–¥–µ–Ω
- –ë–µ–∑ HDR –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ–π —Ü–≤–µ—Ç (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:
- –ù–µ—Ç —Ä—ã–≤–∫–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
- –ü–ª–∞–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback

---

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

**–¢–ï–ü–ï–†–¨ –ü–†–ò–õ–û–ñ–ï–ù–ò–ï –ü–û–ö–ê–ó–´–í–ê–ï–¢ –ü–û–õ–ù–û–¶–ï–ù–ù–û–ï HDR –û–ö–†–£–ñ–ï–ù–ò–ï!**

- ‚úÖ SkyBox —Ñ–æ–Ω –∏–∑ HDR —Ñ–∞–π–ª–∞
- ‚úÖ IBL –æ—Å–≤–µ—â–µ–Ω–∏–µ –æ—Ç —Ç–æ–≥–æ –∂–µ HDR
- ‚úÖ Fallback –∫ –ø—Ä–æ—Å—Ç–æ–º—É —Ü–≤–µ—Ç—É –µ—Å–ª–∏ –Ω–µ—Ç HDR
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GraphicsPanel
- ‚úÖ –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**–í–µ—Ä—Å–∏—è v4.8 –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-01-09*  
*PneumoStabSim Professional - IBL SkyBox Background v4.8*
