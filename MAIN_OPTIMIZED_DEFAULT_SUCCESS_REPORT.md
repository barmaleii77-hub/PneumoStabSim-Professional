# –£–°–ü–ï–®–ù–û: main_optimized.qml –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ 1. –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ `main_window.py`

**–ë–´–õ–û:**
- `main.qml` –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å IBL)
- `main_optimized.qml` –∑–∞–≥—Ä—É–∂–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `--force-optimized`

**–°–¢–ê–õ–û:**
- `main_optimized.qml` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è v4.3+)
- `main.qml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º

### ‚úÖ 2. –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ `app.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `2.1.0` ‚Üí `4.1.0`
- –ù–∞–∑–≤–∞–Ω–∏–µ: `"Extended with IBL v2.1"` ‚Üí `"Optimized v4.1+ by default"`
- –°–æ–æ–±—â–µ–Ω–∏—è: –¢–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —á—Ç–æ `main_optimized.qml` –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª

### ‚úÖ 3. –û–±–Ω–æ–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞ –≤ `MainWindow`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `"–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è v4.1+ –û–°–ù–û–í–ù–ê–Ø"`
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞

## üîç –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ main_optimized.qml

### –ê–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞:
- **–í–µ—Ä—Å–∏—è:** v4.3 (–ò–°–ü–†–ê–í–õ–ï–ù–û: ExtendedSceneEnvironment + —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **–†–∞–∑–º–µ—Ä:** 57KB+ (–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- **IBL –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** ‚úÖ –ü–æ–ª–Ω–∞—è —Å IblProbeLoader –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
- **ExtendedSceneEnvironment:** ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ SceneEnvironment
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–µ–ª–æ–º–ª–µ–Ω–∏—è:** ‚úÖ `glassIOR` —Å–≤–æ–π—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ GraphicsPanel:** ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```javascript
‚úÖ updateGeometry()          - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏
‚úÖ updateMaterials()         - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (–≤–∫–ª—é—á–∞—è IOR)
‚úÖ updateLighting()          - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏—è
‚úÖ updateEffects()           - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
‚úÖ updateEnvironment()       - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è IBL)
‚úÖ updateQuality()           - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞
‚úÖ updateCamera()            - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
‚úÖ applyBatchedUpdates()     - –ü–∞–∫–µ—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚úÖ resolvedTonemapMode()     - –†–µ–∂–∏–º—ã —Ç–æ–Ω–µ–º–∞–ø–ø–∏–Ω–≥–∞
```

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ IBL —Å–∏—Å—Ç–µ–º—ã:
```javascript
‚úÖ IblProbeLoader –∫–æ–º–ø–æ–Ω–µ–Ω—Ç     - –ó–∞–≥—Ä—É–∑–∫–∞ HDR —Ç–µ–∫—Å—Ç—É—Ä
‚úÖ iblEnabled —Å–≤–æ–π—Å—Ç–≤–æ         - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ IBL
‚úÖ iblIntensity —Å–≤–æ–π—Å—Ç–≤–æ       - –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å IBL
‚úÖ iblTextureReady —Å–≤–æ–π—Å—Ç–≤–æ    - –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç—É—Ä—ã
‚úÖ ExtendedSceneEnvironment    - –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
```

### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã:
```javascript
‚úÖ glassIOR: 1.52             - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–µ–ª–æ–º–ª–µ–Ω–∏—è —Å—Ç–µ–∫–ª–∞
‚úÖ metalRoughness: 0.28       - –®–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å –º–µ—Ç–∞–ª–ª–∞
‚úÖ bloomEnabled: true         - –≠—Ñ—Ñ–µ–∫—Ç Bloom
‚úÖ ssaoEnabled: true          - Ambient Occlusion
‚úÖ vignetteEnabled: true      - –í–∏–Ω—å–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ tonemapEnabled: true       - –¢–æ–Ω–µ–º–∞–ø–ø–∏–Ω–≥
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```
python app.py              ‚Üí –ó–∞–≥—Ä—É–∂–∞–ª—Å—è main.qml (Extended with IBL v2.1)
python app.py --force-optimized ‚Üí –ó–∞–≥—Ä—É–∂–∞–ª—Å—è main_optimized.qml
```

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```
python app.py              ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è main_optimized.qml v4.3+ (–û–°–ù–û–í–ù–û–ô)
python app.py --force-optimized ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è main_optimized.qml v4.3+ (–ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û)
```

### Fallback –ª–æ–≥–∏–∫–∞:
- –ï—Å–ª–∏ `main_optimized.qml` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí Fallback –∫ `main.qml`
- –ï—Å–ª–∏ –æ–±–∞ —Ñ–∞–π–ª–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞ —Å –æ—à–∏–±–∫–æ–π

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** main_optimized.qml –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ GraphicsPanel
4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ fallback –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–±–æ–∏
5. **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏

## üöÄ –°—Ç–∞—Ç—É—Å

**‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û**

–¢–µ–ø–µ—Ä—å `main_optimized.qml` v4.3+ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- –ü–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É IBL —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –ø—Ä–µ–ª–æ–º–ª–µ–Ω–∏—è
- –í—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ü–æ–ª–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å GraphicsPanel

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å —Å–∞–º–æ–π –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–µ–π QML —Ñ–∞–π–ª–∞!**
