{
  "metadata": {
    "version": "4.9.8",
    "schema_version": "0.2.1",
    "last_modified": "2025-11-19T11:44:51.413Z",
    "defaults_seed": "config/baseline/app_settings.json",
    "units_version": "si_v2",
    "migrations": ["0001_add_diagnostics_defaults","0002_remove_geometry_mesh_extras"],
    "last_migration": "0002_remove_geometry_mesh_extras",
    "migrated_from": "src/ui/panels/graphics/defaults.py",
    "migration_date": "2025-10-18",
    "total_parameters": 333,
    "description": "FIXED: tonemap_enabled=false, depth_of_field=false, vignette=false по умолчанию",
    "operational_imperatives": [
      "Запрещены дефолты и магические константы в коде — все значения настраиваются через config/app_settings.json.",
      "Все графические параметры управляются пользователем через UI: один параметр — один контрол без скрытых зависимостей.",
      "Сервис настроек не должен изменять файл при первой загрузке; сохранение происходит только по явному запросу пользователя."
    ],
    "geometry_accordion_fields": [
      {"key": "wheelbase", "label": "База (колёсная)", "unit": "м", "settings_path": "current.geometry.wheelbase"},
      {"key": "track", "label": "Колея", "unit": "м", "settings_path": "current.geometry.track"},
      {"key": "lever_length", "label": "Длина рычага", "unit": "м", "settings_path": "current.geometry.lever_length"},
      {"key": "stroke_m", "label": "Ход цилиндра", "unit": "м", "settings_path": "current.geometry.stroke_m"},
      {"key": "cyl_diam_m", "label": "Диаметр поршня", "unit": "м", "settings_path": "current.geometry.cyl_diam_m"},
      {"key": "rod_diameter_m", "label": "Диаметр штока", "unit": "м", "settings_path": "current.geometry.rod_diameter_m"}
    ],
    "pneumatic_volume_accordion_fields": [
      {"key": "receiver_volume", "label": "Объём ресивера", "unit": "м³", "settings_path": "current.pneumatic.receiver_volume"},
      {"key": "receiver_diameter", "label": "Диаметр ресивера", "unit": "м", "settings_path": "current.pneumatic.receiver_diameter"},
      {"key": "receiver_length", "label": "Длина ресивера", "unit": "м", "settings_path": "current.pneumatic.receiver_length"},
      {"key": "dead_zone_head_m3", "label": "Мёртвый объём (головной)", "unit": "м³", "settings_path": "current.pneumatic.dead_zone_head_m3"},
      {"key": "dead_zone_rod_m3", "label": "Мёртвый объём (штоковый)", "unit": "м³", "settings_path": "current.pneumatic.dead_zone_rod_m3"},
      {"key": "chamber_head_m3", "label": "Объём камеры A", "unit": "м³", "settings_path": "current.pneumatic.chamber_volumes.head_m3"},
      {"key": "chamber_rod_m3", "label": "Объём камеры B", "unit": "м³", "settings_path": "current.pneumatic.chamber_volumes.rod_m3"}
    ],
    "pneumatic_pressure_accordion_fields": [
      {"key": "line_pressure_a1_pa", "label": "Давление A1", "unit": "Па", "settings_path": "current.pneumatic.line_pressures.a1_pa"},
      {"key": "line_pressure_b1_pa", "label": "Давление B1", "unit": "Па", "settings_path": "current.pneumatic.line_pressures.b1_pa"},
      {"key": "line_pressure_a2_pa", "label": "Давление A2", "unit": "Па", "settings_path": "current.pneumatic.line_pressures.a2_pa"},
      {"key": "line_pressure_b2_pa", "label": "Давление B2", "unit": "Па", "settings_path": "current.pneumatic.line_pressures.b2_pa"},
      {"key": "tank_pressure_pa", "label": "Давление ресивера", "unit": "Па", "settings_path": "current.pneumatic.tank_pressure_pa"},
      {"key": "relief_pressure_pa", "label": "Клапан сброса", "unit": "Па", "settings_path": "current.pneumatic.relief_pressure_pa"}
    ],
    "pneumatic_valve_accordion_fields": [
      {"key": "cv_atmo_dp", "label": "ΔP атмосферного клапана", "unit": "Па", "settings_path": "current.pneumatic.cv_atmo_dp"},
      {"key": "cv_tank_dp", "label": "ΔP клапана ресивера", "unit": "Па", "settings_path": "current.pneumatic.cv_tank_dp"},
      {"key": "cv_atmo_dia", "label": "Диаметр клапана атмосферы", "unit": "м", "settings_path": "current.pneumatic.cv_atmo_dia"},
      {"key": "cv_tank_dia", "label": "Диаметр клапана ресивера", "unit": "м", "settings_path": "current.pneumatic.cv_tank_dia"},
      {"key": "throttle_min_dia", "label": "Диафрагма (мягкая)", "unit": "м", "settings_path": "current.pneumatic.throttle_min_dia"},
      {"key": "throttle_stiff_dia", "label": "Диафрагма (жёсткая)", "unit": "м", "settings_path": "current.pneumatic.throttle_stiff_dia"},
      {"key": "diagonal_coupling_dia", "label": "Диаметр перемычки", "unit": "м", "settings_path": "current.pneumatic.diagonal_coupling_dia"}
    ],
    "simulation_panel_fields": [
      {"key": "physics_dt", "label": "Шаг расчёта", "unit": "с", "settings_path": "current.simulation.physics_dt"},
      {"key": "sim_speed", "label": "Скорость симуляции", "unit": "x", "settings_path": "current.simulation.sim_speed"},
      {"key": "max_steps_per_frame", "label": "Шагов за кадр", "unit": "шт", "settings_path": "current.simulation.max_steps_per_frame"},
      {"key": "max_frame_time", "label": "Лимит кадра", "unit": "с", "settings_path": "current.simulation.max_frame_time"},
      {"key": "render_vsync_hz", "label": "VSync, Гц", "unit": "Гц", "settings_path": "current.simulation.render_vsync_hz"}
    ],
    "road_panel_fields": [
      {"key": "amplitude", "label": "Амплитуда", "unit": "м", "settings_path": "current.modes.amplitude"},
      {"key": "frequency", "label": "Частота", "unit": "Гц", "settings_path": "current.modes.frequency"},
      {"key": "phase", "label": "Фаза", "unit": "рад", "settings_path": "current.modes.phase"},
      {"key": "profile_avg_speed", "label": "Ср. скорость", "unit": "км/ч", "settings_path": "current.modes.profile_avg_speed"},
      {"key": "road_mode", "label": "Режим дороги", "unit": "id", "settings_path": "current.modes.road_mode"}
    ],
    "advanced_panel_fields": [
      {"key": "spring_constant", "label": "Жёсткость пружины", "unit": "Н/м", "settings_path": "current.physics.suspension.spring_constant"},
      {"key": "damper_coefficient", "label": "Коэф. демпфера", "unit": "Н·с/м", "settings_path": "current.physics.suspension.damper_coefficient"},
      {"key": "dead_zone_percent", "label": "Мёртвая зона", "unit": "%", "settings_path": "current.physics.suspension.dead_zone_percent"},
      {"key": "frame_rate_limit", "label": "Целевой FPS", "unit": "fps", "settings_path": "current.graphics.quality.frame_rate_limit"},
      {"key": "shadow_filter", "label": "Фильтр теней", "unit": "tap", "settings_path": "current.graphics.quality.shadows.filter"}
    ],
    "environment_slider_ranges": {
      "ibl_intensity": {"min": 0.0, "max": 8.0, "step": 0.05},
      "skybox_brightness": {"min": 0.0, "max": 8.0, "step": 0.05},
      "probe_horizon": {"min": -1.0, "max": 1.0, "step": 0.01},
      "skybox_blur": {"min": 0.0, "max": 1.0, "step": 0.01},
      "ibl_rotation": {"min": -1080.0, "max": 1080.0, "step": 1.0},
      "ibl_offset_x": {"min": -180.0, "max": 180.0, "step": 1.0},
      "ibl_offset_y": {"min": -180.0, "max": 180.0, "step": 1.0},
      "reflection_padding_m": {"min": 0.0, "max": 1.0, "step": 0.01, "decimals": 2, "units": "м"},
      "fog_density": {"min": 0.0, "max": 1.0, "step": 0.01},
      "fog_depth_near": {"min": 0.0, "max": 200.0, "step": 0.1, "decimals": 2, "units": "м"},
      "fog_near": {"min": 0.0, "max": 200.0, "step": 0.1, "decimals": 2, "units": "м"},
      "fog_depth_far": {"min": 0.0, "max": 500.0, "step": 0.1, "decimals": 2, "units": "м"},
      "fog_far": {"min": 0.0, "max": 500.0, "step": 0.1, "decimals": 2, "units": "м"},
      "fog_least_intense_y": {"min": -100.0, "max": 100.0, "step": 0.1, "decimals": 2, "units": "м"},
      "fog_most_intense_y": {"min": -100.0, "max": 100.0, "step": 0.1, "decimals": 2, "units": "м"},
      "fog_height_curve": {"min": 0.0, "max": 4.0, "step": 0.05},
      "fog_depth_curve": {"min": 0.0, "max": 4.0, "step": 0.05},
      "fog_transmit_curve": {"min": 0.0, "max": 4.0, "step": 0.05},
      "ao_strength": {"min": 0.0, "max": 100.0, "step": 1.0},
      "ao_radius": {"min": 0.001, "max": 0.1, "step": 0.001, "decimals": 3, "units": "м"},
      "ao_bias": {"min": 0.0, "max": 0.1, "step": 0.001, "decimals": 3},
      "ao_softness": {"min": 0.0, "max": 50.0, "step": 1.0}
    },
    "scene_slider_ranges": {
      "scale_factor": {"min": 0.01, "max": 5.0, "step": 0.01, "decimals": 2},
      "exposure": {"min": 0.0, "max": 32.0, "step": 0.1, "decimals": 2},
      "model_roughness": {"min": 0.0, "max": 1.0, "step": 0.01, "decimals": 2},
      "model_metalness": {"min": 0.0, "max": 1.0, "step": 0.01, "decimals": 2},
      "suspension": {
        "rod_warning_threshold_m": {"min": 0.0001, "max": 0.02, "step": 0.0001, "decimals": 4}
      }
    },
    "scene_defaults": {
      "scale_factor": 1.0,
      "exposure": 1.0,
      "default_clear_color": "#1b1f27",
      "model_base_color": "#9da3aa",
      "model_roughness": 0.42,
      "model_metalness": 0.82,
      "suspension": {
        "rod_warning_threshold_m": 0.001
      }
    },
    "geometry_slider_ranges": {
      "wheelbase": {"min": 2.0, "max": 4.0, "step": 0.001, "decimals": 3},
      "track": {"min": 1.0, "max": 2.5, "step": 0.001, "decimals": 3},
      "frame_to_pivot": {"min": 0.3, "max": 1.0, "step": 0.001, "decimals": 3, "units": "м"},
      "lever_length": {"min": 0.5, "max": 1.5, "step": 0.001, "decimals": 3},
      "rod_position": {"min": 0.3, "max": 0.9, "step": 0.001, "decimals": 3},
      "cylinder_length": {"min": 0.3, "max": 0.8, "step": 0.001, "decimals": 3, "units": "м"},
      "stroke_m": {"min": 0.1, "max": 0.5, "step": 0.001, "decimals": 3},
      "cyl_diam_m": {"min": 0.03, "max": 0.15, "step": 0.001, "decimals": 3},
      "dead_gap_m": {"min": 0.0, "max": 0.02, "step": 0.001, "decimals": 3, "units": "м"},
      "rod_diameter_m": {"min": 0.02, "max": 0.06, "step": 0.001, "decimals": 3},
      "rod_diameter_rear_m": {"min": 0.02, "max": 0.06, "step": 0.001, "decimals": 3},
      "piston_rod_length_m": {"min": 0.1, "max": 0.5, "step": 0.001, "decimals": 3, "units": "м"},
      "piston_thickness_m": {"min": 0.01, "max": 0.05, "step": 0.001, "decimals": 3, "units": "м"}
    },
    "geometry_field_metadata": {
      "wheelbase": {
        "title": "База (колёсная)",
        "units": "м",
        "description": "Расстояние между передней и задней осями",
        "group": "frame"
      },
      "track": {
        "title": "Колея",
        "units": "м",
        "description": "Расстояние между левыми и правыми колёсами",
        "group": "frame"
      },
      "lever_length": {
        "title": "Длина рычага",
        "units": "м",
        "description": "Длина рычага подвески",
        "group": "suspension"
      },
      "frame_to_pivot": {
        "title": "Расстояние рама → ось рычага",
        "units": "м",
        "description": "Расстояние от центра рамы до оси вращения рычага",
        "group": "suspension"
      },
      "rod_position": {
        "title": "Положение крепления штока (доля)",
        "description": "Относительное положение крепления штока на рычаге (0..1)",
        "group": "suspension"
      },
      "cylinder_length": {
        "title": "Длина цилиндра",
        "units": "м",
        "description": "Рабочая длина пневматического цилиндра",
        "group": "cylinder"
      },
      "stroke_m": {
        "title": "Ход поршня",
        "units": "м",
        "description": "Максимальный ход поршня в цилиндре",
        "group": "cylinder"
      },
      "cyl_diam_m": {
        "title": "Диаметр цилиндра",
        "units": "м",
        "description": "Внутренний диаметр цилиндра",
        "group": "cylinder"
      },
      "rod_diameter_m": {
        "title": "Диаметр штока",
        "units": "м",
        "description": "Диаметр штока поршня",
        "group": "cylinder"
      },
      "rod_diameter_rear_m": {
        "title": "Диаметр штока (задний)",
        "units": "м",
        "description": "Диаметр тыльного штока поршня",
        "group": "cylinder"
      },
      "piston_rod_length_m": {
        "title": "Длина штока поршня",
        "units": "м",
        "description": "Рабочая длина штока поршня",
        "group": "cylinder"
      },
      "piston_thickness_m": {
        "title": "Толщина поршня",
        "units": "м",
        "description": "Ширина стенки поршня",
        "group": "cylinder"
      },
      "dead_gap_m": {
        "title": "Мёртвая зона",
        "units": "м",
        "description": "Зазор, не участвующий в ходе поршня",
        "group": "cylinder"
      }
    },
    "legacy": {}
  },
  "current": {
    "geometry": {"wheelbase": 3.413, "track": 2.34, "frame_to_pivot": 0.42, "lever_length": 0.75, "rod_position": 0.34, "cylinder_length": 0.457, "cyl_diam_m": 0.11, "stroke_m": 0.5, "dead_gap_m": 0.009, "rod_diameter_m": 0.035, "rod_diameter_rear_m": 0.035, "piston_rod_length_m": 0.32, "piston_thickness_m": 0.025, "interference_check": true, "link_rod_diameters": false, "frame_height_m": 0.65, "frame_beam_size_m": 0.12, "frame_length_m": 3.4, "cylinder_body_length_m": 0.457, "tail_rod_length_m": 0.18, "meta": {"wheelbase": {"step": 0.002, "decimals": 5, "units": "м"}}, "max_susp_travel": 1.5, "active_preset": "custom"},
    "pneumatic": {"pressure_units": "Па", "volume_mode": "MANUAL", "receiver_volume": 0.02, "receiver_diameter": 0.2, "receiver_length": 0.5, "cv_atmo_dp": 1000.0, "cv_tank_dp": 1000.0, "cv_atmo_dia": 0.003, "cv_tank_dia": 0.003, "relief_min_pressure": 250000.0, "relief_stiff_pressure": 1500000.0, "relief_safety_pressure": 5000000.0, "throttle_min_dia": 0.001, "throttle_stiff_dia": 0.0015, "diagonal_coupling_dia": 0.0031, "atmo_temp": 20.0, "thermo_mode": "ISOTHERMAL", "polytropic_heat_transfer_coeff": 0.0, "polytropic_exchange_area": 0.0, "leak_coefficient": 0.0, "leak_reference_area": 0.0, "master_isolation_open": false, "receiver_volume_limits": {"min_m3": 0.001, "max_m3": 1.0}, "dead_zone_head_m3": 0.0, "dead_zone_rod_m3": 0.0, "chamber_volumes": {"head_m3": 0.0005, "rod_m3": 0.0003}, "line_pressures": {"a1_pa": 150000.0, "b1_pa": 150000.0, "a2_pa": 150000.0, "b2_pa": 150000.0}, "tank_pressure_pa": 200000.0, "relief_pressure_pa": 500000.0},
    "modes": {"sim_type": "KINEMATICS", "mode_preset": "standard", "amplitude": 0.0, "frequency": 0.1, "phase": 0.0, "lf_phase": 0.0, "rf_phase": 0.0, "lr_phase": 0.0, "rr_phase": 0.0, "physics": {"include_springs": true, "include_dampers": true, "include_pneumatics": true, "include_springs_kinematics": true, "include_dampers_kinematics": true, "spring_constant": 50000.0, "damper_coefficient": 2000.0, "lever_inertia_multiplier": 1.0, "damper_force_threshold_n": 50.0, "spring_rest_position_m": 0.0, "integrator_method": "rk4"}, "profile_avg_speed": 60.0, "dead_zone": 0.0, "stabilizer_dead_zone": 0.0, "road_mode": "manual", "thermo_mode": "ADIABATIC", "road_profile": "smooth_highway", "custom_profile_path": "", "check_interference": false, "ambient_temperature_c": 20.0, "smoothing_enabled": true, "smoothing_duration_ms": 1200.0, "smoothing_angle_snap_deg": 65.0, "smoothing_piston_snap_m": 0.05, "smoothing_easing": "OutCubic"},
    "graphics": {"lighting": {"key": {"brightness": 1.0, "color": "#ffffff", "angle_x": 25.0, "angle_y": 23.5, "angle_z": 0.0, "position_x": 0.0, "position_y": 0.0, "position_z": 0.0, "cast_shadow": true, "bind_to_camera": false}}, "environment": {"background_mode": "skybox", "background_color": "#1f242c", "skybox_enabled": true, "ibl_enabled": true, "ibl_intensity": 1.3, "skybox_brightness": 1.0 }, "quality": {"preset": "ultra" }}
  }
}
