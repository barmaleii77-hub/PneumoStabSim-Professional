{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "App Settings Schema",
  "type": "object",
  "definitions": {
    "material": {
      "type": "object",
      "properties": {
        "base_color": {"type": "string"},
        "metalness": {"type": "number"},
        "roughness": {"type": "number"},
        "specular": {"type": "number"},
        "specular_tint": {"type": "string"},
        "opacity": {"type": "number"},
        "clearcoat": {"type": "number"},
        "clearcoat_roughness": {"type": "number"},
        "transmission": {"type": "number"},
        "ior": {"type": "number"},
        "thickness": {"type": "number"},
        "attenuation_distance": {"type": "number"},
        "attenuation_color": {"type": "string"},
        "emissive_color": {"type": "string"},
        "emissive_intensity": {"type": "number"},
        "normal_strength": {"type": "number"},
        "occlusion_amount": {"type": "number"},
        "alpha_mode": {"type": "string"},
        "alpha_cutoff": {"type": "number"},
        "id": {"type": "string"}
      },
      "required": [
        "base_color",
        "metalness",
        "roughness",
        "specular",
        "specular_tint",
        "opacity",
        "clearcoat",
        "clearcoat_roughness",
        "transmission",
        "ior",
        "thickness",
        "attenuation_distance",
        "attenuation_color",
        "emissive_color",
        "emissive_intensity",
        "normal_strength",
        "occlusion_amount",
        "alpha_mode",
        "alpha_cutoff",
        "id"
      ],
      "additionalProperties": false
    }
  },
  "properties": {
    "current": {
      "type": "object",
      "properties": {
        "geometry": {
          "type": "object",
          "properties": {
            "wheelbase": {
              "type": "number"
            },
            "track": {
              "type": "number"
            },
            "frame_to_pivot": {
              "type": "number"
            },
            "lever_length": {
              "type": "number"
            },
            "rod_position": {
              "type": "number"
            },
            "cylinder_length": {
              "type": "number"
            },
            "cyl_diam_m": {
              "type": "number"
            },
            "stroke_m": {
              "type": "number"
            },
            "dead_gap_m": {
              "type": "number"
            },
            "rod_diameter_m": {
              "type": "number"
            },
            "piston_rod_length_m": {
              "type": "number"
            },
            "piston_thickness_m": {
              "type": "number"
            },
            "interference_check": {
              "type": "boolean"
            },
            "link_rod_diameters": {
              "type": "boolean"
            },
            "frame_height_m": {
              "type": "number"
            },
            "frame_beam_size_m": {
              "type": "number"
            },
            "tail_mount_offset_m": {
              "type": "number"
            },
            "joint_tail_scale": {
              "type": "number"
            },
            "joint_arm_scale": {
              "type": "number"
            },
            "joint_rod_scale": {
              "type": "number"
            },
            "frame_length_m": {
              "type": "number"
            },
            "lever_length_m": {
              "type": "number"
            },
            "cylinder_body_length_m": {
              "type": "number"
            },
            "cylinder_cap_length_m": {
              "type": "number"
            }
          },
          "required": [
            "wheelbase",
            "track",
            "frame_to_pivot",
            "lever_length",
            "rod_position",
            "cylinder_length",
            "cyl_diam_m",
            "stroke_m",
            "dead_gap_m",
            "rod_diameter_m",
            "piston_rod_length_m",
            "piston_thickness_m",
            "interference_check",
            "link_rod_diameters",
            "frame_height_m",
            "frame_beam_size_m",
            "tail_mount_offset_m",
            "joint_tail_scale",
            "joint_arm_scale",
            "joint_rod_scale",
            "frame_length_m",
            "lever_length_m",
            "cylinder_body_length_m",
            "cylinder_cap_length_m"
          ],
          "additionalProperties": false
        },
        "pneumatic": {
          "type": "object",
          "properties": {
            "volume_mode": {
              "type": "string"
            },
            "receiver_volume": {
              "type": "number"
            },
            "receiver_diameter": {
              "type": "number"
            },
            "receiver_length": {
              "type": "number"
            },
            "cv_atmo_dp": {
              "type": "number"
            },
            "cv_tank_dp": {
              "type": "number"
            },
            "cv_atmo_dia": {
              "type": "number"
            },
            "cv_tank_dia": {
              "type": "number"
            },
            "relief_min_pressure": {
              "type": "number"
            },
            "relief_stiff_pressure": {
              "type": "number"
            },
            "relief_safety_pressure": {
              "type": "number"
            },
            "throttle_min_dia": {
              "type": "number"
            },
            "throttle_stiff_dia": {
              "type": "number"
            },
            "atmo_temp": {
              "type": "number"
            },
            "thermo_mode": {
              "type": "string"
            },
            "master_isolation_open": {
              "type": "boolean"
            },
            "link_rod_dia": {
              "type": "boolean"
            },
            "pressure_units": {
              "type": "string"
            },
            "receiver_volume_limits": {
              "type": "object",
              "properties": {
                "min_m3": {
                  "type": "number"
                },
                "max_m3": {
                  "type": "number"
                }
              },
              "required": [
                "min_m3",
                "max_m3"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "volume_mode",
            "receiver_volume",
            "receiver_diameter",
            "receiver_length",
            "cv_atmo_dp",
            "cv_tank_dp",
            "cv_atmo_dia",
            "cv_tank_dia",
            "relief_min_pressure",
            "relief_stiff_pressure",
            "relief_safety_pressure",
            "throttle_min_dia",
            "throttle_stiff_dia",
            "atmo_temp",
            "thermo_mode",
            "master_isolation_open",
            "link_rod_dia",
            "pressure_units",
            "receiver_volume_limits"
          ],
          "additionalProperties": false
        },
        "modes": {
          "type": "object",
          "properties": {
            "sim_type": {
              "type": "string"
            },
            "thermo_mode": {
              "type": "string"
            },
            "mode_preset": {
              "type": "string"
            },
            "amplitude": {
              "type": "number"
            },
            "frequency": {
              "type": "number"
            },
            "phase": {
              "type": "number"
            },
            "lf_phase": {
              "type": "number"
            },
            "rf_phase": {
              "type": "number"
            },
            "lr_phase": {
              "type": "number"
            },
            "rr_phase": {
              "type": "number"
            },
            "physics": {
              "type": "object",
              "properties": {
                "include_springs": {
                  "type": "boolean"
                },
                "include_dampers": {
                  "type": "boolean"
                },
                "include_pneumatics": {
                  "type": "boolean"
                }
              },
              "required": [
                "include_springs",
                "include_dampers",
                "include_pneumatics"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "sim_type",
            "thermo_mode",
            "mode_preset",
            "amplitude",
            "frequency",
            "phase",
            "lf_phase",
            "rf_phase",
            "lr_phase",
            "rr_phase",
            "physics"
          ],
          "additionalProperties": false
        },
        "graphics": {
          "type": "object",
          "properties": {
            "lighting": {
              "type": "object",
              "properties": {
                "key": {
                  "type": "object",
                  "properties": {
                    "brightness": {"type": "number"},
                    "color": {"type": "string"},
                    "angle_x": {"type": "number"},
                    "angle_y": {"type": "number"},
                    "angle_z": {"type": "number"}
                  },
                  "required": [
                    "brightness",
                    "color",
                    "angle_x",
                    "angle_y",
                    "angle_z"
                  ],
                  "additionalProperties": false
                },
                "fill": {
                  "type": "object",
                  "properties": {
                    "brightness": {"type": "number"},
                    "color": {"type": "string"},
                    "angle_x": {"type": "number"},
                    "angle_y": {"type": "number"},
                    "angle_z": {"type": "number"},
                    "position_x": {"type": "number"}
                  },
                  "required": [
                    "brightness",
                    "color",
                    "angle_x",
                    "angle_y",
                    "angle_z"
                  ],
                  "additionalProperties": false
                },
                "rim": {
                  "type": "object",
                  "properties": {
                    "brightness": {"type": "number"},
                    "color": {"type": "string"},
                    "angle_x": {"type": "number"},
                    "angle_y": {"type": "number"},
                    "angle_z": {"type": "number"}
                  },
                  "required": [
                    "brightness",
                    "color",
                    "angle_x",
                    "angle_y",
                    "angle_z"
                  ],
                  "additionalProperties": false
                },
                "point": {
                  "type": "object",
                  "properties": {
                    "brightness": {"type": "number"},
                    "color": {"type": "string"},
                    "position_y": {"type": "number"},
                    "range": {"type": "number"},
                    "quadratic_fade": {"type": "number"}
                  },
                  "required": [
                    "brightness",
                    "color",
                    "position_y",
                    "range",
                    "quadratic_fade"
                  ],
                  "additionalProperties": false
                },
                "spot": {
                  "type": "object",
                  "properties": {
                    "brightness": {"type": "number"},
                    "color": {"type": "string"},
                    "position_y": {"type": "number"},
                    "range": {"type": "number"},
                    "cone_angle": {"type": "number"},
                    "inner_cone_angle": {"type": "number"},
                    "angle_x": {"type": "number"},
                    "angle_y": {"type": "number"},
                    "position_x": {"type": "number"},
                    "position_z": {"type": "number"},
                    "angle_z": {"type": "number"}
                  },
                  "required": [
                    "brightness",
                    "color",
                    "position_y",
                    "range",
                    "cone_angle",
                    "inner_cone_angle",
                    "angle_x",
                    "angle_y",
                    "position_x",
                    "position_z",
                    "angle_z"
                  ],
                  "additionalProperties": false
                }
              },
              "required": [
                "key",
                "fill",
                "rim",
                "point",
                "spot"
              ],
              "additionalProperties": false
            },
            "environment": {
              "type": "object",
              "properties": {
                "background_mode": {"type": "string"},
                "background_color": {"type": "string"},
                "skybox_enabled": {"type": "boolean"},
                "ibl_enabled": {"type": "boolean"},
                "ibl_intensity": {"type": "number"},
                "probe_brightness": {"type": "number"},
                "probe_horizon": {"type": "number"},
                "ibl_rotation": {"type": "number"},
                "ibl_source": {"type": "string"},
                "ibl_fallback": {"type": "string"},
                "skybox_blur": {"type": "number"},
                "ibl_offset_x": {"type": "number"},
                "ibl_offset_y": {"type": "number"},
                "ibl_bind_to_camera": {"type": "boolean"},
                "reflection_enabled": {"type": "boolean"},
                "reflection_padding_m": {"type": "number"},
                "reflection_quality": {"type": "string"},
                "reflection_refresh_mode": {"type": "string"},
                "reflection_time_slicing": {"type": "string"},
                "fog_enabled": {"type": "boolean"},
                "fog_color": {"type": "string"},
                "fog_density": {"type": "number"},
                "fog_near": {"type": "number"},
                "fog_far": {"type": "number"},
                "fog_height_enabled": {"type": "boolean"},
                "fog_least_intense_y": {"type": "number"},
                "fog_most_intense_y": {"type": "number"},
                "fog_height_curve": {"type": "number"},
                "fog_transmit_enabled": {"type": "boolean"},
                "fog_transmit_curve": {"type": "number"},
                "ao_enabled": {"type": "boolean"},
                "ao_strength": {"type": "number"},
                "ao_radius": {"type": "number"},
                "ao_softness": {"type": "number"},
                "ao_dither": {"type": "boolean"},
                "ao_sample_rate": {"type": "integer"}
              },
              "required": [
                "background_mode",
                "background_color",
                "skybox_enabled",
                "ibl_enabled",
                "ibl_intensity",
                "probe_brightness",
                "probe_horizon",
                "ibl_rotation",
                "ibl_source",
                "ibl_fallback",
                "skybox_blur",
                "ibl_offset_x",
                "ibl_offset_y",
                "ibl_bind_to_camera",
                "reflection_enabled",
                "reflection_padding_m",
                "reflection_quality",
                "reflection_refresh_mode",
                "reflection_time_slicing",
                "fog_enabled",
                "fog_color",
                "fog_density",
                "fog_near",
                "fog_far",
                "fog_height_enabled",
                "fog_least_intense_y",
                "fog_most_intense_y",
                "fog_height_curve",
                "fog_transmit_enabled",
                "fog_transmit_curve",
                "ao_enabled",
                "ao_strength",
                "ao_radius",
                "ao_softness",
                "ao_dither",
                "ao_sample_rate"
              ],
              "additionalProperties": false
            },
            "quality": {
              "type": "object",
              "properties": {
                "preset": {"type": "string"},
                "shadows": {
                  "type": "object",
                  "properties": {
                    "enabled": {"type": "boolean"},
                    "resolution": {"type": "string"},
                    "filter": {"type": "number"},
                    "bias": {"type": "number"},
                    "darkness": {"type": "number"}
                  },
                  "required": [
                    "enabled",
                    "resolution",
                    "filter",
                    "bias",
                    "darkness"
                  ],
                  "additionalProperties": false
                },
                "antialiasing": {
                  "type": "object",
                  "properties": {
                    "primary": {"type": "string"},
                    "quality": {"type": "string"},
                    "post": {"type": "string"}
                  },
                  "required": [
                    "primary",
                    "quality",
                    "post"
                  ],
                  "additionalProperties": false
                },
                "taa_enabled": {"type": "boolean"},
                "taa_strength": {"type": "number"},
                "taa_motion_adaptive": {"type": "boolean"},
                "fxaa_enabled": {"type": "boolean"},
                "specular_aa": {"type": "boolean"},
                "dithering": {"type": "boolean"},
                "render_scale": {"type": "number"},
                "render_policy": {"type": "string"},
                "frame_rate_limit": {"type": "number"},
                "oit": {"type": "string"},
                "mesh": {
                  "type": "object",
                  "properties": {
                    "cylinder_segments": {"type": "integer"},
                    "cylinder_rings": {"type": "integer"}
                  },
                  "required": [
                    "cylinder_segments",
                    "cylinder_rings"
                  ],
                  "additionalProperties": false
                }
              },
              "required": [
                "preset",
                "shadows",
                "antialiasing",
                "taa_enabled",
                "taa_strength",
                "taa_motion_adaptive",
                "fxaa_enabled",
                "specular_aa",
                "dithering",
                "render_scale",
                "render_policy",
                "frame_rate_limit",
                "oit",
                "mesh"
              ],
              "additionalProperties": false
            },
            "camera": {
              "type": "object",
              "properties": {
                "fov": {"type": "number"},
                "near": {"type": "number"},
                "far": {"type": "number"},
                "speed": {"type": "number"},
                "auto_rotate": {"type": "boolean"},
                "auto_rotate_speed": {"type": "number"},
                "auto_fit": {"type": "boolean"},
                "manual_camera": {"type": "boolean"},
                "camera_pos_x": {"type": "number"},
                "camera_pos_y": {"type": "number"},
                "camera_pos_z": {"type": "number"},
                "camera_rot_x": {"type": "number"},
                "camera_rot_y": {"type": "number"},
                "camera_rot_z": {"type": "number"},
                "orbit_target_x": {"type": "number"},
                "orbit_target_y": {"type": "number"},
                "orbit_target_z": {"type": "number"},
                "orbit_yaw": {"type": "number"},
                "orbit_pitch": {"type": "number"},
                "orbit_distance": {"type": "number"},
                "orbit_inertia_enabled": {"type": "boolean"},
                "orbit_inertia": {"type": "number"},
                "orbit_rotate_smoothing": {"type": "number"},
                "orbit_pan_smoothing": {"type": "number"},
                "orbit_zoom_smoothing": {"type": "number"},
                "orbit_friction": {"type": "number"},
                "world_pos_x": {"type": "number"},
                "world_pos_y": {"type": "number"},
                "world_pos_z": {"type": "number"},
                "world_rot_x": {"type": "number"},
                "world_rot_y": {"type": "number"},
                "world_rot_z": {"type": "number"},
                "world_scale": {"type": "number"}
              },
              "required": [
                "fov",
                "near",
                "far",
                "speed",
                "auto_rotate",
                "auto_rotate_speed",
                "auto_fit",
                "manual_camera",
                "camera_pos_x",
                "camera_pos_y",
                "camera_pos_z",
                "camera_rot_x",
                "camera_rot_y",
                "camera_rot_z",
                "orbit_target_x",
                "orbit_target_y",
                "orbit_target_z",
                "orbit_yaw",
                "orbit_pitch",
                "orbit_distance",
                "orbit_inertia_enabled",
                "orbit_inertia",
                "orbit_rotate_smoothing",
                "orbit_pan_smoothing",
                "orbit_zoom_smoothing",
                "orbit_friction",
                "world_pos_x",
                "world_pos_y",
                "world_pos_z",
                "world_rot_x",
                "world_rot_y",
                "world_rot_z",
                "world_scale"
              ],
              "additionalProperties": false
            },
            "materials": {
              "type": "object",
              "properties": {
                "frame": {"$ref": "#/definitions/material"},
                "lever": {"$ref": "#/definitions/material"},
                "tail": {"$ref": "#/definitions/material"},
                "tail_rod": {"$ref": "#/definitions/material"},
                "cylinder": {"$ref": "#/definitions/material"},
                "piston_body": {"$ref": "#/definitions/material"},
                "piston_rod": {"$ref": "#/definitions/material"},
                "joint_tail": {"$ref": "#/definitions/material"},
                "joint_arm": {"$ref": "#/definitions/material"},
                "joint_rod": {"$ref": "#/definitions/material"}
              },
              "required": [
                "frame",
                "lever",
                "cylinder",
                "piston_body",
                "piston_rod",
                "joint_tail",
                "joint_arm",
                "joint_rod"
              ],
              "allOf": [
                {
                  "anyOf": [
                    {"required": ["tail_rod"]},
                    {"required": ["tail"]}
                  ]
                }
              ],
              "additionalProperties": false
            },
            "effects": {
              "type": "object",
              "properties": {
                "bloom_enabled": {"type": "boolean"},
                "bloom_intensity": {"type": "number"},
                "bloom_threshold": {"type": "number"},
                "bloom_spread": {"type": "number"},
                "bloom_glow_strength": {"type": "number"},
                "bloom_hdr_max": {"type": "number"},
                "bloom_hdr_scale": {"type": "number"},
                "bloom_quality_high": {"type": "boolean"},
                "bloom_bicubic_upscale": {"type": "boolean"},
                "tonemap_enabled": {"type": "boolean"},
                "tonemap_mode": {"type": "string"},
                "tonemap_exposure": {"type": "number"},
                "tonemap_white_point": {"type": "number"},
                "depth_of_field": {"type": "boolean"},
                "dof_focus_distance": {"type": "number"},
                "dof_blur": {"type": "number"},
                "motion_blur": {"type": "boolean"},
                "motion_blur_amount": {"type": "number"},
                "lens_flare": {"type": "boolean"},
                "lens_flare_ghost_count": {"type": "integer"},
                "lens_flare_ghost_dispersal": {"type": "number"},
                "lens_flare_halo_width": {"type": "number"},
                "lens_flare_bloom_bias": {"type": "number"},
                "lens_flare_stretch_to_aspect": {"type": "boolean"},
                "vignette": {"type": "boolean"},
                "vignette_strength": {"type": "number"},
                "vignette_radius": {"type": "number"},
                "adjustment_brightness": {"type": "number"},
                "adjustment_contrast": {"type": "number"},
                "adjustment_saturation": {"type": "number"}
              },
              "required": [
                "bloom_enabled",
                "bloom_intensity",
                "bloom_threshold",
                "bloom_spread",
                "bloom_glow_strength",
                "bloom_hdr_max",
                "bloom_hdr_scale",
                "bloom_quality_high",
                "bloom_bicubic_upscale",
                "tonemap_enabled",
                "tonemap_mode",
                "tonemap_exposure",
                "tonemap_white_point",
                "depth_of_field",
                "dof_focus_distance",
                "dof_blur",
                "motion_blur",
                "motion_blur_amount",
                "lens_flare",
                "lens_flare_ghost_count",
                "lens_flare_ghost_dispersal",
                "lens_flare_halo_width",
                "lens_flare_bloom_bias",
                "lens_flare_stretch_to_aspect",
                "vignette",
                "vignette_strength",
                "vignette_radius",
                "adjustment_brightness",
                "adjustment_contrast",
                "adjustment_saturation"
              ],
              "additionalProperties": false
            },
            "scene": {
              "type": "object"
            },
            "animation": {
              "type": "object"
            }
          },
          "required": [
            "lighting",
            "environment",
            "quality",
            "camera",
            "materials",
            "effects",
            "scene",
            "animation"
          ],
          "additionalProperties": false
        },
        "lighting": {
          "type": "object"
        },
        "environment": {
          "type": "object"
        },
        "quality": {
          "type": "object"
        },
        "camera": {
          "type": "object"
        },
        "materials": {
          "type": "object"
        },
        "effects": {
          "type": "object"
        },
        "simulation": {
          "type": "object",
          "properties": {
            "physics_dt": {
              "type": "number"
            },
            "render_vsync_hz": {
              "type": "number"
            },
            "max_steps_per_frame": {
              "type": "number"
            },
            "max_frame_time": {
              "type": "number"
            }
          },
          "required": [
            "physics_dt",
            "render_vsync_hz",
            "max_steps_per_frame",
            "max_frame_time"
          ],
          "additionalProperties": false
        },
        "physics": {
          "type": "object",
          "properties": {
            "suspension": {
              "type": "object",
              "properties": {
                "spring_constant": {
                  "type": "number"
                },
                "damper_coefficient": {
                  "type": "number"
                },
                "damper_force_threshold_n": {
                  "type": "number"
                },
                "spring_rest_position_m": {
                  "type": "number"
                },
                "cylinder_head_area_m2": {
                  "type": "number"
                },
                "cylinder_rod_area_m2": {
                  "type": "number"
                },
                "axis_unit_world": {
                  "type": "array",
                  "items": {
                    "type": "number"
                  },
                  "minItems": 3,
                  "maxItems": 3
                }
              },
              "required": [
                "spring_constant",
                "damper_coefficient",
                "damper_force_threshold_n",
                "spring_rest_position_m",
                "cylinder_head_area_m2",
                "cylinder_rod_area_m2",
                "axis_unit_world"
              ],
              "additionalProperties": false
            },
            "reference_axes": {
              "type": "object",
              "properties": {
                "vertical_world": {
                  "type": "array",
                  "items": {
                    "type": "number"
                  },
                  "minItems": 3,
                  "maxItems": 3
                }
              },
              "required": [
                "vertical_world"
              ],
              "additionalProperties": false
            },
            "validation": {
              "type": "object",
              "properties": {
                "max_force_n": {
                  "type": "number"
                },
                "max_moment_n_m": {
                  "type": "number"
                }
              },
              "required": [
                "max_force_n",
                "max_moment_n_m"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "suspension",
            "reference_axes",
            "validation"
          ],
          "additionalProperties": false
        },
        "quality_presets": {
          "type": "object"
        },
        "constants": {
          "type": "object"
        },
        "diagnostics": {
          "type": "object"
        },
        "system": {
          "type": "object"
        }
      },
      "required": [
        "constants",
        "diagnostics",
        "geometry",
        "graphics",
        "modes",
        "physics",
        "pneumatic",
        "quality_presets",
        "simulation",
        "system"
      ],
      "additionalProperties": false
    },
    "defaults_snapshot": {
      "type": "object"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string"
        },
        "last_modified": {
          "type": "string"
        },
        "migrated_from": {
          "type": "string"
        },
        "migration_date": {
          "type": "string"
        },
        "total_parameters": {
          "type": "number"
        },
        "description": {
          "type": "string"
        },
        "units_version": {
          "type": "string"
        },
        "schema_version": {
          "type": "string"
        },
        "migrations": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "last_migration": {
          "type": "string"
        },
        "operational_imperatives": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "version",
        "schema_version",
        "last_modified",
        "migrated_from",
        "migration_date",
        "last_migration",
        "migrations",
        "total_parameters",
        "description",
        "units_version",
        "operational_imperatives"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "current",
    "defaults_snapshot",
    "metadata"
  ],
  "additionalProperties": false
}
