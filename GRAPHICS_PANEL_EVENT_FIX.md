# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–û–ë–´–¢–ò–ô –ì–†–ê–§–ò–ß–ï–°–ö–û–ô –ü–ê–ù–ï–õ–ò

**–î–∞—Ç–∞**: 2024-12-15
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `src/ui/panels/panel_graphics.py`
**–ü—Ä–æ–±–ª–µ–º–∞**: RuntimeWarning –ø—Ä–∏ disconnect() —Å–∏–≥–Ω–∞–ª–æ–≤

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–†–∞–Ω–µ–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏—Å—å –ø—Ä–∏ **–∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –≤–∏–¥–∂–µ—Ç–æ–≤** (`stateChanged`, `valueChanged`), —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ:

1. **–î–≤–æ–π–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ**: –ø—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ UI + –ø—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –¥–µ–π—Å—Ç–≤–∏–∏
2. **RuntimeWarning**: "Failed to disconnect (None) from signal" –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ disconnect —É–∂–µ –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
3. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Å–æ–±—ã—Ç–∏–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–æ—Å—å –¥–∞–∂–µ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª —Å UI

### –ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏

```
RuntimeWarning: Failed to disconnect (None) from signal "stateChanged(int)".
  enabled.stateChanged.disconnect()
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **ColorButton: –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `_user_triggered`**

**–ë—ã–ª–æ**:
```python
def _on_color_changed(self, color: QColor) -> None:
    self._color = color
    self._update_swatch()
    self.color_changed.emit(color.name())  # ‚ùå –í—Å–µ–≥–¥–∞ –∏—Å–ø—É—Å–∫–∞–µ—Ç
```

**–°—Ç–∞–ª–æ**:
```python
def _open_dialog(self) -> None:
    self._user_triggered = True  # ‚úÖ –§–ª–∞–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
    # ...

def _on_color_changed(self, color: QColor) -> None:
    self._color = color
    self._update_swatch()
    # ‚úÖ –ò—Å–ø—É—Å–∫–∞–µ–º –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–ª –¥–∏–∞–ª–æ–≥
    if self._user_triggered:
        self.color_changed.emit(color.name())

def _close_dialog(self) -> None:
    # ...
    self._user_triggered = False  # ‚úÖ –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥
```

---

### 2. **LabeledSlider: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∂–µ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

**–ë—ã–ª–æ**:
```python
def _handle_slider(self, slider_value: int) -> None:
    # ...
    self.valueChanged.emit(value)  # ‚ùå –í—Å–µ–≥–¥–∞ –∏—Å–ø—É—Å–∫–∞–µ—Ç
```

**–°—Ç–∞–ª–æ**:
```python
def __init__(self, ...):
    self._user_triggered = False

    # ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ù–ê–ß–ê–õ–û –∏ –ö–û–ù–ï–¶ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
    self._slider.sliderPressed.connect(self._on_slider_pressed)
    self._slider.sliderReleased.connect(self._on_slider_released)

    # ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Ñ–æ–∫—É—Å –≤ SpinBox
    self._spin.installEventFilter(self)

def _on_slider_pressed(self) -> None:
    self._user_triggered = True  # ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–≤–∏–≥–∞–µ—Ç —Å–ª–∞–π–¥–µ—Ä

def _on_slider_released(self) -> None:
    self._user_triggered = False  # ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—É—Å—Ç–∏–ª —Å–ª–∞–π–¥–µ—Ä

def _handle_slider(self, slider_value: int) -> None:
    # ...
    # ‚úÖ –ò—Å–ø—É—Å–∫–∞–µ–º –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–≤–∏–≥–∞–µ—Ç —Å–ª–∞–π–¥–µ—Ä
    if self._user_triggered:
        self.valueChanged.emit(value)
```

---

### 3. **QCheckBox: `stateChanged` ‚Üí `clicked`**

**–ë—ã–ª–æ (‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û)**:
```python
enabled = QCheckBox("–í–∫–ª—é—á–∏—Ç—å —Ç—É–º–∞–Ω", self)
enabled.stateChanged.connect(lambda state: self._update_environment("fog_enabled", state == Qt.Checked))
```

**–ü—Ä–æ–±–ª–µ–º–∞**: `stateChanged` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏:
- ‚úÖ –ö–ª–∏–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ùå –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ `setChecked()`
- ‚ùå –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ QSettings
- ‚ùå –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–µ—Å–µ—Ç–æ–≤

**–°—Ç–∞–ª–æ (‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û)**:
```python
enabled = QCheckBox("–í–∫–ª—é—á–∏—Ç—å —Ç—É–º–∞–Ω", self)
enabled.clicked.connect(lambda checked: self._update_environment("fog_enabled", checked))
```

**–ü–æ—á–µ–º—É**: `clicked` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–¢–û–õ–¨–ö–û** –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º—ã—à—å—é/–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π.

---

## üéØ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
|-----------|----------------|
| `ColorButton` | –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `_user_triggered` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫–µ |
| `LabeledSlider` | –î–æ–±–∞–≤–ª–µ–Ω—ã `sliderPressed`/`sliderReleased` + eventFilter –¥–ª—è SpinBox |
| **–í—Å–µ QCheckBox** | –ó–∞–º–µ–Ω–∞ `stateChanged` ‚Üí `clicked` |

### –°–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö QCheckBox

1. `ibl.enabled` - –í–∫–ª—é—á–∏—Ç—å HDR IBL
2. `fog.enabled` - –í–∫–ª—é—á–∏—Ç—å —Ç—É–º–∞–Ω
3. `ao.enabled` - –í–∫–ª—é—á–∏—Ç—å SSAO
4. `shadows.enabled` - –í–∫–ª—é—á–∏—Ç—å —Ç–µ–Ω–∏
5. `taa.enabled` - –í–∫–ª—é—á–∏—Ç—å TAA
6. `taa_motion_adaptive` - –û—Ç–∫–ª—é—á–∞—Ç—å TAA –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
7. `fxaa.enabled` - –í–∫–ª—é—á–∏—Ç—å FXAA
8. `specular.enabled` - Specular AA
9. `oit.enabled` - Weighted OIT
10. `auto_rotate` - –ê–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç –∫–∞–º–µ—Ä—ã
11. `bloom.enabled` - –í–∫–ª—é—á–∏—Ç—å Bloom
12. `tonemap.enabled` - –í–∫–ª—é—á–∏—Ç—å —Ç–æ–Ω–µ–º–∞–ø–ø–∏–Ω–≥
13. `dof.enabled` - –í–∫–ª—é—á–∏—Ç—å DoF
14. `motion.enabled` - –†–∞–∑–º—ã—Ç–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
15. `lens_flare.enabled` - –õ–∏–Ω–∑–æ–≤—ã–µ –±–ª–∏–∫–∏
16. `vignette.enabled` - –í–∏–Ω—å–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚ùå RuntimeWarning –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ UI
- ‚ùå –î–≤–æ–π–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ + –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ)
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö RuntimeWarning
- ‚úÖ –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –¢–û–õ–¨–ö–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ –ß–∏—Å—Ç—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ–±—ã—Ç–∏–π –≤ `analyze_event_sync.py`
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Python‚ÜîQML —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python app.py
```

1. –ü–æ–¥–≤–∏–≥–∞–π—Ç–µ —Å–ª–∞–π–¥–µ—Ä—ã
2. –ü–æ–∫–ª–∏–∫–∞–π—Ç–µ —á–µ–∫–±–æ–∫—Å—ã
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç–∞ –≤ ColorButton
4. –ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥:
```
============================================================
üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –õ–û–ì–û–í –ò –°–û–ë–´–¢–ò–ô
============================================================

üîó –ê–Ω–∞–ª–∏–∑ —Å–æ–±—ã—Ç–∏–π Python‚ÜîQML...
   –ü—Ä–æ—Ü–µ–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: 97.8%  ‚Üê ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >95%

   ‚ö†Ô∏è  –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è  ‚Üê ‚ùå –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 0
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/ui/panels/panel_graphics.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
- `GRAPHICS_PANEL_EVENT_FIX.md` - —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
- `COMPREHENSIVE_EVENT_LOGGING_FINAL.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

**–ê–≤—Ç–æ—Ä**: GitHub Copilot
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
