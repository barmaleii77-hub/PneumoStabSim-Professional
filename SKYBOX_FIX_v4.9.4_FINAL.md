# Skybox Rotation Fix v4.9.4 - –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- Skybox (—Ñ–æ–Ω) —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 180¬∞ –¥–≤–∞–∂–¥—ã –∑–∞ –ø–æ–ª–Ω—ã–π –æ–±–æ—Ä–æ—Ç –∫–∞–º–µ—Ä—ã (–ø—Ä–∏ 0¬∞ –∏ 180¬∞)
- –§–æ–Ω "—Ñ–ª–∏–ø–∞–µ—Ç—Å—è" –∏–ª–∏ "–ø—Ä—ã–≥–∞–µ—Ç" –ø—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –≥—Ä–∞–Ω–∏—Ü —É–≥–ª–æ–≤
- –§–æ–Ω –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –≤—Ä–∞—â–µ–Ω–∏–µ–º –∫–∞–º–µ—Ä—ã

## ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ–ø—ã—Ç–∫–∞ #1: –ü—Ä—è–º–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ `yawDeg`
```qml
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
probeOrientation: Qt.vector3d(0, cameraYawNorm, 0)
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —á–µ—Ä–µ–∑ –≥—Ä–∞–Ω–∏—Ü—É (359¬∞ ‚Üí 0¬∞), Qt –±–µ—Ä–µ—Ç –∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å –∏ –¥–µ–ª–∞–µ—Ç flip –Ω–∞ 180¬∞.

### –ü–æ–ø—ã—Ç–∫–∞ #2: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ —É–≥–ª–∞ `envYaw`
```qml
// ‚ùå –¢–û–ñ–ï –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
property real envYaw: 0
function updateCameraYaw(newYawDeg) {
    var delta = _shortestDeltaDeg(_prevCameraYaw, newYawDeg)
    envYaw = _norm360(envYaw + delta)  // ‚Üê –°–≤—è–∑—ã–≤–∞–µ—Ç —Ñ–æ–Ω —Å –∫–∞–º–µ—Ä–æ–π!
    yawDeg = newYawDeg
}
probeOrientation: Qt.vector3d(0, root.envYaw, 0)  // ‚Üê –§–æ–Ω –≤—Ä–∞—â–∞–µ—Ç—Å—è —Å –∫–∞–º–µ—Ä–æ–π
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –•–æ—Ç—å —ç—Ç–æ –∏ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç flip, –Ω–æ **—Ñ–æ–Ω –≤—Å–µ –µ—â–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–∞–º–µ—Ä–µ**! –§–æ–Ω —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –º–æ–¥–µ–ª–∏, –Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è.

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ v4.9.4

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

**Skybox –ù–ï –¥–æ–ª–∂–µ–Ω –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∫–∞–º–µ—Ä—ã –í–û–û–ë–©–ï!**

Skybox - —ç—Ç–æ —Ñ–æ–Ω **–º–∏—Ä–æ–≤–æ–π —Å—Ü–µ–Ω—ã**, –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –≤ –º–∏—Ä–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ**. –ö–∞–º–µ—Ä–∞ –º–æ–∂–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ –≤—Ä–∞—â–∞—Ç—å—Å—è –≤–æ–∫—Ä—É–≥, –Ω–æ —Ñ–æ–Ω –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ —è–≤–Ω–æ —á–µ—Ä–µ–∑ `iblRotationDeg`).

### –ö–æ–¥ —Ä–µ—à–µ–Ω–∏—è

```qml
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: Skybox –≤—Ä–∞—â–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
probeOrientation: Qt.vector3d(0, root.iblRotationDeg, 0)

// –ö–∞–º–µ—Ä–∞ –≤—Ä–∞—â–∞–µ—Ç—Å—è –ù–ï–ó–ê–í–ò–°–ò–ú–û
camera: PerspectiveCamera {
    eulerRotation.x: root.cameraPitch
    eulerRotation.y: root.yawDeg  // ‚Üê –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ skybox!
}

// Mouse controls - –ø—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ yawDeg
onPositionChanged: (mouse) => {
    if (root.mouseButton === Qt.LeftButton) {
        root.yawDeg = root.normAngleDeg(root.yawDeg - dx * root.rotateSpeed)
        // ‚Üê Skybox –ù–ï —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
    }
}
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `iblRotationDeg`?

`iblRotationDeg` - —ç—Ç–æ **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π** –ø–∞—Ä–∞–º–µ—Ç—Ä (—Å–ª–∞–π–¥–µ—Ä –≤ GraphicsPanel):
- –î–∏–∞–ø–∞–∑–æ–Ω: 0-360¬∞
- –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –ù–ï –∫–∞–º–µ—Ä–æ–π
- –í—Ä–∞—â–∞–µ—Ç **—Ç–æ–ª—å–∫–æ** skybox –∏ IBL –æ—Å–≤–µ—â–µ–Ω–∏–µ
- –ö–∞–º–µ—Ä–∞ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–µ–≥–æ

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ü–æ–¥—Ö–æ–¥ | Skybox –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–∞–º–µ—Ä–µ? | Flip –Ω–∞ 180¬∞? | –ü—Ä–∞–≤–∏–ª—å–Ω–æ? |
|--------|--------------------------|---------------|------------|
| –ü—Ä—è–º–æ–π `yawDeg` | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –ù–ï–¢ |
| –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ `envYaw` | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚ùå –ù–ï–¢ |
| –¢–æ–ª—å–∫–æ `iblRotationDeg` | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–ê! |

## üîß –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ v4.9.4

### –£–¥–∞–ª–µ–Ω–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è):
```qml
// ‚ùå –£–î–ê–õ–ï–ù–û - –±—ã–ª–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
property real envYaw: 0
property real _prevCameraYaw: 0

function _shortestDeltaDeg(a, b) { ... }
function _norm360(a) { ... }
function updateCameraYaw(newYawDeg) { ... }
```

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
```qml
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - skybox –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç –∫–∞–º–µ—Ä—ã
probeOrientation: Qt.vector3d(0, root.iblRotationDeg, 0)

// –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ:
// ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï v4.9.4: Skybox –≤—Ä–∞—â–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –æ—Ç iblRotationDeg
// –ù–ï–¢ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–∞–º–µ—Ä–µ! –ö–∞–º–µ—Ä–∞ –∏ skybox –ù–ï–ó–ê–í–ò–°–ò–ú–´!
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Qt Quick 3D

–ò–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ `SceneEnvironment.probeOrientation`:

> **probeOrientation : vector3d**
> 
> This property defines the orientation of the light probe. Rotation is applied in the order X, Y, Z in degrees.
> 
> Applies to both **IBL lighting** and **SkyBox background**.

**–ö–ª—é—á–µ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ:**
- `probeOrientation` –≤—Ä–∞—â–∞–µ—Ç **–æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ –º–∏—Ä–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ**
- –≠—Ç–æ –ù–ï –¥–æ–ª–∂–Ω–æ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∫–∞–º–µ—Ä—ã (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç)
- –ö–∞–º–µ—Ä–∞ `eulerRotation` –∏ `probeOrientation` - **–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ** –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç v4.9.4

### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå Skybox –≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∫–∞–º–µ—Ä–æ–π
- ‚ùå Flip –Ω–∞ 180¬∞ –¥–≤–∞–∂–¥—ã –∑–∞ –æ–±–æ—Ä–æ—Ç (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ)
- ‚ùå –ù–µ–ª—å–∑—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ–Ω

### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ Skybox **—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω** –≤ –º–∏—Ä–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ
- ‚úÖ –ö–∞–º–µ—Ä–∞ **—Å–≤–æ–±–æ–¥–Ω–æ –≤—Ä–∞—â–∞–µ—Ç—Å—è** –≤–æ–∫—Ä—É–≥ —Å—Ü–µ–Ω—ã
- ‚úÖ –¢–æ–ª—å–∫–æ **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –≤—Ä–∞—â–∞–µ—Ç skybox —á–µ—Ä–µ–∑ `iblRotationDeg` (0-360¬∞)
- ‚úÖ **–ù–∏–∫–∞–∫–∏—Ö** flip'–æ–≤ –∏–ª–∏ —Å–∫–∞—á–∫–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ Qt Quick 3D API

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í—Ä–∞—â–∞—Ç—å –∫–∞–º–µ—Ä—É –º—ã—à—å—é (–õ–ö–ú) –Ω–∞ –ø–æ–ª–Ω—ã–π –∫—Ä—É–≥ (0¬∞ ‚Üí 360¬∞)
3. **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** Skybox –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã–º
4. –ò–∑–º–µ–Ω–∏—Ç—å —Å–ª–∞–π–¥–µ—Ä "IBL Rotation" –≤ GraphicsPanel
5. **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** Skybox –ø–ª–∞–≤–Ω–æ –≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π —É–≥–æ–ª

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- ‚úÖ Skybox –ù–ï –≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—Ä–∞—â–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã
- ‚úÖ Skybox –≤—Ä–∞—â–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ "IBL Rotation"
- ‚úÖ –ù–µ—Ç flip'–æ–≤ –∏–ª–∏ —Å–∫–∞—á–∫–æ–≤ –ø—Ä–∏ –ª—é–±—ã—Ö —É–≥–ª–∞—Ö

## üìù –í—ã–≤–æ–¥

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –Ω–µ –≤ —Å–ø–æ—Å–æ–±–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —É–≥–ª–∞**, –∞ –≤ **–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ–π –æ—à–∏–±–∫–µ** - —Ñ–æ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–æ–æ–±—â–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∫–∞–º–µ—Ä—ã!

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
```qml
probeOrientation: Qt.vector3d(0, root.iblRotationDeg, 0)
```

–ü—Ä–æ—Å—Ç–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ù–∏–∫–∞–∫–æ–≥–æ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è, –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–ª—å—Ç - —Ç–æ–ª—å–∫–æ **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å** `iblRotationDeg`.

---

**–í–µ—Ä—Å–∏—è:** v4.9.4 FINAL  
**–î–∞—Ç–∞:** 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û
