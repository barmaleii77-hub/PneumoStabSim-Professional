# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ QML - PneumoStabSim Professional

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª: `assets/qml/main.qml` (1400+ —Å—Ç—Ä–æ–∫)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- Properties (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–æ–º–µ—Ç—Ä–∏–∏, –∞–Ω–∏–º–∞—Ü–∏–∏, –≥—Ä–∞—Ñ–∏–∫–∏, –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤)
- Utility functions (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, —É–≥–ª—ã, URL)
- Camera system (–æ—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è –∫–∞–º–µ—Ä–∞)
- Animation system (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π)
- Lighting (4 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–≤–µ—Ç–∞)
- Materials library (8 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ PBR)
- Suspension geometry (4 —É–≥–ª–∞ –ø–æ–¥–≤–µ—Å–∫–∏)
- Environment (IBL, fog, SSAO)
- Effects (bloom, DOF, tonemap)
- Mouse controls
- Batch update system

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `IblProbeLoader.qml` - –∑–∞–≥—Ä—É–∑—á–∏–∫ IBL
- `CorrectedSuspensionCorner.qml` - –≥–µ–æ–º–µ—Ç—Ä–∏—è —É–≥–ª–∞ –ø–æ–¥–≤–µ—Å–∫–∏
- `Materials.qml` - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –†–∞–∑–ª–∏—á–Ω—ã–µ backup/fallback —Ñ–∞–π–ª—ã

---

## üéØ –¶–µ–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** (–ø–æ –ø—Ä–∏–º–µ—Ä—É Python-–ø–∞–Ω–µ–ª–µ–π)
- –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
- –ß–µ—Ç–∫–æ–µ API –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

### 2. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**
- –§–∞–π–ª—ã –¥–æ 300-400 —Å—Ç—Ä–æ–∫
- –Ø—Å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### 3. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**
- –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

---

## üìÅ –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
assets/qml/
‚îú‚îÄ‚îÄ main_refactored.qml           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª-–∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä (200-300 —Å—Ç—Ä–æ–∫)
‚îÇ
‚îú‚îÄ‚îÄ core/                         # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ Properties.qml            # –í—Å–µ root properties
‚îÇ   ‚îú‚îÄ‚îÄ StateManager.qml          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚îÇ   ‚îî‚îÄ‚îÄ UpdateBridge.qml          # Python‚ÜîQML –±–∞—Ç—á-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ camera/                       # –°–∏—Å—Ç–µ–º–∞ –∫–∞–º–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ OrbitalCamera.qml         # –û—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è –∫–∞–º–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ CameraControls.qml        # Mouse/keyboard –∫–æ–Ω—Ç—Ä–æ–ª–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ CameraDefaults.qml        # –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ environment/                  # –û–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ SceneEnvironment.qml      # ExtendedSceneEnvironment –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ IblProbeLoader.qml        # ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ Fog.qml                   # –¢—É–º–∞–Ω (Qt 6.10+)
‚îÇ   ‚îî‚îÄ‚îÄ PostEffects.qml           # Bloom, SSAO, DOF, Vignette
‚îÇ
‚îú‚îÄ‚îÄ lighting/                     # –°–∏—Å—Ç–µ–º–∞ –æ—Å–≤–µ—â–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ LightingRig.qml           # –ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ KeyLight.qml              # –ì–ª–∞–≤–Ω—ã–π —Å–≤–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ FillLight.qml             # –ó–∞–ø–æ–ª–Ω—è—é—â–∏–π —Å–≤–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ RimLight.qml              # –ö–æ–Ω—Ç—Ä–æ–≤–æ–π —Å–≤–µ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ PointLight.qml            # –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ç–æ—á–µ—á–Ω—ã–π —Å–≤–µ—Ç
‚îÇ
‚îú‚îÄ‚îÄ materials/                    # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ MaterialsLibrary.qml      # ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Materials.qml
‚îÇ   ‚îú‚îÄ‚îÄ FrameMaterial.qml         # –ú–∞—Ç–µ—Ä–∏–∞–ª —Ä–∞–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ LeverMaterial.qml         # –ú–∞—Ç–µ—Ä–∏–∞–ª —Ä—ã—á–∞–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ CylinderMaterial.qml      # –ú–∞—Ç–µ—Ä–∏–∞–ª —Ü–∏–ª–∏–Ω–¥—Ä–æ–≤ (glass)
‚îÇ   ‚îî‚îÄ‚îÄ PistonMaterial.qml        # –ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ—Ä—à–Ω–µ–π
‚îÇ
‚îú‚îÄ‚îÄ geometry/                     # 3D –≥–µ–æ–º–µ—Ç—Ä–∏—è –ø–æ–¥–≤–µ—Å–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ SuspensionSystem.qml      # –ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä 4 —É–≥–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ SuspensionCorner.qml      # ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ CorrectedSuspensionCorner.qml
‚îÇ   ‚îú‚îÄ‚îÄ Frame.qml                 # U-–æ–±—Ä–∞–∑–Ω–∞—è —Ä–∞–º–∞ (3 –±–∞–ª–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ Lever.qml                 # –†—ã—á–∞–≥
‚îÇ   ‚îú‚îÄ‚îÄ Cylinder.qml              # –¶–∏–ª–∏–Ω–¥—Ä + –ø–æ—Ä—à–µ–Ω—å
‚îÇ   ‚îî‚îÄ‚îÄ Joints.qml                # –®–∞—Ä–Ω–∏—Ä—ã
‚îÇ
‚îú‚îÄ‚îÄ utils/                        # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ MathUtils.qml             # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ GeometryCache.qml         # –ö—ç—à –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ AnimationCache.qml        # –ö—ç—à –∞–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ ColorUtils.qml            # –†–∞–±–æ—Ç–∞ —Å —Ü–≤–µ—Ç–∞–º–∏
‚îÇ
‚îî‚îÄ‚îÄ ui/                           # UI —ç–ª–µ–º–µ–Ω—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    ‚îî‚îÄ‚îÄ InfoPanel.qml             # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å
```

---

## üîÑ –§–∞–∑—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### **–§–ê–ó–ê 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ Core** (–¥–µ–Ω—å 1)

#### –®–∞–≥–∏:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ç–∞–ª–æ–≥–æ–≤
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `core/Properties.qml` - –≤—ã–Ω–µ—Å—Ç–∏ –≤—Å–µ root properties
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `core/StateManager.qml` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å `core/UpdateBridge.qml` - –±–∞—Ç—á-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Python‚ÜîQML
5. ‚úÖ –°–æ–∑–¥–∞—Ç—å `utils/MathUtils.qml` - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- [ ] –í—Å–µ properties –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
- [ ] Batch update —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Utility —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã

---

### **–§–ê–ó–ê 2: Camera System** (–¥–µ–Ω—å 1-2)

#### –®–∞–≥–∏:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `camera/OrbitalCamera.qml` - –æ—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è –∫–∞–º–µ—Ä–∞
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `camera/CameraControls.qml` - mouse/keyboard –∫–æ–Ω—Ç—Ä–æ–ª–ª—ã
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `camera/CameraDefaults.qml` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ main_refactored.qml

#### –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- [ ] –û—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è –∫–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- [ ] Mouse controls (–õ–ö–ú –≤—Ä–∞—â–µ–Ω–∏–µ, –ü–ö–ú –ø–∞–Ω–æ—Ä–∞–º–∞, –∫–æ–ª–µ—Å–æ –∑—É–º)
- [ ] –ö–ª–∞–≤–∏—à–∏ R (reset), F (fit), Space (–∞–Ω–∏–º–∞—Ü–∏—è)

---

### **–§–ê–ó–ê 3: Environment & Effects** (–¥–µ–Ω—å 2)

#### –®–∞–≥–∏:
1. ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `environment/IblProbeLoader.qml` (—É–∂–µ –µ—Å—Ç—å)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `environment/SceneEnvironment.qml` - ExtendedSceneEnvironment
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `environment/Fog.qml` - —Ç—É–º–∞–Ω (Qt 6.10+)
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å `environment/PostEffects.qml` - Bloom, SSAO, DOF

#### –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- [ ] IBL –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] ExtendedSceneEnvironment –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –í—Å–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç (bloom, fog, SSAO, vignette)

---

### **–§–ê–ó–ê 4: Lighting System** (–¥–µ–Ω—å 2-3)

#### –®–∞–≥–∏:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `lighting/LightingRig.qml` - –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `lighting/KeyLight.qml` - –≥–ª–∞–≤–Ω—ã–π —Å–≤–µ—Ç
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `lighting/FillLight.qml` - –∑–∞–ø–æ–ª–Ω—è—é—â–∏–π
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å `lighting/RimLight.qml` - –∫–æ–Ω—Ç—Ä–æ–≤–æ–π
5. ‚úÖ –°–æ–∑–¥–∞—Ç—å `lighting/PointLight.qml` - —Ç–æ—á–µ—á–Ω—ã–π –∞–∫—Ü–µ–Ω—Ç

#### –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- [ ] 3-—Ç–æ—á–µ—á–Ω–∞—è —Å—Ö–µ–º–∞ –æ—Å–≤–µ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑ Python (—è—Ä–∫–æ—Å—Ç—å, —Ü–≤–µ—Ç, —É–≥–ª—ã)
- [ ] –¢–µ–Ω–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è

---

### **–§–ê–ó–ê 5: Materials Library** (–¥–µ–Ω—å 3)

#### –®–∞–≥–∏:
1. ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `materials/MaterialsLibrary.qml`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `materials/FrameMaterial.qml` - –º–µ—Ç–∞–ª–ª —Ä–∞–º—ã
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `materials/LeverMaterial.qml` - –º–µ—Ç–∞–ª–ª —Ä—ã—á–∞–≥–æ–≤
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å `materials/CylinderMaterial.qml` - —Å—Ç–µ–∫–ª–æ —Ü–∏–ª–∏–Ω–¥—Ä–æ–≤
5. ‚úÖ –°–æ–∑–¥–∞—Ç—å `materials/PistonMaterial.qml` - –ø–æ—Ä—à–µ–Ω—å —Å warning —Ü–≤–µ—Ç–æ–º

#### –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- [ ] PBR –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è
- [ ] –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ü–∏–ª–∏–Ω–¥—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç (IOR, transmission)
- [ ] Warning —Ü–≤–µ—Ç–∞ –ø–æ—Ä—à–Ω–µ–π –ø—Ä–∏ –æ—à–∏–±–∫–µ –¥–ª–∏–Ω—ã —à—Ç–æ–∫–∞

---

### **–§–ê–ó–ê 6: Suspension Geometry** (–¥–µ–Ω—å 3-4)

#### –®–∞–≥–∏:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `geometry/Frame.qml` - U-—Ä–∞–º–∞ (3 –±–∞–ª–∫–∏)
2. ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å `geometry/SuspensionCorner.qml` (–∏–∑ CorrectedSuspensionCorner)
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `geometry/Lever.qml` - —Ä—ã—á–∞–≥
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å `geometry/Cylinder.qml` - —Ü–∏–ª–∏–Ω–¥—Ä + –ø–æ—Ä—à–µ–Ω—å
5. ‚úÖ –°–æ–∑–¥–∞—Ç—å `geometry/Joints.qml` - —à–∞—Ä–Ω–∏—Ä—ã
6. ‚úÖ –°–æ–∑–¥–∞—Ç—å `geometry/SuspensionSystem.qml` - –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä 4 —É–≥–ª–æ–≤

#### –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- [ ] –í—Å–µ 4 —É–≥–ª–∞ –ø–æ–¥–≤–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- [ ] –î–ª–∏–Ω–∞ —à—Ç–æ–∫–∞ –ø–æ—Ä—à–Ω—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–∞ (200–º–º)
- [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–π warning –ø—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏

---

### **–§–ê–ó–ê 7: Integration & Testing** (–¥–µ–Ω—å 4-5)

#### –®–∞–≥–∏:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `main_refactored.qml` - –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä
2. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Python‚ÜîQML –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
4. ‚úÖ –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
5. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
6. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

#### –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ main.qml —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Python –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] FPS >= 60 –ø—Ä–∏ –∞–Ω–∏–º–∞—Ü–∏–∏
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

---

## üìù –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏**
- –ù–µ –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Python API
- –í—Å–µ QML —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã: `applyGeometryUpdates()`, `applyLightingUpdates()` –∏ —Ç.–¥.
- –°–∏–≥–Ω–∞–ª—ã `batchUpdatesApplied` —Ä–∞–±–æ—Ç–∞—é—Ç

### 2. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
```qml
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: PascalCase –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
OrbitalCamera { }
KeyLight { }
FrameMaterial { }

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: camelCase –¥–ª—è —Å–≤–æ–π—Å—Ç–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π
property real userBeamSize: 120
function applyGeometryUpdates(params) { }

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: snake_case –¥–ª—è –∫–ª—é—á–µ–π Python‚ÜîQML
{
    "frame_length": 3200,
    "track_width": 1600
}
```

### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
```qml
/*
 * OrbitalCamera - Orbital camera system
 * 
 * Features:
 *  - Mouse controls (LMB rotate, RMB pan, wheel zoom)
 *  - Auto-rotation mode
 *  - Reset view (R key or double-click)
 * 
 * Properties:
 *  - cameraDistance: Distance from pivot (mm)
 *  - yawDeg: Horizontal rotation (degrees)
 *  - pitchDeg: Vertical rotation (degrees)
 * 
 * Functions:
 *  - resetView(): Reset camera to default position
 *  - autoFitFrame(): Fit frame in view
 */
Node { }
```

### 4. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º**
```qml
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
// –í—Ä–∞—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –≤–æ–∫—Ä—É–≥ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–∏

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
// –ò—Å–ø–æ–ª—å–∑—É–µ–º SLERP –¥–ª—è smooth rotation interpolation
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã QML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
```
tests/qml/
‚îú‚îÄ‚îÄ test_camera_orbital.qml          # –¢–µ—Å—Ç –æ—Ä–±–∏—Ç–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä—ã
‚îú‚îÄ‚îÄ test_lighting_rig.qml            # –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –æ—Å–≤–µ—â–µ–Ω–∏—è
‚îú‚îÄ‚îÄ test_materials_library.qml       # –¢–µ—Å—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
‚îú‚îÄ‚îÄ test_suspension_corner.qml       # –¢–µ—Å—Ç —É–≥–ª–∞ –ø–æ–¥–≤–µ—Å–∫–∏
‚îî‚îÄ‚îÄ test_python_qml_bridge.py        # Python‚ÜîQML integration
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è:
- [ ] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Python –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] FPS >= 60 –ø—Ä–∏ –∞–Ω–∏–º–∞—Ü–∏–∏
- [ ] –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- [ ] –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—É

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- **main.qml**: 1400+ —Å—Ç—Ä–æ–∫
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: 3
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—Ü–µ–ª—å):
- **main_refactored.qml**: ~300 —Å—Ç—Ä–æ–∫ (–∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: ~25
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –û—Ç–ª–∏—á–Ω–∞—è
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: FPS >= 60

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞–Ω–∞**
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- [ ] –£—Ç–æ—á–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ñ–∞–∑
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å timeline (4-5 –¥–Ω–µ–π)

### 2. **–ó–∞–ø—É—Å–∫ –§–∞–∑—ã 1**
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥–∏ `assets/qml/core/`, `utils/`
- [ ] –°–æ–∑–¥–∞—Ç—å `Properties.qml`
- [ ] –°–æ–∑–¥–∞—Ç—å `MathUtils.qml`
- [ ] –ü–µ—Ä–≤—ã–µ —Ç–µ—Å—Ç—ã

### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- [ ] –°–æ–∑–¥–∞—Ç—å `QML_API_REFERENCE.md`
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –ü–æ–ª–æ–º–∫–∞ Python‚ÜîQML API
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** 
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–π `main.qml` –∫–∞–∫ `main_legacy.qml`
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ Python —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å integration —Ç–µ—Å—Ç—ã

### –†–∏—Å–∫ 2: –ü–∞–¥–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –†–∏—Å–∫ 3: –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–æ/–ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∞
- User acceptance testing

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### **–ß–∏—Å—Ç–∞—è –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ QML:**
```
Main (–∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä)
  ‚îú‚îÄ‚îÄ Core (properties, state)
  ‚îú‚îÄ‚îÄ Camera (orbital, controls)
  ‚îú‚îÄ‚îÄ Environment (IBL, fog, effects)
  ‚îú‚îÄ‚îÄ Lighting (rig, key/fill/rim/point)
  ‚îú‚îÄ‚îÄ Materials (library, PBR)
  ‚îî‚îÄ‚îÄ Geometry (frame, suspension system)
```

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
‚úÖ –ß–∏—Ç–∞–µ–º—ã–π –∫–æ–¥ (—Ñ–∞–π–ª—ã <400 —Å—Ç—Ä–æ–∫)
‚úÖ –õ–µ–≥–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Python-–∫–æ–¥–∞

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥?** üöÄ

–ü—Ä–µ–¥–ª–∞–≥–∞—é –Ω–∞—á–∞—Ç—å —Å **–§–∞–∑—ã 1: Core & Utils** - —ç—Ç–æ –±–∞–∑–∞ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
